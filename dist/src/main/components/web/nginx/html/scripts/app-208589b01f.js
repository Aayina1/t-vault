/*
* =========================================================================
* Copyright 2018 T-Mobile, US
* 
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* See the readme.txt file for additional language around disclaimer of warranties.
* =========================================================================
*/
"use strict";function readTextFile(e){var t=new XMLHttpRequest;t.open("GET",e,!1),t.onreadystatechange=function(){if(4===t.readyState&&(200===t.status||0==t.status)){var e=t.responseText,a=JSON.parse(e);sessionStorage.setItem("ApiUrls",JSON.stringify(a))}},t.send(null)}angular.module("vault.services.VaultUtility",[]).service("vaultUtilityService",["fetchData","UtilityService","SessionStore","ModifyUrl","$q","$http","$rootScope","RestEndpoints","AppConstant",function(e,t,a,s,i,o,n,r,l){function c(e,t,a){var s=t;return s.forEach(function(t){var s,i=t.userId.toLowerCase();t.userEmail&&(s=t.userEmail.toLowerCase()),(i.includes(a.toLowerCase())||s===a.toLowerCase())&&(t.displayName&&t.displayName.includes(",")&&(i=t.displayName.split(","),i=i[1]+" "+i[0]),t.userEmail?e.push(i+" - "+t.userEmail):e.push(i))}),e}function d(e,t,a){var s=t;return s.forEach(function(t){var s=t.userName.toLowerCase();s.includes(a.toLowerCase())&&t.userName&&e.push(t.userName)}),e}function u(e,t,a){var s=t;return s.forEach(function(t){var s,i=t.userId.toLowerCase();t.userEmail&&(s=t.userEmail.toLowerCase()),(i.includes(a.toLowerCase())||s===a.toLowerCase())&&t.userEmail&&e.push(t.userEmail)}),e}function m(e,t,a){var s=t;return s.forEach(function(t){var s,i=t.groupName.toLowerCase();t.email&&(s=t.email.toLowerCase()),(i.includes(a.toLowerCase())||s===a.toLowerCase())&&(t.email?e.push(t.groupName+" - "+t.email):e.push(t.groupName))}),e}var p=this;p.canceller={},p.authType=l.AUTH_TYPE,p.getDropdownDataForPermissions=function(e,t,a){return new Promise(function(s,i){var o,n={};a?o=r.baseURL+r.usersGetData:"userName"===e&&"ldap"===p.authType.toLowerCase()?o=r.baseURL+r.usersGetDataUsingCorpID:"userName"===e&&"ldap1900"===p.authType.toLowerCase()?o=r.baseURL+r.usersGetData:"groupName"===e&&(o=r.baseURL+r.groupGetData),o+=t;try{n.loadingDataFrDropdown=!0,0!==Object.keys(p.canceller).length&&p.canceller.resolve(),v(o).then(function(e){try{n.response=e;var t=e.data.data.values;"OK"!==e.statusText?(n.loadingDataFrDropdown=!1,n.erroredFrDropdown=!1,n.successFrDropdown=!1,s(n)):(n.dataFrmApi=t,n.loadingDataFrDropdown=!1,n.erroredFrDropdown=!1,n.successFrDropdown=!0,s(n))}catch(a){n.error=a,i(n.error)}},function(e){i(e)})}catch(l){n.error=l,i(n.error)}})};var v=function(e){n.showLoadingScreen=!0,p.canceller=i.defer();var t={method:"GET",url:e,timeout:p.canceller.promise};return o(t).then(function(e){n.showLoadingScreen=!1;var t=e.headers("x-response-type");return"ERROR"===t?i.reject(e):e},function(e){return i.reject(e)})};p.massageDataFrPermissionsDropdown=function(e,t,a,s){var i=[];return void 0!==a?(s?i=u(i,a,t):"userName"===e&&"ldap"===p.authType.toLowerCase()?i=d(i,a,t):"userName"===e&&"ldap1900"===p.authType.toLowerCase()?i=c(i,a,t):"groupName"===e&&(i=m(i,a,t)),i):void 0},p.clearAllCommas=function(e,t){var a=t.indexOf(e);return t=t.replace(e,""),(","===t[a]||" ,"===t[a])&&(t=t.replace(t[a],"")),t}}]),function(e){e.service("SafesManagement",["$http","SessionStore","ServiceEndpoint","$q","DataCache","fetchData","$rootScope","ModifyUrl","ErrorMessage","UtilityService","Modal",function(e,t,a,s,i,o,n,r,l,c,d){this.saveNewFolder=function(e,t){var s=r.addUrlParameteres("saveNewFolder",t);return a.saveNewFolder.makeRequest(e,s).then(function(e){return e})},this.getFolderData=function(e,t){var s=r.addUrlParameteres("safesList",t);return a.safesList.makeRequest(null,s).then(function(e){return e},function(e){return e})},this.getSecrets=function(e,t){var s=r.addUrlParameteres("getSecrets",t);return a.getSecrets.makeRequest(null,s).then(function(e){return e})},this.writeSecret=function(e){return a.postSecrets.makeRequest(e).then(function(e){return e})},this.deleteFolder=function(e,t){var s=r.addUrlParameteres("deleteSafe",t);return a.deleteSafe.makeRequest(e,s).then(function(e){return e})},this.getTheRightErrorMessage=function(e){return 500===e.status||"Internal Server Error"===e.statusText?l.ERROR_NETWORK:404===e.status||"Not Found"===e.statusText?l.ERROR_CONTENT_NOT_FOUND:422===e.status||e.data.errors[0].indexOf("Exist")>0?l.ERROR_CONTENT_EXISTS:l.ERROR_GENERAL}}])}(angular.module("vault.services.SafesManagement",[])),function(e){e.service("fetchData",["ServiceEndpoint","$q","DataCache",function(e,t,a){return{postActionData:function(t,a,s){return e.postAction.makeRequest(t,a,s).then(function(e){return e})},getActionData:function(t,a,s){return e.getAction.makeRequest(t,a,s).then(function(e){return e})},deletePermission:function(t,a,s){return e.deletePermission.makeRequest(t,a,s).then(function(e){return e})},getAwsConfigurationDetails:function(t,a,s){return e.awsConfigurationDetails.makeRequest(t,a,s).then(function(e){return e})}}}])}(angular.module("vault.services.fetchData",[])),function(e){e.service("Authentication",["RestEndpoints","fetchData","$window","ServiceEndpoint","ErrorMessage","$q","$http","Idle","Keepalive","AppConstant","SessionStore","$state",function(e,t,a,s,i,o,n,r,l,c,d,u){function m(e){var t="/#!/signup";return e?void window.location.replace(t):p.revokeAuthToken()["finally"](function(e){d.removeItem("myVaultKey"),d.removeItem("isAdmin"),d.removeItem("accessSafes"),d.removeItem("policies"),d.removeItem("allSafes"),window.location.replace(t)})}var p={authenticateUser:function(e,t){try{return s.login.makeRequest(e).then(function(e){var t=e.data.lease_duration;return void 0==t&&(t=300),r.setIdle(180),r.setTimeout(t-180),l.setInterval(t-60),r.watch(),e},function(e){return console.log("error in login"),console.log(e),e})}catch(a){return t({error:a})}},renewAuthToken:function(e){return s.renewToken.makeRequest(null,null,{"vault-token":e}).then(function(e){var t=e.data.lease_duration;void 0==t&&(t=300),r.setIdle(180),r.setTimeout(t-180),l.setInterval(t-60)},function(e){return m(!0),console.log("error retrieving token",e),e})},revokeAuthToken:function(){var t=e.baseURL+"/auth/tvault/revoke";return n({method:"GET",url:t,headers:{"vault-token":d.getItem("myVaultKey")}}).then(function(e){return e.data})},getTheRightErrorMessage:function(e){return"500"===e.status||"Internal Server Error"===e.statusText?i.ERROR_NETWORK:"404"===e.status?i.ERROR_WRONG_USERNAME_PASSWORD:i.ERROR_GENERAL},formatUsernameWithoutDomain:function(e){var t=/^(corp\/|corp\\)/gi;return e.replace(t,"")},logout:m};return p}])}(angular.module("vault.services.Authentication",["vault.services.ServiceEndpoint","vault.constants.ErrorMessage"])),function(e){e.service("AdminSafesManagement",["ServiceEndpoint","$q","DataCache","fetchData","$rootScope","ErrorMessage",function(e,t,a,s,i,o){return{getCompleteSafesList:function(t,a){return e.safesList.makeRequest(t,a).then(function(e){return e})},deleteSafe:function(t,a){return e.deleteSafe.makeRequest(t,a).then(function(e){return e})},getSafeInfo:function(t,a){return e.getSafeInfo.makeRequest(t,a).then(function(e){return e})},createSafe:function(t,a){return e.createSafe.makeRequest(t,a).then(function(e){return e})},editSafe:function(t,a){return e.editSafe.makeRequest(t,a).then(function(e){return e})},deleteUserPermissionFromSafe:function(t,a){return e.deleteUserPermission.makeRequest(t,a).then(function(e){return e})},deleteGroupPermissionFromSafe:function(t,a){return e.deleteGroupPermission.makeRequest(t,a).then(function(e){return e})},deleteAWSPermissionFromSafe:function(t,a){return e.deleteAWSPermission.makeRequest(t,a).then(function(e){return e})},detachAWSPermissionFromSafe:function(t,a){return e.detachAWSPermission.makeRequest(t,a).then(function(e){return e})},addUserPermissionForSafe:function(t,a){return e.addUserPermission.makeRequest(t,a).then(function(e){return e})},addGroupPermissionForSafe:function(t,a){return e.addGroupPermission.makeRequest(t,a).then(function(e){return e})},addAWSPermissionForSafe:function(t,a){return e.addAWSPermission.makeRequest(t,a).then(function(e){return e})},getAWSConfigurationDetails:function(t,a){return e.getAwsConfigurationDetails.makeRequest(t,a).then(function(e){return e})},addAWSRole:function(t,a){return e.createAwsRole.makeRequest(t,a).then(function(e){return e})},updateAWSRole:function(t,a){return e.updateAwsRole.makeRequest(t,a).then(function(e){return e})},addAWSIAMRole:function(t,a){return e.createAwsIAMRole.makeRequest(t,a).then(function(e){return e})},updateAWSIAMRole:function(t,a){return e.updateAwsIAMRole.makeRequest(t,a).then(function(e){return e})},getTheRightErrorMessage:function(e){if(500===e.status||"Internal Server Error"===e.statusText)return o.ERROR_NETWORK;if(404===e.status)return o.ERROR_CONTENT_NOT_FOUND;if(422===e.status){if(e.data&&e.data.errors){var t=e.data.errors;return t.length>0?t[0]:o.ERROR_GENERAL}return o.ERROR_GENERAL}return o.ERROR_GENERAL}}}])}(angular.module("vault.services.AdminSafesManagement",[])),function(){angular.module("vault.features.safes",["vault.core"])}(),function(){function e(e,t,a,s,i,o){function n(e){var t=a.SAFE_TYPES[l.tabIndex].key;i.go("safes-folders",{path:t+"/"+e.safe})}function r(){o.$on("search",function(e,t){l.searchValue=t}),l.tabIndex=a.SAFE_TYPES.findIndex(function(e){return e.key===s.type}),a.SAFE_TYPES.forEach(function(a){l.tiles[a.key]=t[a.key]&&e.parseSafes(t[a.key])||[]})}var l=this;l.safeCategories=e.getSafeTabs(),l.searchValue="",l.tabIndex=0,l.tiles=[],r(),l.goToFolders=n}e.$inject=["safesService","safes","SAFES_CONSTANTS","$stateParams","$state","$rootScope"],angular.module("vault.features.safes").controller("safesTilesController",e)}(),function(){function e(e,t,a,s,i){function o(e){console.log("search"),vm.search=e}function n(){s.myVaultKey=e.getItem("myVaultKey"),s.myVaultKey||a.go("signup"),s.safesNavTags=t.getSafesNavTags(),i.$on("$stateChangeStart",function(e){s.loadingSafeTabs=!0}),i.$on("$stateChangeSuccess",function(e){s.loadingSafeTabs=!1})}s.search="",s.loadingSafeTabs=!1,s.safesNavTags=[],n(),s.onSearch=o}e.$inject=["SessionStore","safesService","$state","$scope","$rootScope"],angular.module("vault.features.safes").controller("safesTabsController",e)}(),function(){function e(e,t,a,s,i,o,n,r){function l(e){h.loadingFlag=e}function c(t,a){var s={title:"Create Secret",inputValue:t||"",inputLabel:"Key",placeholder:"Enter secret key",passwordValue:a||"",passwordLabel:"Secret",passwordPlaceholder:"Enter secret value",submitLabel:"CREATE",cancelLabel:"CANCEL"};return n.createModalWithController("text-input.modal.html",s).then(function(t){var a={id:t.inputValue,key:t.inputValue,value:t.passwordValue,type:"secret",parentId:e.id};return d(a)})}function d(t){return a.itemIsValidToSave(t,-1,e).then(function(s){return h.loading(!0),a.saveFolder(e,t).then(function(){h.loading(!1),h.folderContent.children=[t].concat(e.children),r.toast("Added successfully")})["catch"](f)})["catch"](function(e){return c(t.key,t.value)})}function u(){var t;return n.createModalWithController("folder-text-input.modal.html",{title:"Create Folder",inputLabel:"Folder Name",placeholder:"Enter folder name",submitLabel:"CREATE"}).then(function(s){return t={parentId:h.currentFolder.fullPath,id:h.currentFolder.fullPath+"/"+s.inputValue.toLowerCase(),name:s.inputValue.toLowerCase(),value:null,type:"folder",children:[]},a.itemIsValidToSave({key:t.name,value:t.name},-1,e).then(function(){return h.loading(!0),a.createFolder(t.id).then(function(e){h.loading(!1),h.folderContent.children.push(t)})["catch"](f)})["catch"](function(e){return u(t.id)})})}function m(e){i.go("safes",{type:e.id})}function p(){i.go("safes",{type:h.root.fullPath})}function v(e){i.go("safes-folders",{path:e})}function g(){if(!e.id)return n.createModalWithController("stop.modal.html",{title:"Error",message:"Sorry we were unable to retrieve those documents."}),i.go("safes");for(var t=e.id.split("/");t.length>0;)h.folderPathArray.push({fullPath:t.join("/"),folderName:t[t.length-1],pathLength:t.length}),t.pop();h.root=h.folderPathArray.pop(),h.tabIndex=s.SAFE_TYPES.findIndex(function(e){return e.key===h.root.fullPath}),h.folderPathArray=h.folderPathArray.reverse(),h.currentFolder=h.folderPathArray[h.folderPathArray.length-1],h.userViewingFolder="folder"===h.folderContent.type,o.$on("search",function(e,t){h.search=t})}function f(e){h.loading(!1),console.log(e),e&&n.createModalWithController("stop.modal.html",{title:"Error",message:"Please try again. If this issue persists please contact an administrator."})}var h=this;h.safeCategories=a.getSafeTabs(),h.search="",h.folderPathArray=[],h.currentFolder=null,h.folderContent=e,h.writeAccess=t,h.userViewingFolder=!1,h.root=null,h.tabIndex=0,h.loadingFlag=!1,g(),h.clickSafeTab=m,h.goToFolder=v,h.goToSafeTiles=p,h.createFolder=u,h.createSecret=c,h.loading=l}e.$inject=["folderContent","writeAccess","safesService","SAFES_CONSTANTS","$state","$rootScope","Modal","Notifications"],angular.module("vault.features.safes").controller("safesFoldersController",e)}(),function(e){e.service("httpInterceptor",["SessionStore",function(e){return{request:function(t){if(t.headers=t.headers||{},t.url.indexOf("ad/users")>-1)return t;var a=e.getItem("myVaultKey");return t.headers["vault-token"]=a,t}}}])}(angular.module("vault.services.httpInterceptor",[])),function(e){e.service("ModifyUrl",["RestEndpoints","ArrayFilter",function(e,t){return{addUrlParameteres:function(a,s){var i,o=e.baseURL,n=e.endpoints,r=t.searchAnObjectFromArray("name",a,n);return r.url&&(i=o+r.url+s),i}}}])}(angular.module("vault.services.ModifyUrl",["vault.constants.RestEndpoints","vault.services.ArrayFilter"])),function(e){e.service("UtilityService",["AppConstant","ErrorMessage","SuccessMessage",function(e,t,a){this.split=function(e){return e.split(/,\s*/)},this.extractLast=function(e){return this.split(e).pop()},this.formatName=function(e){return null!==e&&void 0!==e?(e=e.toLowerCase(),e.replace(/[ ]/g,"-")):void 0},this.getAppConstant=function(t){return e[t]},this.ifAPIRequestSuccessful=function(e){return"200"===e.status||"OK"===e.statusText||200===e.status},this.getAParticularErrorMessage=function(e){return t[e]},this.getAParticularSuccessMessage=function(e){return a[e]},this.isObjectEmpty=function(e){return e?0===Object.keys(e).length&&e.constructor===Object:!0}}])}(angular.module("vault.services.UtilityService",["vault.constants.AppConstant","vault.constants.ErrorMessage","vault.constants.SuccessMessage"])),function(e){e.service("Unseal",["ServiceEndpoint","$q","DataCache","fetchData","$rootScope","ModifyUrl","ErrorMessage",function(e,t,a,s,i,o,n){this.unseal=function(t){return e.unseal.makeRequest(t).then(function(e){return e})},this.unsealProgress=function(t,a){var s=o.addUrlParameteres("unsealProgress",a);return e.unsealProgress.makeRequest(t,s).then(function(e){return e})},this.getTheRightErrorMessage=function(e){return 500===e.status||"Internal Server Error"===e.statusText?n.ERROR_NETWORK:404===e.status||"Not Found"===e.statusText?n.ERROR_CONTENT_NOT_FOUND:422===e.status||e.data.errors[0].indexOf("Exist")>0?n.ERROR_CONTENT_EXISTS:n.ERROR_GENERAL}}])}(angular.module("vault.services.Unseal",[])),function(e){e.service("SessionStore",["$window",function(e){this.setItem=function(t,a){e.sessionStorage.setItem(t,a)},this.getItem=function(t){return e.sessionStorage.getItem(t)},this.clear=function(){e.sessionStorage.clear()},this.removeItem=function(t){e.sessionStorage.removeItem(t)}}])}(angular.module("vault.services.SessionStore",[])),function(e){e.factory("ServiceEndpoint",["RestEndpoints","$http","$q","$rootScope","MockData",function(e,t,a,s,i){function o(e,i,o,r){n[e]={name:e,url:i,method:o,lazy:r,makeRequest:function(n,c,d){void 0!=c&&""!=c&&(i=c),l=void 0!=d&&""!=d?d:{},l["Content-Type"]="application/json",n=n||{};var u={method:o,url:i,data:n,lazy:r,headers:l};s.showLoadingScreen=!0;var m=t(u).then(function(t){s.showLoadingScreen=!1;var i=t.headers("x-response-type");if("ERROR"===i){var o={service:e,message:t.headers("x-response-message")};return s.$broadcast("genericServiceError",o),a.reject(t)}return t},function(t){var i;i=t.headers("x-response-message");var o={service:e,message:i};return s.$broadcast("genericServiceError",o),a.reject(t)});return r||(s.showLoadingScreen=!1),m}}}var n={};n.adhockEndpoint=function(e,t,a,s){return o(e,t,a,s),n[e]};for(var r=e.baseURL,l=(e.apiKey,{}),c=e.endpoints,d=c.length-1;d>=0;d--)o(c[d].name,r+c[d].url,c[d].method,c[d].lazy);return n}])}(angular.module("vault.services.ServiceEndpoint",["vault.constants.RestEndpoints"])),function(e){e.service("RefreshHandler",["DataCache","$window","$rootScope","$state","SessionStore",function(e,t,a,s,i){var o=!1;this.loadFromWebstorage=function(){e.loadFromWebstorage(),o=!0},this.isRefreshing=function(){return o},this.refreshDone=function(){o=!1},this.bindRefreshWarning=function(e){if(t.Modernizr.sessionstorage){this.setRedirectState();var s="If you refresh then you will be taken back to the first step of and lose your progress";a.isEcomPayment&&(s="If you refresh then you will be taken back to the first step of the process"),t.onbeforeunload=function(){return e&&(s=e),s}}},this.unbindRefreshWarning=function(){t.onbeforeunload=null,i.removeItem("onRefreshRedirectState")}}])}(angular.module("vault.services.RefreshHandler",[])),function(e){e.service("Notifications",["toastr","toastrConfig",function(e,t){return t.containerId="toast-container",t.iconClass="toast",t.tapToDismiss=!1,t.timeOut=1e3,t.positionClass="custom-toast",t.newestOnTop=!0,t.preventDuplicates=!1,t.preventOpenDuplicates=!0,t.progressBar=!1,t.maxOpened=1,t.templates.toast="directives/toast/toast.html",{toast:function(t){e.info(t,"")},toastError:function(t){e.info(t,"",{iconClass:"toastError",tapToDismiss:!1,timeOut:3e3,extendedTimeOut:1e3,positionClass:"custom-toast"})},clearToastr:function(){e.clear(),e.clearToastr}}}])}(angular.module("vault.services.Notifications",["toastr"])),function(e){e.service("Modal",["$uibModal",function(e){var t,a=!0;return{createModal:function(s,i,o,n,r){t&&this.close(),t=e.open({animation:a,templateUrl:i,size:s,scope:n})},close:function(){t&&(t.dismiss("Close clicked"),t=null)},save:function(){t.close("Save clicked"),t=null},createModalWithController:function(t,s){var i=e.open({templateUrl:t,animationsEnabled:a,size:s.size||"md",controller:["$scope","$uibModalInstance",function(e,t){e.dismiss=t.dismiss,e.close=t.close,e.config=s,e.form={inputValue:"",passwordValue:""}}]});return i.result}}}])}(angular.module("vault.services.Modal",[])),function(e){e.service("DeviceDetector",["$window","$log",function(e,t){var a,s,i=640,o=1024,n="",r=e.navigator.userAgent;return{checkDevice:function(){return a=e.innerWidth,a>o?n="large":a>=i&&o>=a?n="medium":i>a?n="small":t.log("Unrecognised device type"),n},isIphone:function(){return r.indexOf("iPhone")>=0&&(s=!0),s},isIpad:function(){return r.indexOf("iPad")>=0&&(s=!0),s},getDeviceheight:function(){return e.innerHeight},getDeviceWidth:function(){return e.innerWidth}}}])}(angular.module("vault.services.DeviceDetector",[])),function(e){e.service("DataCache",["SessionStore",function(e){var t={};return{saveGlobalData:function(a,s){var i=angular.copy(s);return t[a]=i,e.setItem("data",angular.toJson(t)),i},returnData:function(e){var a=angular.copy(t[e]);return a},clearAll:function(){t={},e.clear()},clearCache:function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.saveGlobalData(e[t],null);else this.saveGlobalData(e,null)},loadFromWebstorage:function(){t=angular.fromJson(e.getItem("data"))||{}}}}])}(angular.module("vault.services.DataCache",[])),function(e){e.service("CopyToClipboard",function(){return{copy:function(e){var t=e,a=document.createElement("span");a.appendChild(document.createTextNode(t)),a.id="tempCopyToClipboard",angular.element(document.body.append(a));var s=document.createRange();s.selectNode(a),window.getSelection().removeAllRanges(),window.getSelection().addRange(s),document.execCommand("copy"),window.getSelection().removeAllRanges(),a.remove()}}})}(angular.module("vault.services.CopyToClipboard",[])),function(e){e.service("ArrayFilter",function(){this.searchAnObjectFromArray=function(e,t,a){var s=a.filter(function(a){return a[e]===t})[0];return s},this.findIndexInArray=function(e,t,a){var s=a.findIndex(function(a){return a[e]===t});return s}})}(angular.module("vault.services.ArrayFilter",[])),/*
* =========================================================================
* Copyright 2018 T-Mobile, US
* 
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* See the readme.txt file for additional language around disclaimer of warranties.
* =========================================================================
*/
function(){angular.module("vault",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngResource","ui.router","ui.bootstrap","toastr","counter","ngMaterial","ngTable","ui.select","vault.features","vault.services","vault.constants","vault.directives","vault.factories","vault.layout","vault.core","ngIdle"]),angular.module("vault.core",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngResource","ui.router","ui.bootstrap","toastr","counter","ngMaterial","ngTable","ui.select","ngIdle","vault.directives"]),angular.module("vault.features",["vault.features.SignUpCtrl","vault.features.AdminCtrl","vault.features.ChangeSafeCtrl","vault.features.UnsealCtrl","vault.features.safes"]),angular.module("vault.services",["vault.services.CopyToClipboard","vault.services.DataCache","vault.services.DeviceDetector","vault.services.Modal","vault.services.RefreshHandler","vault.services.ServiceEndpoint","vault.services.SessionStore","vault.services.fetchData","vault.services.SafesManagement","vault.services.UtilityService","vault.services.Authentication","vault.services.AdminSafesManagement","vault.services.ModifyUrl","vault.services.ArrayFilter","vault.services.httpInterceptor","vault.services.Notifications","vault.services.Unseal","vault.services.VaultUtility"]),angular.module("vault.constants",["vault.constants.RestEndpoints","vault.constants.AppConstant","vault.constants.ErrorMessage","vault.constants.ListOfApi","vault.constants.MockData"]),angular.module("vault.filters",["vault.filters.ToArray","vault.filters.CustomFilter"]),angular.module("vault.directives",["vault.features.ElementProperties","vault.features.Scroll","vault.directives.dateTimeFilter","vault.directives.dropDown","vault.directives.footer","vault.directives.header","vault.directives.listtable","vault.directives.loadingState","vault.directives.resize","vault.directives.sidebar","vault.directives.tiles","vault.directives.radioButtons","vault.directives.restrictSpecialChar","vault.directives.dropDown","vault.directives.navBar","vault.directives.folderContentsTable","vault.directives.folderContentsRow","vault.directives.searchbar","vault.directives.restrictSecretSpecialChar","vault.directives.restrictArnSpecialChar"]),angular.module("vault.factories",[])}(),angular.module("vault").filter("trustAsHtml",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]),function(e){e.filter("toArray",function(){return function(e){var t=[];return angular.forEach(e,function(e,a){t.push(e)}),t}})}(angular.module("vault.filters.ToArray",[])),angular.module("vault").filter("timeFilter",["$filter",function(e){return function(t){var a,s=Math.floor(t/60);if(60>s)a=s+" minutes";else{var i=Math.floor(s/60),o=s%60;a=i+" hours "+o+" minutes"}return e("trustAsHtml")(a)}}]),angular.module("vault").filter("percent",["$filter",function(e){return function(t){var a="<span class='target-text'>"+t+"</span><span class='text-suffix'>%</span>";return e("trustAsHtml")(a)}}]),angular.module("vault").filter("numFilter",["$filter",function(e){return function(t){var a;return void 0!==t?(a=Math.abs(t),a>=Math.pow(10,12)?t="<span class='target-text'>"+(t/Math.pow(10,12)).toFixed(1)+"</span><span class='text-suffix'>T</span>":a<Math.pow(10,12)&&a>=Math.pow(10,9)?t="<span class='target-text'>"+(t/Math.pow(10,9)).toFixed(1)+"</span><span class='text-suffix'>B</span>":a<Math.pow(10,9)&&a>=Math.pow(10,6)?t=(t/Math.pow(10,6)).toFixed(1)+"M":a<Math.pow(10,6)&&a>=Math.pow(10,3)&&(t=(t/Math.pow(10,3)).toFixed(1)+"K"),e("trustAsHtml")(t)):void 0}}]),function(e){e.filter("customFilter",["$filter",function(e){return function(t,a){if(t==1/0)return null;var s=2;switch(void 0!=a&&a.indexOf(":")>-1&&(s=parseInt(a.split(":")[1].trim()),a=a.split(":")[0].trim()),a){case"text":return t;case"number":return e(a)(t,s);case"percentage":return e("number")(t,s)+"%";case"date":return e("date")(t,"MM/dd/yyyy");default:return t}}}])}(angular.module("vault.filters.CustomFilter",[])),function(e){e.directive("tiles",function(){return{restrict:"E",templateUrl:"app/Common/Directives/tiles/tiles.html",scope:{data:"=",img:"=",tileFuncAvailable:"=",numOfTiles:"=?",loading:"=",searchValue:"=",tileDetails:"&",deleteFolder:"&",editFolder:"&",parent:"@"},link:function(e,t,a){e.parent_admin=!1,e.imgSource="assets/images/"+e.img,e.tileClicked=function(t,a){e.tileFuncAvailable&&e.tileDetails()(a),t.stopPropagation()},"admin"==e.parent&&(e.parent_admin=!0);var s=1,i=20;e.paginationLimit=function(t){return e.currentshown=i*s,e.currentshown>=e.numOfTiles&&(e.currentshown=e.numOfTiles),e.currentshown},e.hasMoreItemsToShow=function(){return s<e.numOfTiles/i},e.showMoreItems=function(){s+=1}}}})}(angular.module("vault.directives.tiles",[])),function(e){e.directive("sidebar",function(){return{restrict:"E",templateUrl:"app/Common/Directives/sidebar/sidebar.html",link:function(e){}}})}(angular.module("vault.directives.sidebar",[])),function(){function e(){return{restrict:"E",link:function(e,t,a,s,i){},templateUrl:"app/Common/Directives/searchbar/searchbar.html",controller:"searchbarController as vm",bindToController:!0,replace:!0}}function t(e,t){function a(){return e.$broadcast("search",s.searchValue)}var s=this;s.callSearch=a,t.$watch(function(){return s.searchValue},a)}t.$inject=["$rootScope","$scope"],angular.module("vault.directives.searchbar",[]).directive("searchbar",e).controller("searchbarController",t)}(),function(e){e.directive("scroll",["$window","$timeout",function(e,t){return{restrict:"A",link:function(e,t,a){$(t).on("scroll",function(e){t.addClass("scroll-visible")}),setInterval(function(){t.removeClass("scroll-visible")},250)}}}])}(angular.module("vault.features.Scroll",[])),function(e){e.directive("restrictSpecialChar",function(){return{require:"ngModel",restrict:"A",link:function(e,t,a,s){s.$parsers.push(function(e){if(null==e)return"";var t=e.replace(/[^-\w\s]/gi,"");return t!=e&&(s.$setViewValue(t),s.$render()),t})}}})}(angular.module("vault.directives.restrictSpecialChar",[])),function(e){e.directive("restrictSecretSpecialChar",function(){return{require:"ngModel",restrict:"A",link:function(e,t,a,s){s.$parsers.push(function(e){if(null==e)return"";var t=e.replace(/[^_\w]/gi,"");return t!=e&&(s.$setViewValue(t),s.$render()),t})}}})}(angular.module("vault.directives.restrictSecretSpecialChar",[])),function(e){e.directive("restrictArnSpecialChar",function(){return{require:"ngModel",restrict:"A",link:function(e,t,a,s){s.$parsers.push(function(e){if(null==e)return"";var t=e.replace(/[^-\w\s\/:]/gi,"");return t!=e&&(s.$setViewValue(t),s.$render()),t})}}})}(angular.module("vault.directives.restrictArnSpecialChar",[])),function(e){e.directive("radioButtons",function(){return{restrict:"E",templateUrl:"app/Common/Directives/radioButtons/radioButtons.html",scope:{data:"=",value:"=",state:"="},link:function(e,t,a){e.select=function(e,t){e.stopPropagation()}}}})}(angular.module("vault.directives.radioButtons",[])),function(e){e.directive("navBar",["$rootScope","$state","$timeout",function(e,t,a){return{restrict:"EA",templateUrl:"app/Common/Directives/navBar/navBar.html",scope:{activeTab:"@",navTags:"="},link:function(s,i,o){s.goTo=function(s){var i=s.navigationName;if(s.redirectTo)return s.redirectTo();if("details"!==i&&"permissions"!==i)try{t.go(i)}catch(o){console.log(o)}else a(function(){if("details"===i)e.activeDetailsTab=i,e.showDetails=!0;else{var t=$(".btn-primary");e.showDetails===!0&&t.click()}})}}}}])}(angular.module("vault.directives.navBar",[])),function(e){e.directive("loadingState",function(){return{restrict:"EA",templateUrl:"app/Common/Directives/loadingState/loadingState.html",scope:{position:"="},link:function(e,t,a){e.position&&(e.loadingStyle={position:e.position})}}})}(angular.module("vault.directives.loadingState",[])),function(e){e.directive("listtable",["CopyToClipboard","Modal","$rootScope","SafesManagement","$state","ArrayFilter","Notifications","UtilityService",function(e,t,a,s,i,o,n,r){return{restrict:"E",templateUrl:"app/Common/Directives/listTable/listTable.html",scope:{columns:"=",data:"=",loading:"=",type:"=",admin:"=",searchValue:"=",searchObject:"=?",deleteFolder:"&",editFolder:"&",folder:"&",auth:"="},link:function(i,l,c){i.expandBlock=!1,"accordion"===i.type&&(i.accordion=!0),i.expandRow=function(e){i.expandBlockIndex!==e?i.expandBlock=!0:i.expandBlock=!i.expandBlock,i.expandBlockIndex=e},i.copy=function(t){var a=r.getAParticularSuccessMessage("COPY_TO_CLIPBOARD");n.toast(a),e.copy(t)},i.loadFolderData=function(e){if(a.categories[e.appIndex]){i.isLoadingSecrets=!0;var t=a.categories[e.appIndex].id,o=a.categories[e.appIndex].tableData[e.safeIndex].safe,n=e.name,l=t+"/"+o+"/"+n;e.keys=[];try{s.getSecrets(null,l).then(function(t,a){if(r.ifAPIRequestSuccessful(t))try{t=t.data.data;var s=Object.keys(t),o=[];s.forEach(function(e){var e={key:e,value:t[e]};o.push(e)}),e.keys=o,i.isLoadingSecrets=!1}catch(n){console.log(n),i.isLoadingSecrets=!1}else console.log(a),i.isLoadingSecrets=!1})}catch(c){console.log(c),i.isLoadingSecrets=!1}}},i.addNewSecret=function(e){i.newSecretAdded=!0;var t={key:"",value:"","new":!0};i.data[e].keys.push(t)},i.cancelSafe=function(e){var t=[];if(i.data[e].keys){for(var a=0;a<i.data[e].keys.length;a++)i.data[e].keys[a]["new"]||t.push(i.data[e].keys[a]);i.data[e].keys=t,i.newSecretAdded=!1}},i.saveSafe=function(e){var o=e.keys[e.keys.length-1].key,l=!1;if(e.keys.forEach(function(a,s){o===a.key&&s!==e.keys.length-1&&(l=!0,t.createModal("lg","duplicateSecretError.html"))}),!l&&a.categories[e.appIndex]){i.deletingSecret===!0&&a.deleteSecretIndex>=0&&a.folderToSend.keys.splice(a.deleteSecretIndex,1),i.isLoadingSecrets=!0;var c=a.categories[e.appIndex].id,d=a.categories[e.appIndex].tableData[e.safeIndex].safe,u=e.name,m={path:"",data:{}};m.path=c+"/"+d+"/"+u,e.keys.forEach(function(e){("default"!==e.key||"default"!==e.value)&&(m.data[e.key]=e.value)}),0===Object.keys(m.data).length&&(m.data["default"]="default");try{s.writeSecret(m).then(function(a,s){if(r.ifAPIRequestSuccessful(a))try{i.isLoadingModalData=!1,i.isLoadingSecrets=!1,e.keys.forEach(function(e){e["new"]&&(e["new"]=!1)}),t.close();var o=r.getAParticularSuccessMessage("MESSAGE_ADD_SUCCESS");if(1==i.deletingSecret){i.deletingSecret=!1;var o=r.getAParticularSuccessMessage("MESSAGE_SAFE_DELETE")}n.clearToastr(),n.toast("Secret"+o),i.newSecretAdded=!1}catch(l){console.log(l),i.isLoadingModalData=!1,i.isLoadingSecrets=!1,i.deletingSecret=!1}else console.log(s),i.isLoadingModalData=!1,i.isLoadingSecrets=!1,i.deletingSecret=!1})}catch(p){console.log(p),i.isLoadingModalData=!1,i.isLoadingSecrets=!1,i.deletingSecret=!1}}},i.openDeleteSecretModal=function(e,s){i.fetchDataError=!1,a.deleteSecretIndex=s,a.folderToSend=e;var o="md";t.createModal(o,"deleteSecretPopup.html","safesCtrl",a)},i.openDeleteFolderModal=function(e,s){s.stopPropagation(),a.folderToDelete=e,i.folderToDelete={folder:e},i.admin?t.createModal("md","deleteFolderPopup.html","AdminCtrl",a):t.createModal("md","deleteFolderPopup.html","safesCtrl",a)},a.deleteFolder=function(){if(i.admin)a.deleteSafe(a.folderToDelete);else{t.close(),i.isLoadingModalData=!0,a.isLoadingData=!0;var e=a.folderToDelete;if(a.categories[e.appIndex]){var l=a.categories[e.appIndex].id,c=a.categories[e.appIndex].tableData[e.safeIndex].safe,d=e.name,u="path="+l+"/"+c+"/"+d;try{s.deleteFolder(null,u).then(function(s){if(r.ifAPIRequestSuccessful(s))try{var l=o.findIndexInArray("name",d,i.data);i.data.splice(l,1),i.isLoadingModalData=!1,a.isLoadingData=!1,t.close();var c=r.getAParticularSuccessMessage("MESSAGE_SAFE_DELETE");n.toast(e.name+c)}catch(u){console.log(u),i.isLoadingModalData=!1,a.isLoadingData=!1}else console.log("error",s),i.isLoadingModalData=!1,a.isLoadingData=!1})}catch(m){console.log(m),i.isLoadingModalData=!1,a.isLoadingData=!1}}}},a.deleteSecret=function(){t.close(),i.isLoadingModalData=!0,i.deletingSecret=!0,i.saveSafe(a.folderToSend)},a.close=function(){t.close()}}}}])}(angular.module("vault.directives.listtable",[])),function(e){e.directive("header",["$state","SessionStore","Authentication",function(e,t,a){return{restrict:"E",templateUrl:"app/Common/Directives/header/header.html",link:function(e){e.showingDropdown=!1,e.showDropdown=function(){e.showingDropdown=!e.showingDropdown},e.logout=function(){a.logout()}}}}])}(angular.module("vault.directives.header",[])),function(e){e.directive("footer",function(){return{restrict:"E",templateUrl:"app/Common/Directives/footer/footer.html",link:function(e){}}})}(angular.module("vault.directives.footer",[])),function(){function e(e,t,a){function s(e){return o.search?"folder"===e.type?!!~e.id.split("/").pop().indexOf(o.search):!!~e.id.indexOf(o.search):e}function i(e){"folder"===e.type&&t.go("safes-folders",{path:e.id})}var o=this;o.clickRow=i,o.filter=s,o.search="",a.$on("search",function(e,t){o.search=t})}e.$inject=["$scope","$state","$rootScope"],angular.module("vault.directives.folderContentsTable",[]).controller("folderContentsTableController",e).directive("folderContentsTable",function(){return{restrict:"E",templateUrl:"app/Common/Directives/folderContentsTable/folderContentsTable.html",scope:{folderContent:"=",loading:"=",write:"="},controller:"folderContentsTableController as vm",bindToController:!0}})}(),function(){function e(e,t,a,s,i,o,n,r,l,c){function d(){f(h.item.key,h.item.value),h.editing=!0}function u(e,a,s){e.stopPropagation();var n=i.getAParticularSuccessMessage(s);o.toast(n),t.copy(a)}function m(e){h.editing&&e.stopPropagation()}function p(e){return s.createModalWithController("confirm.modal.html",{title:"Confirmation",message:"Are you sure you want to delete this secret?",submitLabel:"DELETE"}).then(function(){h.loading(!0);var e={id:h.parent.id,children:h.parent.children.slice(0)},t=e.children.findIndex(function(e){return e.id===h.item.id});return e.children.splice(t,1),l.saveFolder(e).then(function(e){h.loading(!1),h.parent.children.splice(t,1),o.toast("Deleted successfully")})["catch"](g)})}function v(e){return e.stopPropagation(),s.createModalWithController("confirm.modal.html",{title:"Confirmation",message:"Are you sure you want to delete this folder?",submitLabel:"DELETE"}).then(function(){return h.loading(!0),l.deleteFolder(h.item.id).then(function(e){h.loading(!1);var t=h.parent.children.findIndex(function(e){return e.id===h.item.id});h.parent.children.splice(t,1),o.toast("Deleted successfully")})["catch"](g)})}function g(e){e&&(h.item.key=h.originalId,h.item.value=h.originalValue,s.createModalWithController("stop.modal.html",{title:"Error",message:"Please try again. If this issue persists please contact an administrator."})),h.loading(!1),console.log(e)}function f(e,t){var a={title:"Edit Secret",inputValue:e||"",inputLabel:"Key",placeholder:"Enter secret key",passwordValue:t||"",passwordLabel:"Secret",passwordPlaceholder:"Enter secret value",submitLabel:"SAVE",cancelLabel:"CANCEL"};return s.createModalWithController("text-input.modal.html",a).then(function(a){return l.itemIsValidToSave({key:a.inputValue,value:a.passwordValue},h.index,h.parent).then(function(){return h.item.key=a.inputValue,h.item.value=a.passwordValue,h.item.id=a.inputValue,h.loading(!0),l.saveFolder(h.parent).then(function(e){h.loading(!1),h.editing=!1,o.toast("Saved successfully")})["catch"](g)})["catch"](function(){return f(e,t)})})["finally"](function(){h.editing=!1})}var h=this;h.anyRegex=/.|\s/g,h.originalId="",h.originalValue="",h.showPassword=!1,h.editing=!1,h.onRowClick=m,h.edit=d,h.deleteSecret=p,h.deleteFolder=v,h.copyToClipboard=u}e.$inject=["$scope","CopyToClipboard","SafesManagement","Modal","UtilityService","Notifications","$rootScope","toastr","safesService","$timeout"],angular.module("vault.directives.folderContentsRow",[]).controller("folderContentsRowController",e).directive("folderContentsRow",function(){return{restrict:"E",templateUrl:"app/Common/Directives/folderContentsRow/folderContentsRow.html",scope:{index:"=",item:"=",parent:"=",loading:"=",write:"="},link:function(e){var t=e.vm;t.originalId=t.item.id,t.originalValue=t.item.value,t.isSecret="secret"===t.item.type,t.isSecret||(t.folderName=t.item.id.split("/").pop())},controller:"folderContentsRowController as vm",bindToController:!0}})}(),function(e){e.directive("elementProperties",["$rootScope","$document",function(e,t){return{restrict:"A",scope:{elementHeight:"="},link:function(e,t,a){var s=t[0].offsetHeight,i=s-153,o=i+"px";e.elementHeight=o}}}])}(angular.module("vault.features.ElementProperties",[])),function(e){e.directive("dropDown",["$http","$state",function(e,t){return{restrict:"EA",templateUrl:"app/Common/Directives/dropDown/dropDown.html",scope:{dropDownOptions:"=",row:"=",error:"=?",dropdownDisable:"=",listDetails:"=",value:"=?"},link:function(e,a,s){e.status={},e.status.isopen=!1,angular.isDefined(e.dropDownOptions.options)&&(e.value&&(e.dropDownOptions.selectedGroupOption={option:"radio",type:e.value.toUpperCase(),value:e.value}),e.dropDownOptions.tableOptions=[],e.dropDownOptions.options.forEach(function(t){var a={option:"radio",type:t.text.toUpperCase(),value:t.text};e.dropDownOptions.tableOptions.push(a)})),e.toggleDropdown=function(t){t.preventDefault(),t.stopPropagation(),e.status.isopen=!e.status.isopen},e.filterUpdate=function(a){if(e.error=!1,"radio"===a.option)e.value=a.value,e.dropDownOptions.selectedGroupOption={option:"radio",type:a.value.toUpperCase(),value:a.value},e.status.isopen=!e.status.isopen;else if(void 0!=a.srefValue&&void 0!=a.srefValue.obj&&void 0!=a.srefValue.url){var s=a.srefValue.obj.toString(),i=e.listDetails,o={};o[s]=i,t.go(a.srefValue.url,o)}else"href"===a.srefValue||(-1!=a.type.indexOf("All")?e.dropDownOptions.selectedGroupOption=a:e.dropDownOptions.selectedGroupOption=a)}}}}])}(angular.module("vault.directives.dropDown",[])),function(e){e.directive("dateTimeFilter",["$rootScope","$window","$filter",function(e,t,a){return{restrict:"E",templateUrl:"app/Common/Directives/dateTimeFilter/dateTimeFilter.html",scope:{parentObj:"="},link:function(t){t.modelData={},t.modelData.displayLabel="LAST 6 MONTHS",t.parentObj.timeFilterRadioModel=t.parentObj.timeFilterRadioModel||"timePeriodVal",t.triggerTimeFiltering=function(){if(t.isSelectionMade){var a=t.createDateFilterLabel();a&&(t.parentObj.isTimeFilterActive=!1,t.modelData.selectedLabelText=a,e.$broadcast("reRenderAllTiles"),t.isSelectionMade=!1,t.selectedLabelValue=!1)}},t.dateSelectBoxChanged=function(){console.log(t.modelData.selectedItem),t.isSelectionMade=!0,t.selectedLabelValue=!0,console.log(t.selectedLabelValue),console.log(t.isSelectionMade)},t.dateFilterRadioChange=function(e){t.isSelectionMade=!1,t.selectedLabelValue=!1,t.parentObj.timeFilterRadioModel=e},t.callModel=function(e){t.parentObj.timeFilterRadioModel=e},t.checkProceedStatus=function(){t.modelData.createdDate&&t.modelData.endDate?t.selectedLabelValue=!0:t.selectedLabelValue=!1},t.fromDateInputChanged=function(e){t.isSelectionMade=!0,t.checkProceedStatus()},t.toDateInputChanged=function(e){t.isSelectionMade=!0,t.checkProceedStatus()},t.createDateFilterLabel=function(){var e;return"timePeriodVal"===t.parentObj.timeFilterRadioModel?e=t.modelData.selectedItem.name:"dateRangeVal"===t.parentObj.timeFilterRadioModel&&(e=t.modelData.createdDate&&t.modelData.endDate?a("date")(new Date($(".from-date-input").val()),"M/d/yy")+" - "+a("date")(new Date($(".to-date-input").val()),"M/d/yy"):null),e},t.itemArray=[{id:1,name:"Last 6 Months"},{id:2,name:"Last 9 Months"},{id:3,name:"Last 12 Months"}],t.modelData.selectedItem=t.itemArray[0],t.modelData.selectedLabelText=t.modelData.selectedItem.name}}}]),e.directive("dategetter",["$window",function(e){function t(t,a,s,i){a.datepicker({autoclose:!0,clearBtn:!0}),i.$parsers.push(function(t){return e.moment(t).format("X")})}return{restrict:"A",require:"ngModel",link:t}}])}(angular.module("vault.directives.dateTimeFilter",[])),function(e){e.directive("resize",["$window","DeviceDetector","$log","$rootScope",function(e,t,a,s){return function(t,i){var o,n=640,r=1024,l="",c=angular.element(e),d=function(e){return o=e.w,o>r?l="large":o>=n&&r>=o?l="medium":n>o?l="small":a.log("Unrecognised device type"),s.modalParent.isMobilePhoneDevice="small"===l,s.modalParent.isMediumScrennDevice="medium"===l,s.modalParent.isLargeDevice="large"===l,s.modalParent.notLargeDevice="small"===l||"medium"===l,l};t.getWindowDimensions=function(){return{h:e.innerHeight,w:e.innerWidth}},t.setElementWidth=function(){return{width:i[0].offsetWidth+"px"}},t.setElementHeight=function(){return{height:i[0].offsetHeight+"px"}},t.$watch(t.getWindowDimensions,function(e){t.windowHeight=e.h,t.windowWidth=e.w,t.targetElementsWidth=i[0].offsetWidth+"px",t.targetElementsHeight=i[0].offsetHeight+"px",t.style=function(){return{height:e.h+"px",width:e.w+"px"}},d(e),s.$broadcast("deviceResized")},!0),c.bind("resize",function(){t.$apply()})}}])}(angular.module("vault.directives.resize",[])),function(e){e.constant("SuccessMessage",{MESSAGE_ADD_SUCCESS:" added successfully!",MESSAGE_SAFE_DELETE:" deleted successfully!",MESSAGE_CREATE_SUCCESS:" created successfully!",MESSAGE_UPDATE_SUCCESS:" updated successfully!",COPY_TO_CLIPBOARD:"Secret copied to clipboard",COPY_KEY_TO_CLIPBOARD:"Key copied to clipboard"})}(angular.module("vault.constants.SuccessMessage",[])),readTextFile("../apiUrls.json"),function(e){e.constant("RestEndpoints",{baseURL:JSON.parse(sessionStorage.getItem("ApiUrls")).baseURL,usersGetData:"/v2/ldap/users?UserPrincipalName=",groupGetData:"/v2/ldap/groups?groupName=",usersGetDataUsingCorpID:"/v2/ldap/corpusers?CorpId=",endpoints:[{name:"postAction",url:"/postAction",method:"POST"},{name:"getAction",url:"/getAction",method:"GET"},{name:"renewToken",url:"/v2/auth/tvault/renew",method:"GET"},{name:"lookupToken",url:"/auth/tvault/lookup",method:"POST"},{name:"revokeToken",url:"/auth/tvault/revoke",method:"POST"},{name:"writeSecretV2",url:"/v2/write",method:"POST"},{name:"createFolderV2",url:"/v2/sdb/createfolder",method:"POST"},{name:"readAllContents",url:"/readAll",method:"GET"},{name:"readAllContentsRecursive",url:"/readfull",method:"GET"},{name:"login",url:"/v2/auth/tvault/login",method:"POST"},{name:"safesList",url:"/v3/sdb/list?",method:"GET"},{name:"deleteSafe",url:"/v3/sdb/delete?",method:"DELETE"},{name:"getSafeInfo",url:"/v3/sdb?",method:"GET"},{name:"createSafe",url:"/v3/sdb",method:"POST"},{name:"editSafe",url:"/v3/sdb",method:"PUT"},{name:"deleteUserPermission",url:"/v3/sdb/user",method:"DELETE"},{name:"deleteGroupPermission",url:"/v3/sdb/group",method:"DELETE"},{name:"deleteAWSPermission",url:"/v3/sdb/role",method:"DELETE"},{name:"detachAWSPermission",url:"/v3/sdb/role",method:"PUT"},{name:"addUserPermission",url:"/v3/sdb/user",method:"POST"},{name:"addGroupPermission",url:"/v3/sdb/group",method:"POST"},{name:"addAWSPermission",url:"/v3/sdb/role",method:"POST"},{name:"getAwsConfigurationDetails",url:"/auth/aws/roles/",method:"GET"},{name:"saveNewFolder",url:"/sdb/createfolder?path=",method:"POST"},{name:"postSecrets",url:"/write",method:"POST"},{name:"getSecrets",url:"/read?path=",method:"GET"},{name:"createAwsRole",url:"/v3/auth/aws/role?",method:"POST"},{name:"updateAwsRole",url:"/auth/aws/roles/update",method:"POST"},{name:"createAwsIAMRole",url:"/v3/auth/aws/iam/role?",method:"POST"},{name:"updateAwsIAMRole",url:"/v2/auth/aws/iam/role",method:"PUT"},{name:"unseal",url:"/v2/unseal",method:"POST"},{name:"unsealProgress",url:"/v2/unseal-progress?serverip=",method:"GET"}]})}(angular.module("vault.constants.RestEndpoints",[])),function(e){e.constant("MockData",{"/vault/auth/tvault/login":{admin:"no",access:{users:[{"safe-name":"read"},{safe2:"read"}]}},"/vault/sdb/list?":{},"/vault/sdb/list?path=users":{hello:"world"}})}(angular.module("vault.constants.MockData",[])),function(e){e.constant("ListOfApi",{api_details:[{title:"Login LDAP",url:"auth/ldap/login",methodType:"POST",description:" ",sampleRequest:'{"username":"<corp user id>","password":"<password>"}',sampleResponse:'{success: 200} {"client_token":"2e8a4d39-8bba-6067-9f33-98a632165a6f",”admin”:”yes”,"access":{"shared":[{"cso":"read"}],"users":[{"achandr13":"write"}],"apps":[{"app1":"read"},{"app3":"write"}]},"policies":["default","r_apps_app1","r_shared_cso","w_apps_app3","w_users_achandr13"]}',note:"Use the client_token returned should be used as “vault-token” in request header for all other API calls. If user is an administrator, “admin”:”yes” will be populated"},{title:"AWS Role Configure",url:"/auth/aws/roles/update",methodType:"POST",description:" ",sampleRequest:'{"role":"testawsrole","policies":"","bound_ami_id":"","bound_account_id":"ddd","bound_region":"","bound_vpc_id":"","bound_subnet_id":"","bound_iam_instance_profile_arn":"","bound_iam_role_arn":""}',sampleResponse:'{success: 200} {"Messages":["AWS Role created "]}}',note:"At least one bound conditions is mandatory"},{title:"Fetch AWS Role Info",url:"auth/aws/roles/<rolename>",methodType:"GET",description:" ",sampleRequest:"",sampleResponse:'{success: 200} {"bound_ami_id":"testami","bound_region":"","bound_subnet_id":"","policies":["default"],"bound_account_id":"","bound_iam_instance_profile_arn":"","bound_iam_role_arn":"","bound_vpc_id":""}'},{title:"Create Safe",url:"/sdb/create",methodType:"POST",description:" ",sampleRequest:'{"path":"apps/app5","data":{"owner":"cso","createdby":"anil"}}',sampleResponse:'{success: 200} {"Message":"SDB and associated read/write/deny policies created "}',note:"You can add any key value pairs in side data."},{title:"Get Safe Information",url:"/sdb?path=<path to safe>",methodType:"GET",description:" ",sampleRequest:"/sdb?path=apps/app3",sampleResponse:'{success: 200} {"data":{"createdby":"anil","owner":"cso","aws-roles":{“role1”:”read”,”role2”:”write”}, "groups":{"r_win_opr_dev_rdp":"write"},"users":{"achandr1":"deny","achandr13":"deny"}}}'},{title:"List safes",url:"/sdb/list?path=<path name> // path would be apps/shared/users",methodType:"GET",description:" ",sampleRequest:"/sdb/list?path=apps",sampleResponse:'{success: 200, Incorrect path : 403}, {"keys":["app1","app2”,"app3","app5"]}',note:"The same api could be used to list the folders under a safe. The path needs to be provided accordingly."},{title:"Creating Folder under a safe",url:"/sdb/createfolder?path=<path with folder name>",methodType:"POST",description:" ",sampleRequest:"/sdb/createfolder?path=apps/app1",sampleResponse:'{success: 200} {"messages":["Folder created “]}',note:"When a new folder is created an entry “default”:”default” will be added. UI needs to ignore “default”:”default”  returned while showing the secrets under a folder."},{title:"Deleting a Safe/Folder",url:"/sdb/delete?path=<full path>",methodType:"DELETE",description:" ",sampleRequest:"/sdb/delete?path=apps/app1/secrets",sampleResponse:'{ success: 200 } {"messages":["SDB deleted"]}'},{title:"Associating user to safe",url:"/sdb/adduser",methodType:"POST",description:" ",sampleRequest:'{"path":"apps/app1","username":"achandr13","access":"read"}',sampleResponse:'{success: 200} {"Message":"User is successfully associated "}'},{title:"Associating Group to safe",url:"/sdb/addgroup",methodType:"POST",description:" ",sampleRequest:'{"path":"apps/app1","groupname":"vault-admin","access":"write"}',sampleResponse:'{success: 200} {"Message":"Group is successfully associated with SDB"}'},{title:"Associating Aws Role to safe",url:"/sdb/addrole",methodType:"POST",description:" ",sampleRequest:'{"path":"apps/app1"," role":"aws-sample-role","access":"write"}',sampleResponse:'{success: 200} {"Message":"Role is successfully associated "}'},{title:"Removing user association to safe",url:"/sdb/deleteuser",methodType:"POST",description:" ",sampleRequest:'{"path":"apps/app1","username":"achandr13"}',sampleResponse:'{success: 200} {"Message":"User association is removed "}'},{title:"Removing Group association to safe",url:"/sdb/deletegroup",methodType:"POST",description:" ",sampleRequest:'{"path":"apps/app1","groupname":"vault-admin"}',sampleResponse:'{success: 200} {"Message":"Group association is removed "}'},{title:"Removing AWS-Role association to safe",url:"/sdb/deleterole",methodType:"POST",description:" ",sampleRequest:'{"path":"apps/app1","role":"1_a04f33f6-74ad-b7ad"}',sampleResponse:'{success: 200} {"Message":"Role association is removed "}'},{title:"Read Secret",url:"read?path=<Path>",methodType:"GET",description:" ",sampleRequest:"/read?path=apps/app1/secrets",sampleResponse:'{success: 200} {"data":{"key1":"value1","key2":"value2"}}'},{title:"Write Secret",url:"/write",methodType:"POST",description:" ",sampleRequest:'{"path":"apps/app1/secrets","data": {"key1":"value1","key2":"value2"}}',sampleResponse:'{success: 200} {"Message":"Secret saved to vault"}'}]})}(angular.module("vault.constants.ListOfApi",[])),function(e){e.constant("ErrorMessage",{ERROR_GENERAL:"Please try again, if the issue persists contact Vault Administrator",ERROR_WRONG_USERNAME_PASSWORD:"Username or password is wrong, please try again",ERROR_NETWORK:"Please check your network connection, if the issue persists contact Vault Administrator",ERROR_CONTENT_NOT_FOUND:"Requested content not found!",ERROR_CONTENT_EXISTS:"Content already exits",ERROR_PROCESSING_DATA:"Error processing response data. Please try again, if the issue persists contact Vault Administrator",ERROR_PROCESSING_RELOAD_PAGE:"Error processing. Please Reload the Page",ERROR_AUTOCOMPLETE_USERNAME:"Unable to retrieve the results. Please try again with full Username",ERROR_AUTOCOMPLETE_GROUPNAME:"Unable to retrieve the results. Please try again with full Group name"})}(angular.module("vault.constants.ErrorMessage",[])),function(e){e.constant("AppConstant",{FORGOT_PASSWORD_LINK:"",AD_USERS_AUTOCOMPLETE:!1,AD_GROUP_AUTOCOMPLETE:!1,AUTH_TYPE:"userpass",DOMAIN_NAME:"@T-Mobile.com"})}(angular.module("vault.constants.AppConstant",[])),function(){angular.module("vault.layout",["vault.core"])}(),function(){function e(e){var t=this;t.baseLoading=!1,t.safesNavTags=[{displayName:"SAFES",navigationName:"safes",addComma:!1,show:!0},{displayName:"ADMIN",navigationName:"admin",addComma:!1,show:"true"===e.getItem("isAdmin")},{displayName:"MANAGE",navigationName:"manage",addComma:!1,show:"true"===e.getItem("isManager")&&"true"!==e.getItem("isAdmin")},{displayName:"HEALTH",navigationName:"health",addComma:!1,show:!1},{displayName:"ALERTS",navigationName:"alerts",addComma:!1,show:!1},{displayName:"DOCUMENTATION",navigationName:"documentation",addComma:!1,show:!0}]}e.$inject=["SessionStore"],angular.module("vault.layout").controller("baseController",e)}(),/*
* =========================================================================
* Copyright 2018 T-Mobile, US
* 
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* See the readme.txt file for additional language around disclaimer of warranties.
* =========================================================================
*/
function(){function e(e){e.state("unseal",{url:"/unseal",templateUrl:"app/Features/unseal/unseal.html",controller:"UnsealCtrl"})}e.$inject=["$stateProvider"],angular.module("vault").config(e)}(),function(e){e.controller("UnsealCtrl",["$scope","fetchData","Unseal","ModifyUrl","Modal","$rootScope","$http","$log","$state","SessionStore","UtilityService",function(e,t,a,s,i,o,n,r,l,c,d){o.isLoadingData=!1,e.isLoadingModalData=!1,e.fetchDataError=!1,e.payload={},e.keySubmitted=!1,e.showProgress=!1;var u=function(t){i.createModal(t,"error.html","UnsealCtrl",e)};e.close=function(){i.close()},e.checkUnsealProgress=function(){try{o.isLoadingData=!0,e.keySubmitted=!1,e.payload.key="",a.unsealProgress(null,e.payload.serverip).then(function(t){if(d.ifAPIRequestSuccessful(t)){console.log("response",t),o.isLoadingData=!1;var s=t.data;e.showProgress=!0,s.sealed===!1?e.progress=3:(e.progress=s.progress,console.log("initial -->",e.progress),c.setItem("currentProgress",JSON.stringify(e.progress)))}else o.isLoadingData=!1,e.errorMessage=a.getTheRightErrorMessage(t),"Requested content not found!"!==e.errorMessage&&u("md")},function(t){o.isLoadingData=!1,e.errorMessage=a.getTheRightErrorMessage(t),"Requested content not found!"!==e.errorMessage&&u("md")})}catch(t){console.log(t),e.errorMessage=d.getAParticularErrorMessage("ERROR_GENERAL"),u("md"),o.isLoadingData=!1}},e.submitKey=function(){try{o.isLoadingData=!0,a.unseal(e.payload).then(function(t){if(d.ifAPIRequestSuccessful(t)){o.isLoadingData=!1;var s=t.data;e.showProgress=!0;var i=JSON.parse(c.getItem("currentProgress"));s.sealed===!1?(e.progress=3,e.keySubmitted=!0):s.progress==i?(e.errorMessage="Key has already been entered, please try a different key.",u("md")):(e.progress=s.progress,e.keySubmitted=!0)}else o.isLoadingData=!1,e.checkUnsealProgress(),e.errorMessage=a.getTheRightErrorMessage(t),"Requested content not found!"!==e.errorMessage&&u("md")},function(t){o.isLoadingData=!1,e.checkUnsealProgress(),e.errorMessage=t.data.errors[0],"Requested content not found!"!==e.errorMessage&&u("md")})}catch(t){console.log(t),e.errorMessage=d.getAParticularErrorMessage("ERROR_GENERAL"),u("md"),o.isLoadingData=!1}}}])}(angular.module("vault.features.UnsealCtrl",["vault.services.SafesManagement","vault.services.Notifications"])),/*
* =========================================================================
* Copyright 2018 T-Mobile, US
* 
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* See the readme.txt file for additional language around disclaimer of warranties.
* =========================================================================
*/
function(){function e(e){e.state("signup",{url:"/signup",templateUrl:"app/Features/sign-up/sign-up.html",controller:"SignUpCtrl"})}e.$inject=["$stateProvider"],angular.module("vault").config(e)}(),function(e){e.controller("SignUpCtrl",["$scope","Modal","$state","Authentication","SessionStore","UtilityService","Idle","AppConstant",function(e,t,a,s,i,o,n,r){var l=function(){e.forgotPasswordLink=o.getAppConstant("FORGOT_PASSWORD_LINK"),e.authType=r.AUTH_TYPE,e.domainName=r.DOMAIN_NAME,e.userID="Username",n.unwatch(),"ldap"===e.authType.toLowerCase()?e.userID="Corp ID":"ldap1900"===e.authType.toLowerCase()&&(e.userID="Email ID"),e.usernameInvalid=!1},c=function(e){if(void 0!=e){var t=e.client_token,s="no"!=e.admin.toLowerCase(),o=!0,n=e.access,r=e.policies;i.setItem("myVaultKey",t),i.setItem("isAdmin",s),i.setItem("isManager",o),i.setItem("accessSafes",JSON.stringify(n)),i.setItem("policies",r),a.go("safes")}};e.close=function(){t.close()},e.$watch("username",function(t){if(e.usernameInvalid=!1,t&&"ldap1900"===e.authType){var a=t.toLowerCase();a.includes("@")&&(e.usernameInvalid=!0)}}),e.login=function(){if(!e.usernameInvalid){e.isLoadingData=!0;var a=e.username.toLowerCase();a=s.formatUsernameWithoutDomain(a);var i={username:a,password:e.password};s.authenticateUser(i).then(function(a){if(e.isLoadingData=!1,!o.ifAPIRequestSuccessful(a)){if(a.data&&a.data.errors){var s=a.data.errors;return t.createModalWithController("error.html",{shortMessage:s[0]||"There was an error. Please try again, if the problem persists contact an administrator",longMessage:s[1]})}return t.createModalWithController("error.html",{shortMessage:"Something went wrong, please try again later."})}c(a.data)})}},l()}])}(angular.module("vault.features.SignUpCtrl",["vault.services.UtilityService","vault.constants.AppConstant"])),function(){function e(e,t,a,s,i,o,n){function r(e){var s=a.baseURL+"/v2/safes/folders/secrets?path="+e+"&fetchOption=all";return t({method:"GET",url:s,headers:f()}).then(function(e){var t=[];return e.data.children.map(function(e){if("secret"===e.type){var a=JSON.parse(e.value);Object.keys(a.data).forEach(function(s){("default"!==s||"default"!==a.data["default"])&&t.push({type:"secret",id:s,key:s,value:a.data[s],parentId:e.parentId})})}else"folder"===e.type&&t.push(e)}),e.data.children=t,e.data})["catch"](h)}function l(e){var s=a.baseURL+"/v2/sdb/createfolder?path="+e;return t({method:"POST",url:s,headers:f()}).then(function(e){return e.data})["catch"](h)}function c(e){var s=a.baseURL+"/v2/sdb/delete?path="+e;return t({method:"DELETE",url:s}).then(function(e){return e.data})["catch"](h)}function d(e,s){var i=a.baseURL+"/v2/write?path="+e.id,o=e.children.slice(0);s&&o.push(s);var n=g(o);return t({method:"POST",url:i,data:{path:e.id,data:n},headers:f()})["catch"](h)}function u(e,t,a){if(!e.key||!e.value)return o.createModalWithController("stop.modal.html",{title:"Unable to complete action",message:"Form is missing one or more data fields."});var s=a.children.find(function(a,s){if(s===t)return!1;var i;return"folder"===a.type&&(i=a.id.split("/").pop()),i===e.key?!0:!1});if(s)return o.createModalWithController("stop.modal.html",{title:"Folder already exists.",message:"This safe already contains an item with the specified name. You can't store two folders with the same name. Please try a different name for the folder."});var n=a.children.find(function(a,s){if(s===t)return!1;var i;return"folder"!==a.type&&(i=a.key),i===e.key?!0:!1});return n?o.createModalWithController("stop.modal.html",{title:"Key already exists.",message:"This folder already contains an item with the specified name. You can't store two secrets with the same key. Please try a different name for the key."}):i.when(!0)}function m(){return e.SAFE_TYPES.map(function(e){return{name:e.tabLabel,id:e.key}})}function p(){return[{displayName:"SAFES",navigationName:"safes",addComma:!1,show:!0},{displayName:"ADMIN",navigationName:"admin",addComma:!1,show:JSON.parse(s.getItem("isAdmin"))},{displayName:"MANAGE",navigationName:"manage",addComma:!1,show:JSON.parse(s.getItem("isManager"))&&!JSON.parse(s.getItem("isAdmin"))},{displayName:"DOCUMENTATION",navigationName:"documentation",addComma:!1,show:!0,redirectTo:function(){var e=a.baseURL+"/swagger-ui.html",t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("target","_blank"),t.click()}}]}function v(e){return e.map(function(e){var t=Object.entries(e);return{safe:t[0][0],name:t[0][0],auth:t[0][1]}})}function g(e){var t={};return e.forEach(function(e){if("secret"===e.type){var a=e.key,s=e.value;t[a]=s}}),t}function f(){return{"Content-Type":"application/json","vault-token":s.getItem("myVaultKey")}}function h(e){return console.log(e),i.reject(e)}var b={getSafeTabs:m,getSafesNavTags:p,parseSafes:v,createFolder:l,saveFolder:d,deleteFolder:c,getFolderContent:r,itemIsValidToSave:u};return b}e.$inject=["SAFES_CONSTANTS","$http","RestEndpoints","SessionStore","$q","Modal","Authentication"],angular.module("vault.features.safes").factory("safesService",e)}(),function(){function e(e){e.state("safes-tabs",{url:"/safes-tabs",parent:"base",resolve:{auth:function(){}},views:{"content@base":{templateUrl:"app/Features/safes/safes-tabs/safes-tabs.html",controller:"safesTabsController"}}}).state("safes",{url:"/safes",parent:"safes-tabs",params:{type:"users"},resolve:{safes:["SessionStore","$q","$state",function(e,t,a){return JSON.parse(e.getItem("accessSafes"))}]},views:{"content@safes-tabs":{templateUrl:"app/Features/safes/safes-tiles/safes-tiles.html",controller:"safesTilesController as vm"}}}).state("safes-folders",{url:"/safes/folders/:path",parent:"safes-tabs",resolve:{folderContent:["safesService","SafesManagement","$state","$stateParams","$q","$timeout",function(e,t,a,s,i,o){return e.getFolderContent(s.path)["catch"](function(e){return e})}],writeAccess:["folderContent","SessionStore",function(e,t){if(e.id){var a=e.id.split("/")[0],s=e.id.split("/")[1],i=JSON.parse(t.getItem("accessSafes"))[a],o=i.find(function(e){return e[s]})[s];return"write"===o}}]},params:{path:""},views:{"content@safes-tabs":{templateUrl:"app/Features/safes/safes-folders/safes-folders.html",controller:"safesFoldersController as vm"}}})}e.$inject=["$stateProvider"],angular.module("vault.features.safes").config(e)}(),function(){function e(e){e.constant("SAFES_CONSTANTS",{SAFE_TYPES:[{label:"User",tabLabel:"My Safes",key:"users"},{label:"Shared",tabLabel:"Shared Safes",key:"shared"},{label:"Application",tabLabel:"Application Safes",key:"apps"}]})}e.$inject=["$provide"],angular.module("vault.features.safes").config(e)}(),/*
* =========================================================================
* Copyright 2018 T-Mobile, US
* 
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* See the readme.txt file for additional language around disclaimer of warranties.
* =========================================================================
*/
function(){function e(e){e.state("change-safe",{url:"/change-safe/",params:{safeObject:null},templateUrl:"app/Features/change-safe/change-safe.html",controller:"ChangeSafeCtrl"})}e.$inject=["$stateProvider"],angular.module("vault").config(e)}(),function(e){e.controller("ChangeSafeCtrl",["$scope","$rootScope","Modal","$timeout","fetchData","$http","UtilityService","Notifications","$window","$state","$stateParams","$q","SessionStore","vaultUtilityService","ModifyUrl","AdminSafesManagement","AppConstant",function(e,t,a,s,i,o,n,r,l,c,d,u,m,p,v,g,f){e.selectedGroupOption="",t.showDetails=!0,e.similarSafes=0,t.activeDetailsTab="details",e.typeDropdownDisable=!1,e.safeCreated=!1,e.isEditSafe=!1,e.awsRadioBtn={},e.usrRadioBtnVal="read",e.grpRadioBtnVal="read",e.awsRadioBtn.value="read",e.isEmpty=n.isObjectEmpty,e.awsConfPopupObj={auth_type:"",role:"",bound_account_id:"",bound_region:"",bound_vpc_id:"",bound_subnet_id:"",bound_ami_id:"",bound_iam_instance_profile_arn:"",bound_iam_role_arn:"",policies:"",bound_iam_principal_arn:"",resolve_aws_unique_ids:"false"},e.tableOptions=[{type:"User Safe"},{type:"Shared Safe"},{type:"Application Safe"}],e.radio={value:"read",options:[{text:"read"},{text:"write"},{text:"deny"}]},e.detailsNavTags=[{displayName:"DETAILS",navigationName:"details",addComma:!0,show:!0},{displayName:"PERMISSIONS",navigationName:"permissions",addComma:!1,show:!0}],e.goBack=function(){e.goBackToAdmin!==!0?t.showDetails===!0?c.go("admin"):(t.showDetails=!0,t.activeDetailsTab="details",e.checkOwnerEmailHasValue("details")):t.lastVisited?c.go(t.lastVisited):c.go("admin")},e.error=function(t){a.createModal(t,"error.html","ChangeSafeCtrl",e)},e.domainName="",f.DOMAIN_NAME&&(e.domainName=f.DOMAIN_NAME.toLowerCase()),e.searchValue={userName:"",groupName:""},e.userNameDropdownVal=[],e.groupNameDropdownVal=[],e.totalDropdownVal=[],t.loadingDropDownData=!1,e.showInputLoader={show:!1},e.inputSelected={select:!1};var h,b=function(){var e=0;return function(t,a){clearTimeout(e),e=setTimeout(t,a)}}(),w=function(e){return function(e,t){e=$.trim(e),e!==h&&e.length>2&&t(e),h=e}}();e.clearInputValue=function(t){document.getElementById(t).value="",e.inputSelected.select=!1,e.searchValue={userName:"",groupName:""},h="",e.showNoMatchingResults=!1},e.clearOwnerEmailInputValue=function(){e.safe.owner="",e.inputSelected.select=!1,h="",e.showNoMatchingResults=!1,e.invalidEmail=!1},e.checkOwnerEmailHasValue=function(t){"details"===t&&e.safe.owner&&e.safe.owner.length>0&&(e.inputSelected.select=!0)},e.onKeyUp=function(t,a,s){if(0!==t.length){if(e.invalidEmail=!1,e.showNoMatchingResults=!1,e.showInputLoader.show=!1,e.inputSelected.select=!1,e.autoCompleteforOwner=!1,s&&(e.autoCompleteforOwner=!0),t.userName&&"userName"===a?(t.groupName="",e.userNameDropdownVal=[]):t.groupName&&"groupName"===a&&(t.userName="",e.groupNameDropdownVal=[]),"userName"===a){if(!n.getAppConstant("AD_USERS_AUTOCOMPLETE"))return}else if("groupName"===a&&!n.getAppConstant("AD_GROUP_AUTOCOMPLETE"))return;var i=t[a];i=i.replace(" ",""),S(a,["loading"]),b(function(){w(i,function(t){e.showInputLoader.show=!0,e.getDropdownDataForPermissions(a,t,s)})},500)}},e.getDropdownDataForPermissions=function(t,a,s){a.length>2&&p.getDropdownDataForPermissions(t,a,s).then(function(i,o){var n;i?(n=i,e.loadingDataFrDropdown=n.loadingDataFrDropdown,e.erroredFrDropdown=n.erroredFrDropdown,e.successFrDropdown=n.successFrDropdown,0===n.response.data.data.values.length&&(e.showNoMatchingResults=!0),y(t,a,n.response.data.data.values,s),e.$apply()):(n=o,e.commonErrorHandler(n.error,n.error||n.response.data,"getDropdownData"))},function(a){e.showInputLoader.show=!1,500===a.status?(e.errorMessage=n.getAParticularErrorMessage("ERROR_NETWORK"),e.error("md")):200===a.status||"error"!==a.xhrStatus&&"complete"!==a.xhrStatus||("userName"===t&&e.searchValue.userName.length>0?e.errorMessage=n.getAParticularErrorMessage("ERROR_AUTOCOMPLETE_USERNAME"):"groupName"===t&&e.searchValue.groupName.length>0&&(e.errorMessage=n.getAParticularErrorMessage("ERROR_AUTOCOMPLETE_GROUPNAME")),e.error("md"))})},e.commonErrorHandler=function(t,a,s){null===s&&(e.loadingDataFrRoles=!1,e.erroredInRoles=!0,e.successInRoles=!1,e.errorMsgFrRoles="Please try again, if the issue persists contact Vault Administrator",console.log("Data from service is not in expected Format ",t),(void 0!=a||null!=a)&&a.message&&(e.errorMsg=a.message,console.log(a.message)))};var y=function(a,s,i,o){var n=p.massageDataFrPermissionsDropdown(a,s,i,o);e.showInputLoader.show=!1,"userName"===a?(e.userNameDropdownVal=n.sort(),S(a,e.userNameDropdownVal,o)):"groupName"===a&&(e.groupNameDropdownVal=n.sort(),S(a,e.groupNameDropdownVal,o)),t.loadingDropDownData=!1},S=function(t,a,s){var i;"userName"===t?(i="#addUser",e.autoCompleteforOwner&&(i="#addOwnerEmail")):"groupName"===t&&(i="#addGroup"),$(i).focusout(),$(i).trigger("focus"),$(i).autocomplete({source:a,minLength:3,select:function(a,s){var o=s.item.value.toLowerCase();o.includes(".com")&&(a.preventDefault(),e.autoCompleteforOwner?this.value=s.item.value:"userName"===t?this.value=s.item.value.split(" - ")[1]:"groupName"===t&&(this.value=s.item.value.split(" - ")[0])),e.inputSelected.select=!0,e.showNoMatchingResults=!1,e.invalidEmail=!1,$(i).blur(),e.$apply()},focus:function(e,t){e.preventDefault()}}).focus(function(){$(this).keydown()}).select(function(){e.inputSelected.select=!0,e.showNoMatchingResults=!1})};e.safeEditSafe=function(){e.goBackToAdmin=!0;e.goBack()},e.getPath=function(){var t="";switch(e.dropDownOptions.selectedGroupOption.type){case"Application Safe":t="apps";break;case"User Safe":t="users";break;case"Shared Safe":t="shared"}var a=t+"/"+n.formatName(e.safe.name);return a},e.editPermission=function(t,a,s,i){if(a){var o=!0;e.deletePermission(t,a,o,s,i)}},e.replaceSpaces=function(){e.safe.name=n.formatName(e.safe.name)},e.deletePermission=function(t,a,s,i,o){if(a)try{i=i.replace(e.domainName,""),e.isLoadingData=!0;var l=e.getPath(),c="",d={};switch(t){case"users":c=g.deleteUserPermissionFromSafe,d=s?{path:l,username:i,access:o}:{path:l,username:i};break;case"groups":c=g.deleteGroupPermissionFromSafe,d={path:l,groupname:i};break;case"AWSPermission":c=s?g.detachAWSPermissionFromSafe:g.deleteAWSPermissionFromSafe,d={path:l,role:i}}c(d).then(function(a){if(n.ifAPIRequestSuccessful(a))try{if(e.isLoadingData=!1,s)e.addPermission(t,i,o,!0);else{e.requestDataFrChangeSafe();var l=n.getAParticularSuccessMessage("MESSAGE_SAFE_DELETE");r.toast(i+"'s permission"+l)}}catch(c){console.log(c),e.errorMessage=n.getAParticularErrorMessage("ERROR_PROCESSING_DATA"),e.error("md")}else e.errorMessage=g.getTheRightErrorMessage(a),error("md")},function(t){console.log(t),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")})}catch(u){console.log(u),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")}},e.editAWSConfigurationDetails=function(a,s){if(a)try{e.isLoadingData=!0;var i=(e.getPath(),s),o=v.addUrlParameteres("getAwsConfigurationDetails",i);g.getAWSConfigurationDetails(null,o).then(function(a){if(n.ifAPIRequestSuccessful(a))try{e.editingAwsPermission={status:!0},e.awsConfPopupObj={auth_type:a.data.auth_type,role:s,bound_account_id:a.data.bound_account_id,bound_region:a.data.bound_region,bound_vpc_id:a.data.bound_vpc_id,bound_subnet_id:a.data.bound_subnet_id,bound_ami_id:a.data.bound_ami_id,bound_iam_instance_profile_arn:a.data.bound_iam_instance_profile_arn,bound_iam_role_arn:a.data.bound_iam_role_arn,policies:a.data.policies,bound_iam_principal_arn:a.data.bound_iam_principal_arn,resolve_aws_unique_ids:"false"},e.policies=a.data.policies,e.awsRadioBtn.value=t.AwsPermissionsData.data[s],e.open("md")}catch(i){console.log(i),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_PROCESSING_DATA"),e.error("md")}else e.errorMessage=g.getTheRightErrorMessage(a),error("md")},function(t){console.log(t),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")})}catch(r){console.log(r),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")}},e.createSafe=function(){if(e.safeCreated===!0)angular.equals(e.safePrevious,e.safe)?(t.showDetails=!1,t.activeDetailsTab="permissions",e.isLoadingData=!1):e.editSafe();else if("Select Type"===e.dropDownOptions.selectedGroupOption.type)t.noTypeSelected=!0;else try{e.isLoadingData=!0;var a=e.getPath();e.safe.name=n.formatName(e.safe.name);var s={path:a,data:e.safe};g.createSafe(s).then(function(a){if(n.ifAPIRequestSuccessful(a))try{e.isLoadingData=!1,t.showDetails=!1,t.activeDetailsTab="permissions",e.safeCreated=!0,e.typeDropdownDisable=!0;var s=n.getAParticularSuccessMessage("MESSAGE_CREATE_SUCCESS"),i=JSON.parse(m.getItem("allSafes"));i.push(e.safe.name),m.setItem("allSafes",JSON.stringify(i)),r.toast(e.safe.name+" safe"+s),e.safePrevious=angular.copy(e.safe)}catch(o){console.log(o),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_PROCESSING_DATA"),e.error("md")}else e.errorMessage=g.getTheRightErrorMessage(a),error("md")},function(t){console.log(t),e.isLoadingData=!1,e.errorMessage=g.getTheRightErrorMessage(t),e.error("md")})}catch(i){console.log(i),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")}},e.editSafe=function(){try{e.isLoadingData=!0;var a=e.getPath(),s={path:a,data:e.safe};g.editSafe(s).then(function(a){if(n.ifAPIRequestSuccessful(a))try{e.isLoadingData=!1,t.showDetails=!1,t.activeDetailsTab="permissions";var s=n.getAParticularSuccessMessage("MESSAGE_UPDATE_SUCCESS");r.toast(e.safe.name+" safe"+s),e.safePrevious=angular.copy(e.safe)}catch(i){console.log(i),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_PROCESSING_DATA"),e.error("md")}else e.errorMessage=g.getTheRightErrorMessage(a),error("md")},function(t){console.log(t),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")})}catch(i){console.log(i),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")}},t.goToPermissions=function(){e.invalidEmail=!1,e.showNoMatchingResults=!1;var a=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,i=document.getElementById("addOwnerEmail").value;a.test(i)?s(function(){e.isEditSafe?(t.showDetails=!1,t.activeDetailsTab="permissions",angular.equals(e.safePrevious,e.safe)||e.editSafe()):(t.noTypeSelected=!1,e.createSafe())}):e.invalidEmail=!0},e.requestDataFrChangeSafe=function(){if(e.isLoadingData=!0,d.safeObject){e.changeSafeHeader="EDIT SAFE",e.isEditSafe=!0,e.typeDropdownDisable=!0;try{var a="path="+d.safeObject.safeType+"/"+d.safeObject.safe,s=v.addUrlParameteres("getSafeInfo",a);g.getSafeInfo(null,s).then(function(a){if(n.ifAPIRequestSuccessful(a)){t.showDetails!==!0&&(document.getElementById("addUser").value="",document.getElementById("addGroup").value=""),e.inputSelected.select=!1,e.searchValue={userName:"",groupName:""},h="";try{e.isLoadingData=!1;var s=a.data.data;if(s&&s.users&&"ldap1900"===n.getAppConstant("AUTH_TYPE").toLowerCase()){var i=s.users;Object.keys(s.users).forEach(function(t){t=t.replace(e.domainName,"");var a=t+e.domainName;i[a]=i[t],delete i[t]}),s.users=i}e.UsersPermissionsData=s.users,e.GroupsPermissionsData=s.groups,t.AwsPermissionsData={data:s["aws-roles"]},e.safe={name:decodeURIComponent(s.name)||d.safeObject.safe,owner:decodeURIComponent(s.owner)||d.safeObject.owner||"",description:decodeURIComponent(s.description)||d.safeObject.description||"",type:decodeURIComponent(s.type)||d.safeObject.type||e.dropDownOptions.selectedGroupOption.type||""},e.safePrevious=angular.copy(e.safe),e.selectedGroupOption=e.safe,e.dropDownOptions={selectedGroupOption:e.selectedGroupOption,tableOptions:e.tableOptions},"details"===e.activeDetailsTab&&e.checkOwnerEmailHasValue("details")}catch(o){console.log(o),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_PROCESSING_DATA"),e.error("md")}}else e.errorMessage=g.getTheRightErrorMessage(a),error("md")},function(a){t.showDetails!==!0&&(document.getElementById("addUser").value="",document.getElementById("addGroup").value=""),console.log(a),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")})}catch(i){t.showDetails!==!0&&(document.getElementById("addUser").value="",document.getElementById("addGroup").value=""),console.log(i),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")}}else{e.changeSafeHeader="CREATE SAFE",e.isEditSafe=!1,e.checkOwnerEmailHasValue("details");try{if(t.AwsPermissionsData={},""!==e.safe.name&&""!==e.safe.owner){var a="path="+e.getPath(),s=v.addUrlParameteres("getSafeInfo",a);g.getSafeInfo(null,s).then(function(a){if(n.ifAPIRequestSuccessful(a)){t.showDetails!==!0&&(document.getElementById("addUser").value="",document.getElementById("addGroup").value=""),e.inputSelected.select=!1,e.searchValue={userName:"",groupName:""},h="";try{e.isLoadingData=!1;var s=a.data.data;if(s&&s.users&&"ldap1900"===n.getAppConstant("AUTH_TYPE").toLowerCase()){var i=s.users;Object.keys(s.users).forEach(function(t){t.replace(e.domainName,"");var a=t+e.domainName;i[a]=i[t],delete i[t]}),s.users=i}e.UsersPermissionsData=s.users,e.GroupsPermissionsData=s.groups,t.AwsPermissionsData={data:s["aws-roles"]}}catch(o){console.log(o),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_PROCESSING_DATA"),e.error("md")}}else e.errorMessage=g.getTheRightErrorMessage(a),error("md")},function(t){console.log(t),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")})}else e.isLoadingData=!1}catch(i){console.log(i),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")}}},e.init=function(){e.safe={name:"",owner:"",description:"",type:""},e.dropDownOptions={selectedGroupOption:{type:"Select Type"},tableOptions:e.tableOptions},e.allSafesList=JSON.parse(m.getItem("allSafes")),e.myVaultKey=m.getItem("myVaultKey"),e.myVaultKey||c.go("signup"),e.requestDataFrChangeSafe(),e.fetchUsers(),e.fetchGroups()},e.userNameValEmpty=!1,e.grpNameValEmpty=!1,e.fetchUsers=function(){},e.fetchGroups=function(){},e.enableEc2Controls=function(e){angular.element(document.getElementById("bound_account_id"))[0].disabled=!1,angular.element(document.getElementById("region"))[0].disabled=!1,angular.element(document.getElementById("bound_vpc_id"))[0].disabled=!1,angular.element(document.getElementById("bound_subnet_id"))[0].disabled=!1,angular.element(document.getElementById("bound_ami_id"))[0].disabled=!1,angular.element(document.getElementById("bound_iam_instance_profile_arn"))[0].disabled=!1,angular.element(document.getElementById("bound_iam_role_arn"))[0].disabled=!1,angular.element(document.getElementById("bound_iam_principal_arn"))[0].disabled=!0},e.enableIamControls=function(e){angular.element(document.getElementById("bound_account_id"))[0].disabled=!0,angular.element(document.getElementById("region"))[0].disabled=!0,angular.element(document.getElementById("bound_vpc_id"))[0].disabled=!0,angular.element(document.getElementById("bound_subnet_id"))[0].disabled=!0,angular.element(document.getElementById("bound_ami_id"))[0].disabled=!0,angular.element(document.getElementById("bound_iam_instance_profile_arn"))[0].disabled=!0,angular.element(document.getElementById("bound_iam_role_arn"))[0].disabled=!0,angular.element(document.getElementById("bound_iam_principal_arn"))[0].disabled=!1},e.addPermission=function(t,s,i,o){if(""!=s&&void 0!=s||"AwsRoleConfigure"==t)try{"users"!==t||o||(s=document.getElementById("addUser").value.toLowerCase()),"groups"!==t||o||(s=document.getElementById("addGroup").value.toLowerCase()),a.close(""),e.isLoadingData=!0,e.showInputLoader.show=!1,e.showNoMatchingResults=!1;var l=e.getPath(),c="",d={};s.includes(e.domainName)&&(s=s.split("@")[0]),null!==s&&void 0!==s&&(s=n.formatName(s)),null!==e.awsConfPopupObj.role&&void 0!==e.awsConfPopupObj.role&&(e.awsConfPopupObj.role=n.formatName(e.awsConfPopupObj.role));var u="";switch(t){case"users":c=g.addUserPermissionForSafe,d={path:l,username:s,access:i.toLowerCase()};break;case"groups":c=g.addGroupPermissionForSafe,d={path:l,groupname:s,access:i.toLowerCase()};break;case"AWSPermission":c=g.addAWSPermissionForSafe,d={path:l,role:s,access:i.toLowerCase()};break;case"AwsRoleConfigure":if(e.awsConfPopupObj.policies="",1==e.editingAwsPermission.status)"ec2"===e.awsConfPopupObj.auth_type?(c=g.updateAWSRole,u=v.addUrlParameteres("updateAwsRole","path="+l)):(c=g.updateAWSIAMRole,u=v.addUrlParameteres("updateAwsIAMRole","path="+l));else if("ec2"===e.awsConfPopupObj.auth_type)e.awsConfPopupObj.bound_iam_principal_arn="",c=g.addAWSRole,u=v.addUrlParameteres("createAwsRole","path="+l);else{e.awsConfPopupObj.policies=[],e.awsConfPopupObj.bound_account_id="",e.awsConfPopupObj.region="",e.awsConfPopupObj.bound_vpc_id="",e.awsConfPopupObj.bound_subnet_id="",e.awsConfPopupObj.bound_ami_id="",e.awsConfPopupObj.bound_iam_instance_profile_arn="",e.awsConfPopupObj.bound_iam_role_arn="";var m=[];m.push(e.awsConfPopupObj.bound_iam_principal_arn),e.awsConfPopupObj.bound_iam_principal_arn=m,c=g.addAWSIAMRole,u=v.addUrlParameteres("createAwsIAMRole","path="+l)}d=e.awsConfPopupObj}c(d,u).then(function(a){if(n.ifAPIRequestSuccessful(a))try{if(e.isLoadingData=!1,"AwsRoleConfigure"===t)e.addPermission("AWSPermission",e.awsConfPopupObj.role,i,!1);else{e.requestDataFrChangeSafe();var o=n.getAParticularSuccessMessage("MESSAGE_ADD_SUCCESS");null!==s&&void 0!==s&&r.toast(s+"'s permission"+o)}}catch(l){console.log(l),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_PROCESSING_DATA"),e.error("md")}else e.errorMessage=g.getTheRightErrorMessage(a),error("md")},function(t){console.log(t),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")})}catch(p){e.isLoadingData=!1,console.log(p),e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")}},e.newAwsConfiguration=function(t){e.editingAwsPermission={status:!1},e.awsConfPopupObj={auth_type:"",role:"",bound_account_id:"",bound_region:"",bound_vpc_id:"",bound_subnet_id:"",bound_ami_id:"",bound_iam_instance_profile_arn:"",bound_iam_role_arn:"",policies:"",bound_iam_principal_arn:"",resolve_aws_unique_ids:"false"},e.open(t)},e.open=function(t){a.createModal(t,"changeSafePopup.html","ChangeSafeCtrl",e)},e.ok=function(){a.close("ok"),e.isLoadingData=!1},e.next=function(){e.addAWSRoleSafe()},e.cancel=function(){a.close("close"),e.isLoadingData=!1},e.init()}])}(angular.module("vault.features.ChangeSafeCtrl",["vault.services.AdminSafesManagement","vault.services.ModifyUrl","vault.constants.AppConstant"])),/*
* =========================================================================
* Copyright 2018 T-Mobile, US
* 
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* See the readme.txt file for additional language around disclaimer of warranties.
* =========================================================================
*/
function(){function e(e){e.state("admin",{url:"/admin",templateUrl:"app/Features/admin/admin.html",controller:"AdminCtrl"}).state("manage",{url:"/manage",templateUrl:"app/Features/admin/manage.html",controller:"AdminCtrl"})}e.$inject=["$stateProvider"],angular.module("vault").config(e)}(),function(e){e.controller("AdminCtrl",["$scope","$rootScope","Modal","fetchData","$http","$window","$state","SessionStore","AdminSafesManagement","ModifyUrl","UtilityService","Notifications","safesService",function(e,t,a,s,i,o,n,r,l,c,d,u,m){e.filterValue="",e.isLoadingData=!1,e.fetchDataError=!1,e.dataForTable=[],e.tilesData={},e.tilesData.SafesData=[],e.safeType={type:""},e.tableOptions=[{type:"User Safe",value:"User Safe"},{type:"Shared Safe",value:"Shared Safe"},{type:"Application Safe",value:"Application Safe"}],e.adminNavTags=m.getSafesNavTags(),e.showNotification=function(){console.log("showing notify"),a.createModal("md","notify.html","AdminCtrl",e)},e.selectedGroupOption=e.tableOptions[0],e.dropDownOptions={selectedGroupOption:e.selectedGroupOption,tableOptions:e.tableOptions},e.actionDropDownOptions={selectedGroupOption:{type:"Action"},tableOptions:[{type:"Edit",srefValue:{url:"change-safe",obj:"safeObject",myobj:"listDetails"}},{type:"Delete",srefValue:"href"}]};var p=function(){e.myVaultKey=r.getItem("myVaultKey"),e.myVaultKey?(e.errorMessage=d.getAParticularErrorMessage("ERROR_GENERAL"),e.requestDataFrAdmin()):n.go("signup")};e.filterUpdate=function(t){e.filterValue=t.value,"All safes"===t.value&&(e.filterValue=""),e.selectedGroupOption=t},e.massageDataForTiles=function(a,s){try{var i="";switch(s){case"apps":i="Application Safe";break;case"users":i="User Safe";break;case"shared":i="Shared Safe"}var o=e.tilesData.SafesData,n={};n.type=i,n.safes=[];for(var r=0;r<a.keys.length;r++)n.safes[r]={},n.safes[r].safe=decodeURIComponent(a.keys[r]),n.safes[r].safeType=decodeURIComponent(s);o.push(n),e.tilesData.SafesData=o,3===e.tilesData.SafesData.length&&(e.isLoadingData=!1,e.data=e.tilesData.SafesData,e.massageData(e.data))}catch(l){console.log(l),t.isLoadingData=!1,e.errorMessage=d.getAParticularErrorMessage("ERROR_PROCESSING_DATA"),e.error("md")}},e.massageData=function(a){try{e.dataForTable=[];for(var s=0;s<a.length;s++)for(var i=a[s].safes,o=a[s].type,n=0;n<i.length;n++){var r=i[n];r.type=o,r.safeType=i[n].safeType,e.dataForTable.push(r)}}catch(l){console.log(l),t.isLoadingData=!1,e.errorMessage=d.getAParticularErrorMessage("ERROR_PROCESSING_DATA"),e.error("md")}},e.adminEditFolder=function(t){var a="safeObject",s=t,i={};i[a]=s,e.isLoadingData=!0;var o="path="+i.safeObject.safeType+"/"+i.safeObject.safe,r=c.addUrlParameteres("getSafeInfo",o);l.getSafeInfo(null,r).then(function(t){if(d.ifAPIRequestSuccessful(t))try{e.isLoadingData=!1;var a=t.data.data;a.name&&a.owner&&a.description?n.go("change-safe",i):(e.isLoadingData=!1,e.errorMessage=d.getAParticularErrorMessage("ERROR_CONTENT_NOT_FOUND"),e.error("md"))}catch(s){console.log(s),e.isLoadingData=!1,e.errorMessage=d.getAParticularErrorMessage("ERROR_CONTENT_NOT_FOUND"),e.error("md")}else e.isLoadingData=!1,e.errorMessage=d.getAParticularErrorMessage("ERROR_CONTENT_NOT_FOUND"),e.error("md")},function(t){console.log(t),e.isLoadingData=!1,e.errorMessage=d.getAParticularErrorMessage("ERROR_CONTENT_NOT_FOUND"),e.error("md")})},e.deleteSafePopup=function(s){e.fetchDataError=!1,t.safeToDelete=s,a.createModal("md","deleteSafePopup.html","AdminCtrl",e)},t.deleteSafe=function(s){null!==t.safeToDelete&&void 0!==t.safeToDelete&&(s=t.safeToDelete),t.safeToDelete=null;try{e.isLoadingData=!0,a.close();var i="path="+s.safeType+"/"+s.safe,o=c.addUrlParameteres("deleteSafe",i);l.deleteSafe(null,o).then(function(t){if(d.ifAPIRequestSuccessful(t)){e.isLoadingData=!1;var a=d.getAParticularSuccessMessage("MESSAGE_SAFE_DELETE");u.toast(s.safe+a);var i=JSON.parse(r.getItem("allSafes")),o=i.indexOf(s.safe);o>-1&&(i.splice(o,1),r.setItem("allSafes",JSON.stringify(i)));try{for(var n=0;n<e.tilesData.SafesData.length;n++)if(e.tilesData.SafesData[n].type==s.type)for(var c=0;c<e.tilesData.SafesData[n].safes.length;c++)e.tilesData.SafesData[n].safes[c].safe==s.safe&&(e.tilesData.SafesData[n].safes.splice(c,1),e.data=e.tilesData.SafesData,e.massageData(e.data))}catch(m){console.log(m),e.errorMessage=d.getAParticularErrorMessage("ERROR_PROCESSING_DATA"),e.error("md")}}else e.errorMessage=l.getTheRightErrorMessage(t),e.error("md")},function(t){console.log(t),e.isLoadingData=!1,e.errorMessage=d.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")})}catch(n){console.log(n),e.isLoadingData=!1,e.errorMessage=d.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")}},e.error=function(t){a.createModal(t,"error.html","AdminCtrl",e)},t.close=function(){a.close()},t.cancel=function(){a.close()},e.requestDataFrAdmin=function(){var t=["apps","shared","users"],a=[];t.forEach(function(t){try{var s="path="+t,i=c.addUrlParameteres("safesList",s);e.isLoadingData=!0,l.getCompleteSafesList(null,i).then(function(s){if(d.ifAPIRequestSuccessful(s)){e.isLoadingData=!1;try{a=a.concat(s.data.keys),r.setItem("allSafes",JSON.stringify(a)),e.massageDataForTiles(s.data,t)}catch(i){console.log(i),e.error("md")}}else e.errorMessage=l.getTheRightErrorMessage(s),e.error("md")},function(a){404!==a.status?(e.isLoadingData=!1,e.errorMessage=d.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")):e.massageDataForTiles([],t)})}catch(o){e.isLoadingData=!1,e.errorMessage=d.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")}})},p()}])}(angular.module("vault.features.AdminCtrl",["vault.services.fetchData","vault.services.ModifyUrl","vault.services.Notifications"])),function(e){e.controller("AppCtrl",["$scope","$rootScope","RefreshHandler","$state",function(e,t,a,s){t.goTo=function(e){try{s.go(e)}catch(t){console.log(t)}},t.$on("$stateChangeSuccess",function(e,a,s,i,o){t.lastVisited=i.name}),t.modalParent={},a.loadFromWebstorage(),t.$on("$stateChangeStart",function(e,a,s,i){t.modalParent.previousState=i.name,t.modalParent.currentState=a.name})}])}(angular.module("vault")),function(){angular.module("vault.layout").config(["$stateProvider",function(e){e.state("base",{url:"/home",templateUrl:"app/Layout/base/base.html",controller:"baseController as vm"})}])}(),/*
* =========================================================================
* Copyright 2018 T-Mobile, US
* 
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* See the readme.txt file for additional language around disclaimer of warranties.
* =========================================================================
*/
function(){function e(e,t,a,s,i,o,n){a.$on("IdleTimeout",function(){n.logout()}),a.$on("Keepalive",function(){var e=o.getItem("myVaultKey");return e?n.renewAuthToken(e):void 0}),t.watch(),i.ping(),e.debug("runBlock end")}e.$inject=["$log","Idle","$rootScope","$state","Keepalive","SessionStore","Authentication"],angular.module("vault").config(["$httpProvider",function(e){e.interceptors.push("httpInterceptor")}]).run(e)}(),/*
* =========================================================================
* Copyright 2018 T-Mobile, US
* 
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* See the readme.txt file for additional language around disclaimer of warranties.
* =========================================================================
*/
function(){function e(e,t){t.otherwise("/signup")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("vault").config(e)}(),/*
* =========================================================================
* Copyright 2018 T-Mobile, US
* 
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* See the readme.txt file for additional language around disclaimer of warranties.
* =========================================================================
*/
function(){angular.module("vault").constant("malarkey",malarkey).constant("moment",moment)}(),/*
* =========================================================================
* Copyright 2018 T-Mobile, US
* 
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* See the readme.txt file for additional language around disclaimer of warranties.
* =========================================================================
*/
function(){function e(e,t){e.debugEnabled(!0),t.allowHtml=!0,t.timeOut=2e3,t.positionClass="custom-toast",t.tapToDismiss=!0,t.preventDuplicates=!0,t.progressBar=!1}e.$inject=["$logProvider","toastrConfig"],angular.module("vault").config(e)}(),angular.module("vault").run(["$templateCache",function(e){e.put("app/Features/admin/admin.html",' <header></header> <sidebar></sidebar> <script type="text/ng-template" id="deleteSafePopup.html"> <loading-state ng-if="isLoadingModalData"></loading-state> <div ng-if="!isLoadingModalData" class="top-lg-sep"> <div class="top-lg-sep"> <div class="common-header-label text-center">Confirmation</div> </div> <div class="top-lg-sep notification-text">Are you sure you want to delete this safe?</div> <div class="text-center bottom-lg-sep top-lg-sep notification-button"> <div class="clearfix bottom-sm-sep"> <button ng-click="deleteSafe(safeToDelete)" class="common-btn btn btn-primary btn-lg">DELETE</button> </div> <div class="clearfix"> <button ng-click="close()" class="link-style common-btn btn btn-default btn-lg">CANCEL</button> </div> </div> </div> </script> <script type="text/ng-template" id="error.html"> <div class="row"> <div class="top-lg-sep"> <div class="common-header-label text-center">Error</div> </div> <div class="top-lg-sep notification-text">{{errorMessage}}</div> </div> <div class="text-center bottom-lg-sep top-lg-sep notification-button"> <div class="clearfix bottom-sm-sep"> <button ng-click="close()" class="link-style common-btn btn btn-primary btn-lg">Close</button> </div> </div> </script> <script type="text/ng-template" id="notify.html"> <div class="row"> <div class="top-lg-sep"> <div class="common-header-label text-center">Notification</div> </div> <div class="top-lg-sep notification-text">Admin is not allowed to view inside safe</div> </div> <div class="text-center bottom-lg-sep top-lg-sep notification-button"> <div class="clearfix bottom-sm-sep"> <button ng-click="close()" class="link-style common-btn btn btn-primary btn-lg">Close</button> </div> </div> </script> <div class="container-fluid"> <div class="container-fluid-wrapper curved"> <div class="page-header-container admin"> <div class="header-inner-container"> <nav-bar active-tab="admin" gotopage="goToPage" nav-tags="adminNavTags"></nav-bar> <div class="page-header-text">ADMIN</div> </div> </div> <div class="page-content-container admin"> <div class="right search-bar-container"> <div class="search-bar"> <div class="search-box"> <div class="search-icon"> <div class="icon-search"></div> </div> <div class="search-input-wrapper"> <input type="text" placeholder="SEARCH" ng-model="searchValue" class="search-input-box"> </div> </div> </div> </div> <md-content class="admin-content"> <md-tabs md-dynamic-height="" md-border-bottom=""> <md-tab label="Safe Management"> <md-content ng-init="displayGrid" class="md-padding md-content-wrapper page-content-wrapper"> <div class="md-content-inner-wrapper"> <div class="safe-management-content"> <loading-state ng-if="isLoadingData"> </loading-state> <md-tabs md-selected="vm.selectedGroupOption" class="admin-tabs md-dynamic-height md-border-bottom"> <md-tab ng-if="!isLoadingData" ng-init="numOfTiles = tab.safes.length" ng-repeat="tab in data | orderBy : \'-type\'" ng-attr-label="{{tab.type}} ({{numOfTiles}})"> <md-content class="md-padding md-content-wrapper"> <div ng-if="(tab.safes.length === 0)" class="unavailable-text">No Safe Available</div> <tiles data="tab.safes" num-of-tiles="numOfTiles" tile-func-available="true" img="\'safe.png\'" search-value="searchValue" tile-details="showNotification" parent="admin" edit-folder="adminEditFolder(param)" delete-folder="deleteSafePopup(param)" loading="isLoadingData" class="tiles-wrapper"></tiles> </md-content> </md-tab> </md-tabs> </div> <div class="create-safe-wrapper"> <div ng-click="goTo(\'change-safe\')" class="function-text link-style option right"> <div class="action-icon-wrapper static"> <div class="rotate glyphicon glyphicon-remove-circle"></div> </div> <div class="create-link middle-block hide-in-mobile"> <div class="text">CREATE NEW SAFE </div> </div> </div> </div> </div> </md-content> </md-tab> </md-tabs> </md-content> </div> </div> </div>'),e.put("app/Features/admin/manage.html",' <header></header> <sidebar></sidebar> <script type="text/ng-template" id="deleteSafePopup.html"> <loading-state ng-if="isLoadingModalData"></loading-state> <div ng-if="!isLoadingModalData" class="top-lg-sep"> <div class="top-lg-sep"> <div class="common-header-label text-center">Confirmation</div> </div> <div class="top-lg-sep notification-text">Are you sure you want to delete this safe?</div> <div class="text-center bottom-lg-sep top-lg-sep notification-button"> <div class="clearfix bottom-sm-sep"> <button ng-click="deleteSafe(safeToDelete)" class="common-btn btn btn-primary btn-lg">DELETE</button> </div> <div class="clearfix"> <button ng-click="close()" class="link-style common-btn btn btn-default btn-lg">CANCEL</button> </div> </div> </div> </script> <script type="text/ng-template" id="error.html"> <div class="row"> <div class="top-lg-sep"> <div class="common-header-label text-center">Error</div> </div> <div class="top-lg-sep notification-text">{{errorMessage}}</div> </div> <div class="text-center bottom-lg-sep top-lg-sep notification-button"> <div class="clearfix bottom-sm-sep"> <button ng-click="close()" class="link-style common-btn btn btn-primary btn-lg">Close</button> </div> </div> </script> <script type="text/ng-template" id="notify.html"> <div class="row"> <div class="top-lg-sep"> <div class="common-header-label text-center">Notification</div> </div> <div class="top-lg-sep notification-text">Admin is not allowed to view inside safe</div> </div> <div class="text-center bottom-lg-sep top-lg-sep notification-button"> <div class="clearfix bottom-sm-sep"> <button ng-click="close()" class="link-style common-btn btn btn-primary btn-lg">Close</button> </div> </div> </script> <div class="container-fluid"> <div class="container-fluid-wrapper curved"> <div class="page-header-container admin"> <div class="header-inner-container"> <nav-bar active-tab="manage" gotopage="goToPage" nav-tags="adminNavTags"></nav-bar> <div class="page-header-text">MANAGE</div> </div> </div> <div class="page-content-container admin"> <div class="right search-bar-container"> <div class="search-bar"> <div class="search-box"> <div class="search-icon"> <div class="icon-search"></div> </div> <div class="search-input-wrapper"> <input type="text" placeholder="SEARCH" ng-model="searchValue" class="search-input-box"> </div> </div> </div> </div> <md-content class="admin-content"> <md-tabs md-dynamic-height="" md-border-bottom=""> <md-tab label="Safe Management"> <md-content ng-init="displayGrid" class="md-padding md-content-wrapper page-content-wrapper"> <div class="md-content-inner-wrapper"> <div class="safe-management-content"> <loading-state ng-if="isLoadingData"> </loading-state> <md-tabs md-selected="vm.selectedGroupOption" class="admin-tabs md-dynamic-height md-border-bottom"> <md-tab ng-if="!isLoadingData" ng-init="numOfTiles = tab.safes.length" ng-repeat="tab in data | orderBy : \'-type\'" ng-attr-label="{{tab.type}} ({{numOfTiles}})"> <md-content class="md-padding md-content-wrapper"> <div ng-if="(tab.safes.length === 0)" class="unavailable-text">No Safe Available</div> <tiles data="tab.safes" num-of-tiles="numOfTiles" tile-func-available="true" img="\'safe.png\'" search-value="searchValue" tile-details="showNotification" parent="admin" edit-folder="adminEditFolder(param)" delete-folder="deleteSafePopup(param)" loading="isLoadingData" class="tiles-wrapper"></tiles> </md-content> </md-tab> </md-tabs> </div> <div class="create-safe-wrapper"> <div ng-click="goTo(\'change-safe\')" class="function-text link-style option right"> <div class="action-icon-wrapper static"> <div class="rotate glyphicon glyphicon-remove-circle"></div> </div> <div class="create-link middle-block hide-in-mobile"> <div class="text">CREATE NEW SAFE </div> </div> </div> </div> </div> </md-content> </md-tab> </md-tabs> </md-content> </div> </div> </div>'),e.put("app/Features/change-safe/change-safe.html",' <header></header> <sidebar></sidebar> <script type="text/ng-template" id="error.html"> <div class="row"> <div class="top-lg-sep"> <div class="common-header-label text-center">Error</div> </div> <div class="top-lg-sep notification-text">{{errorMessage}}</div> </div> <div class="text-center bottom-lg-sep top-lg-sep notification-button"> <div class="clearfix bottom-sm-sep"> <button ng-click="cancel()" class="link-style common-btn btn btn-primary btn-lg">Close</button> </div> </div> </script> <script type="text/ng-template" id="changeSafePopup.html"> <div class="modal-sep"> <div class="common-header-label text-center">Configure your app </div> </div> <div class="left-lg-sep right-lg-sep"> <div class="common-form modal-inner-wrapper aws"> <div class="aws common-form"> <div class="common-form-row"> <div class="aws-conf clearfix"> <div class="details-input-group"> <div class="control-group"> <div class="common-form-label">AWS Authentication Type</div> <div class="common-radio-group"> <label class="control control--radio">EC2 <input type="radio" id="auth_type" value="ec2" ng-model="awsConfPopupObj.auth_type" ng-checked="awsConfPopupObj.auth_type == \'ec2\'" ng-click="enableEc2Controls($event)"> <div class="control__indicator"></div> </label> <label class="control control--radio">IAM <input type="radio" id="auth_type" value="iam" ng-model="awsConfPopupObj.auth_type" ng-checked="awsConfPopupObj.auth_type == \'iam\'" ng-click="enableIamControls($event)"> <div class="control__indicator"></div> </label> </div> </div> </div> </div> </div> </div> <div class="common-form-row"> <div class="details-input-group"> <div class="common-form-label">Role Name<span>*</span></div> <input value="{{awsConfPopupObj.role}}" restrict-special-char ng-model="awsConfPopupObj.role" placeholder="Role name" class="form-control input-box-style"> </div> </div> <div class="aws-conf clearfix"> <div class="font-type-normal">Please fill at least one of the following</div> <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 common-form-row"> <div class="details-input-group"> <div class="common-form-label">Account ID</div> <input value="{{awsConfPopupObj.bound_account_id}}" id="bound_account_id" restrict-special-char placeholder="Account ID" ng-model="awsConfPopupObj.bound_account_id" class="form-control input-box-style"> </div> </div> <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 common-form-row"> <div class="details-input-group"> <div class="common-form-label">Region</div> <input value="{{awsConfPopupObj.region}}" id="region" restrict-special-char placeholder="Region ID" ng-model="awsConfPopupObj.region" class="form-control input-box-style"> </div> </div> <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 common-form-row"> <div class="details-input-group"> <div class="common-form-label">VPC ID</div> <input value="{{awsConfPopupObj.bound_vpc_id}}" id="bound_vpc_id" restrict-special-char placeholder="VPC ID" ng-model="awsConfPopupObj.bound_vpc_id" class="form-control input-box-style"> </div> </div> <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 common-form-row"> <div class="details-input-group"> <div class="common-form-label">Subnet ID</div> <input value="{{awsConfPopupObj.bound_subnet_id}}" id="bound_subnet_id" restrict-special-char placeholder="Subnet ID" ng-model="awsConfPopupObj.bound_subnet_id" class="form-control input-box-style"> </div> </div> <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 common-form-row"> <div class="details-input-group"> <div class="common-form-label">AMI ID</div> <input value="{{awsConfPopupObj.bound_ami_id}}" id="bound_ami_id" restrict-special-char placeholder="AMI ID" ng-model="awsConfPopupObj.bound_ami_id" class="form-control input-box-style"> </div> </div> <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 common-form-row"> <div class="details-input-group"> <div class="common-form-label">Instance Profile ARN</div> <input value="{{awsConfPopupObj.bound_iam_instance_profile_arn}}" id="bound_iam_instance_profile_arn" restrict-arn-special-char placeholder="Instance Profile ARN" ng-model="awsConfPopupObj.bound_iam_instance_profile_arn" class="form-control input-box-style"> </div> </div> <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 common-form-row"> <div class="details-input-group"> <div class="common-form-label">IAM Role ARN</div> <input value="{{awsConfPopupObj.bound_iam_role_arn}}" id="bound_iam_role_arn" restrict-arn-special-char placeholder="IAM Role ARN" ng-model="awsConfPopupObj.bound_iam_role_arn" class="form-control input-box-style"> </div> </div> <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 common-form-row"> <div class="details-input-group"> <div class="common-form-label">IAM Principal ARN</div> <input value="{{awsConfPopupObj.bound_iam_principal_arn}}" id="bound_iam_principal_arn" restrict-arn-special-char placeholder="IAM Principal ARN" ng-model="awsConfPopupObj.bound_iam_principal_arn" class="form-control input-box-style"> </div> </div> </div> <div class="aws common-form"> <div class="common-form-row"> <div class="aws-conf clearfix"> <div class="details-input-group"> <div class="common-form-label">Permission</div> <div class="common-radio-group"> <radio-buttons data="radio" value="awsRadioBtn.value" state="true"></radio-buttons> </div> </div> </div> </div> </div> </div> </div> <div class="text-center bottom-lg-sep modal-sep aws"> <div class="clearfix bottom-sm-sep"> <button ng-click="addPermission(\'AwsRoleConfigure\', awsConfPopupObj.role, awsRadioBtn.value, false)" ng-disabled="!(awsConfPopupObj.auth_type.length &gt; 0 &amp;&amp; awsConfPopupObj.role.length &gt; 0 &amp;&amp; (awsConfPopupObj.bound_account_id.length &gt; 0 || awsConfPopupObj.region.length &gt; 0 || awsConfPopupObj.bound_vpc_id.length &gt; 0 || awsConfPopupObj.bound_subnet_id.length &gt; 0 || awsConfPopupObj.bound_ami_id.length &gt; 0 || awsConfPopupObj.bound_iam_instance_profile_arn.length &gt; 0 || awsConfPopupObj.bound_iam_role_arn.length &gt; 0 || awsConfPopupObj.bound_iam_principal_arn.length &gt; 0) )" class="common-btn btn btn-primary btn-lg">{{editingAwsPermission.status == true ? "Update" : "Create"}}</button> </div> <div class="clearfix"> <button ng-click="cancel()" class="link-style common-btn btn btn-default btn-lg">Cancel</button> </div> </div> </script> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> <div class="container-fluid common-main-content route-page change-safe-wrapper"> <div class="container-fluid-wrapper curved"> <div class="page-header-container"> <div ng-class="{\'no-tabs-header\' : showDetails}" ng-cloak="" class="header-inner-container header-without-tab"> <div class="clearfix"> <div ng-click="goBack()" class="left-arrow glyphicon glyphicon-menu-left left common-header-label"></div> <div class="left-sm-sep left page-header-text">{{changeSafeHeader}} <span class="safe-in-edit">{{safe.name}}</span></div> </div> <nav-bar active-tab="details" gotopage="goToPage" nav-tags="detailsNavTags" ng-if="activeDetailsTab == \'details\'"></nav-bar> <nav-bar active-tab="permissions" gotopage="goToPage" nav-tags="detailsNavTags" ng-if="activeDetailsTab == \'permissions\'" ng-click="checkOwnerEmailHasValue(&quot;details&quot;)"> </nav-bar> </div> </div> <div ng-class="{\'no-tabs-body\' : showDetails}" ng-cloak="" class="page-content-container"> <div ng-if="showDetails" ng-cloak="" class="page-content-container details"> <form name="createSafeDetails" ng-submit="goToPermissions()" autocomplete="off" novalidate="" class="row"> <div class="page-content-container"> <div class="clearfix details-wrapper"> <loading-state ng-if="isLoadingData"></loading-state> <div class="safe-left-content-container border-right col-lg-6 col-sm-5"> <div class="common-section-label">SAFE DETAILS</div> <div class="common-form"> <div class="row"> <div class="common-form-row col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="details-input-group"> <div class="common-form-label">Name</div> <input ng-model="safe.name" name="ownerName" ng-disabled="changeSafeHeader == \'EDIT SAFE\' || safeCreated" ng-change="replaceSpaces()" restrict-special-char="" placeholder="Name of the safe" required="" class="form-control input-box-style"> <div ng-if="!isEditSafe &amp;&amp; similarSafes === 0 &amp;&amp; safe.name.length !== 0 &amp;&amp; !typeDropdownDisable" class="status-text available">Available</div> <div ng-if="!isEditSafe &amp;&amp; similarSafes !== 0 &amp;&amp; similarSafes !== allSafesList.length" class="status-text exists">Safe Exists</div> <div ng-repeat="item in similarSafes = ( allSafesList | filter : safe.name:true ).length" class="existance-check">{{similarSafes}}</div><span ng-show="createSafeDetails.ownerName.$dirty &amp;&amp; createSafeDetails.ownerName.$invalid &amp;&amp; createSafeDetails.ownerName.$error.required" class="invalid-form">Please enter this field</span> </div> </div> </div> <div class="row middle"> <div class="common-form-row clearfix"> <div class="col-lg-5 col-md-12 col-sm-12 col-xs-12 full-row-fix"> <div class="row"> <div class="details-input-group col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="common-form-label">Type</div> <drop-down drop-down-options="dropDownOptions" name="dropdown" dropdown-disable="typeDropdownDisable" error="noTypeSelected"></drop-down> </div> </div> </div> <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12 full-row-fix col-lg-offset-1 col-lg-offset-1"> <div class="row"> <div class="details-input-group left-sm-sep col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="common-form-label">Owner</div> <input id="addOwnerEmail" ng-model="safe.owner" autofocus="!showInputLoader.show" ng-change="searchValue.userName = safe.owner" ng-keyup="onKeyUp(searchValue, &quot;userName&quot;, true)" ng-class="{highlightBox: inputSelected.select}" name="ownerEmail" placeholder="Email address - Enter min 3 characters" required="" class="form-control input-box-style"> <div ng-if="showInputLoader.show &amp;&amp; safe.owner.length &gt; 0" class="loader owner-mail"> <div class="ball-spin-fade-loader"> <div></div> <div></div> <div></div> <div></div> <div></div> <div></div> <div></div> <div></div> </div> </div> <div ng-if="inputSelected.select &amp;&amp; safe.owner.length &gt; 0" ng-click="clearOwnerEmailInputValue(\'addOwnerEmail\')" class="input-cross owner-mail"> <div class="delete-title"><img src="../../assets/images/delete.png" class="delete-icon"></div> </div><span ng-show="createSafeDetails.ownerEmail.$dirty &amp;&amp; createSafeDetails.ownerEmail.$invalid &amp;&amp; createSafeDetails.ownerEmail.$error.required" class="invalid-form">Please enter this field</span><span ng-if="invalidEmail" class="invalid-form">Please enter valid email address</span> </div> </div> </div> </div> </div> <div class="row"> <div class="common-form-row col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="details-input-group"> <div class="common-form-label">Description</div> <textarea ng-model="safe.description" name="description" placeholder="A description about the safe" required="" class="form-control input-box-style details-textarea"></textarea><span ng-show="createSafeDetails.description.$dirty &amp;&amp; createSafeDetails.description.$invalid &amp;&amp; createSafeDetails.description.$error.required" class="invalid-form">Please enter this field</span> </div> </div> </div> </div> </div> <div id="full-height" class="safe-right-content-container col-lg-6 col-sm-7"> <div class="safe-detail-container-block"> <div class="safe-img-container text-center"><img></div> <div class="font-type-normal">A Safe is a logical unit to store the secrets. All the safes are created within Vault. You can control access only at the safe level. As a vault administrator you can manage safes but cannot view the content of the safe. You can create a safe for individuals, or a group or for an application. Use the permissions tab to control the access to safe.</div> </div> </div> </div> <div class="clearfix btn-section"> <div class="right col-lg-6 col-md-6 col-sm-6 col-xs-12 bottom-lg-sep top-lg-sep"> <div class="right"> <button type="submit" ng-disabled="createSafeDetails.ownerEmail.$invalid || createSafeDetails.ownerName.$invalid || createSafeDetails.description.$invalid || createSafeDetails.dropdown.$invalid" class="common-btn btn btn-primary btn-lg">Next</button> </div> <div class="right right-sm-sepshowInputLoader"> <button type="button" ng-click="goBack()" class="link-style common-btn btn btn-default btn-lg col-lg-6 col-md-6 col-sm-6 col-xs-12">Cancel</button> </div> </div> </div> </div> </form> </div> <div ng-if="!showDetails" ng-cloak="" class="page-content-container permissions"> <md-content> <md-tabs md-dynamic-height="" md-border-bottom=""> <md-tab label="Users" md-on-select="clearInputValue(\'addUser\')"> <md-content class="md-padding"> <div class="new-container page-content-container"> <div class="row change-safe"> <div class="add-block container name col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="input-flex"> <div class="input-box-style user-input"> <input type="text" autofocus="!showInputLoader.show" ng-keyup="onKeyUp(searchValue, &quot;userName&quot;)" placeholder="Username - Enter min 3 characters" ng-model="userNameVal" id="addUser" ng-class="{error: (userNameValEmpty &amp;&amp; (userNameVal == \'\' || userNameVal == undefined)), highlightBox: inputSelected.select}" ng-change="searchValue.userName = userNameVal; userNameValEmpty = false;" class="form-control"> </div> <div ng-if="showInputLoader.show &amp;&amp; userNameVal.length &gt; 0" class="loader"> <div class="ball-spin-fade-loader"> <div></div> <div></div> <div></div> <div></div> <div></div> <div></div> <div></div> <div></div> </div> </div> <div ng-if="inputSelected.select &amp;&amp; userNameVal.length &gt; 0" ng-click="clearInputValue(\'addUser\')" class="input-cross"> <div class="delete-title"><img src="../../assets/images/delete.png" class="delete-icon"></div> </div> <div ng-if="showNoMatchingResults &amp;&amp; userNameVal.length &gt; 0" class="autocomplete-mismatch">No matching results found.</div> </div> </div> <div class="add-block container radio-inputs col-lg-3 col-md-3 col-sm-12 col-xs-12"> <radio-buttons data="radio" value="usrRadioBtnVal" state="true"></radio-buttons> </div> <div class="add-block container actions col-lg-3 col-md-3 col-sm-12 col-xs-12"> <button ng-click="addPermission(\'users\',userNameVal,usrRadioBtnVal, false);userNameValEmpty = true" class="btn btn-primary btn-lg">ADD USER</button> </div> </div> <div ng-if="isEmpty(UsersPermissionsData)" class="unavailable-text">No users are given permission to access this safe,<br> add users to access the safe </div> <div ng-if="!isEmpty(UsersPermissionsData)" class="row change-safe-table-container"> <loading-state ng-if="isLoadingData"></loading-state> <div class="row change-safe header"> <div class="container name col-lg-4 col-md-4 col-sm-4 col-xs-4">USERNAME </div> <div class="container radio-inputs col-lg-4 col-md-4 col-sm-4 col-xs-4">ACTION</div> </div> <div class="change-safe-table-data row"> <div ng-show="!isLoadingData &amp;&amp; radioValue != \'sudo\'" ng-init="editPermissionItem = false; activeItem = false; radioValue = value" ng-class="{\'grayBackground\' : activeItem == true}" ng-repeat="(key, value) in UsersPermissionsData" class="row change-safe item hide-in-mobile"> <div ng-class="{\'inactive\' : editPermissionItem == false}" class="container name col-lg-4 col-md-4 col-sm-4 col-xs-4">{{key}}</div> <div class="container radio-inputs col-lg-4 col-md-4 col-sm-4 col-xs-4"> <radio-buttons data="radio" value="radioValue" state="editPermissionItem"></radio-buttons> </div> <div class="container actions col-lg-4 col-md-4 col-sm-4 col-xs-4"> <div class="down"> <div ng-click="deletePermission(\'users\', true, false, key, radioValue)" class="list-icon icon-delete"> </div> </div> <div class="down hide-in-mobile edit"> <div ng-click="editPermissionItem = !editPermissionItem; activeItem = !activeItem" ng-class="{\'inactive\' : editPermissionItem == true, \'hide-icon\' : editPermissionItem == true}" class="list-icon icon-mode_edit"></div> <div ng-click="editPermissionItem = !editPermissionItem; activeItem = !activeItem; radioValue = value" ng-class="{\'inactive\' : editPermissionItem == true, \'hide-icon\' : editPermissionItem == false}" class="list-icon icon-cross"></div> </div> <div class="down save"> <div ng-click="editPermission(\'users\', editPermissionItem, key, radioValue); editPermissionItem ? editPermissionItem = !editPermissionItem : editPermissionItem = editPermissionItem" ng-class="{\'inactive\' : editPermissionItem == false}" class="list-icon"> SAVE</div> </div> </div> </div> <div ng-show="!isLoadingData" ng-init="editPermissionItem = true; activeItem = false; radioValue = value" ng-class="{\'grayBackground\' : activeItem == true}" ng-repeat="(key, value) in UsersPermissionsData" class="row change-safe item hide-in-tablet-up"> <div ng-class="{\'inactive\' : editPermissionItem == false}" class="container name col-lg-4 col-md-4 col-sm-4 col-xs-4">{{key}}</div> <div class="container radio-inputs col-lg-4 col-md-4 col-sm-4 col-xs-4"> <drop-down drop-down-options="radio" value="radioValue" error="noTypeSelected"></drop-down> </div> <div class="container actions col-lg-4 col-md-4 col-sm-4 col-xs-4"> <div class="down"> <div ng-click="deletePermission(\'users\', editPermissionItem, false, key, radioValue)" ng-class="{\'inactive\' : editPermissionItem == false}" class="list-icon icon-delete"> </div> </div> <div class="down hide-in-mobile edit"> <div ng-click="editPermissionItem = !editPermissionItem; activeItem = !activeItem" ng-class="{\'inactive\' : editPermissionItem == true, \'hide-icon\' : editPermissionItem == true}" class="list-icon icon-mode_edit"> </div> <div ng-click="editPermissionItem = !editPermissionItem; activeItem = !activeItem; radioValue = value" ng-class="{\'inactive\' : editPermissionItem == true, \'hide-icon\' : editPermissionItem == false}" class="list-icon icon-cross"></div> </div> <div class="down save"> <div ng-click="editPermission(\'users\', editPermissionItem, key, radioValue); editPermissionItem ? editPermissionItem = !editPermissionItem : editPermissionItem = editPermissionItem" ng-class="{\'inactive\' : editPermissionItem == false}" class="list-icon"> SAVE </div> </div> </div> </div> </div> </div> </div> </md-content> </md-tab> <md-tab label="Groups" md-on-select="clearInputValue(\'addGroup\')"> <md-content class="md-padding"> <div class="new-container page-content-container"> <div class="row change-safe"> <div class="add-block container name col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="input-flex"> <div class="input-box-style user-input"> <input type="text" autofocus="!showInputLoader.show" ng-keyup="onKeyUp(searchValue, &quot;groupName&quot;)" placeholder="Group Name - Enter min 3 characters" ng-model="grpNameVal" id="addGroup" ng-class="{error: (grpNameValEmpty &amp;&amp; (grpNameVal == \'\' || grpNameVal == undefined)), highlightBox: inputSelected.select}" ng-change="searchValue.groupName = grpNameVal; grpNameValEmpty = false;" class="form-control"> </div> <div ng-if="showInputLoader.show &amp;&amp; grpNameVal.length &gt; 0" class="loader"> <div class="ball-spin-fade-loader"> <div></div> <div></div> <div></div> <div></div> <div></div> <div></div> <div></div> <div></div> </div> </div> <div ng-if="inputSelected.select &amp;&amp; grpNameVal.length &gt; 0" ng-click="clearInputValue(\'addGroup\')" class="input-cross"> <div class="delete-title"><img src="../../assets/images/delete.png" class="delete-icon"></div> </div> <div ng-if="showNoMatchingResults &amp;&amp; grpNameVal.length &gt; 0" class="autocomplete-mismatch">No matching results found.</div> </div> </div> <div class="add-block container radio-inputs col-lg-3 col-md-3 col-sm-12 col-xs-12"> <radio-buttons data="radio" value="grpRadioBtnVal" state="true"></radio-buttons> </div> <div class="add-block container actions col-lg-3 col-md-3 col-sm-12 col-xs-12"> <button ng-click="addPermission(\'groups\', grpNameVal,grpRadioBtnVal, false);grpNameValEmpty = true" class="btn btn-primary btn-lg">ADD GROUP</button> </div> </div> <div ng-if="isEmpty(GroupsPermissionsData)" class="unavailable-text">No groups are given permission to access this safe,<br> add groups to access the safe</div> <div ng-if="!isEmpty(GroupsPermissionsData)" class="row change-safe-table-container"> <loading-state ng-if="isLoadingData"></loading-state> <div class="row change-safe header"> <div class="container name col-lg-4 col-md-4 col-sm-4 col-xs-4">NAME</div> <div class="container radio-inputs col-lg-4 col-md-4 col-sm-4 col-xs-4">ACTION</div> </div> <div class="change-safe-table-data row"> <div ng-show="!isLoadingData" ng-init="editPermissionItem = false; activeItem = false; radioValue = value" ng-class="{\'grayBackground\' : activeItem == true}" ng-repeat="(key, value) in GroupsPermissionsData" class="row change-safe item hide-in-mobile"> <div ng-class="{\'inactive\' : editPermissionItem == false}" class="container name col-lg-4 col-md-4 col-sm-4 col-xs-4">{{key}}</div> <div class="container radio-inputs col-lg-4 col-md-4 col-sm-4 col-xs-4"> <radio-buttons data="radio" value="radioValue" state="editPermissionItem"></radio-buttons> </div> <div class="container actions col-lg-4 col-md-4 col-sm-4 col-xs-4"> <div class="down"> <div ng-click="deletePermission(\'groups\', true, false, key, radioValue)" class="list-icon icon-delete"> </div> </div> <div class="down hide-in-mobile edit"> <div ng-click="editPermissionItem = !editPermissionItem; activeItem = !activeItem" ng-class="{\'inactive\' : editPermissionItem == true, \'hide-icon\' : editPermissionItem == true}" class="list-icon icon-mode_edit"></div> <div ng-click="editPermissionItem = !editPermissionItem; activeItem = !activeItem; radioValue = value" ng-class="{\'inactive\' : editPermissionItem == true, \'hide-icon\' : editPermissionItem == false}" class="list-icon icon-cross"></div> </div> <div class="down save"> <div ng-click="editPermission(\'groups\', editPermissionItem, key, radioValue); editPermissionItem ? editPermissionItem = !editPermissionItem : editPermissionItem = editPermissionItem" ng-class="{\'inactive\' : editPermissionItem == false}" class="list-icon"> SAVE</div> </div> </div> </div> <div ng-show="!isLoadingData" ng-init="editPermissionItem = true; activeItem = false; radioValue = value" ng-class="{\'grayBackground\' : activeItem == true}" ng-repeat="(key, value) in GroupsPermissionsData" class="row change-safe item hide-in-tablet-up"> <div ng-class="{\'inactive\' : editPermissionItem == false}" class="container name col-lg-4 col-md-4 col-sm-4 col-xs-4">{{key}}</div> <div class="container radio-inputs col-lg-4 col-md-4 col-sm-4 col-xs-4"> <drop-down drop-down-options="radio" value="radioValue" error="noTypeSelected"></drop-down> </div> <div class="container actions col-lg-4 col-md-4 col-sm-4 col-xs-4"> <div class="down"> <div ng-click="deletePermission(\'groups\', editPermissionItem, false, key, radioValue)" ng-class="{\'inactive\' : editPermissionItem == false}" class="list-icon icon-delete"></div> </div> <div class="down hide-in-mobile edit"> <div ng-click="editPermissionItem = !editPermissionItem; activeItem = !activeItem" ng-class="{\'inactive\' : editPermissionItem == true, \'hide-icon\' : editPermissionItem == true}" class="list-icon icon-mode_edit"></div> <div ng-click="editPermissionItem = !editPermissionItem; activeItem = !activeItem; radioValue = value" ng-class="{\'inactive\' : editPermissionItem == true, \'hide-icon\' : editPermissionItem == false}" class="list-icon icon-cross"></div> </div> <div class="down save"> <div ng-click="editPermission(\'groups\', editPermissionItem, key, radioValue); editPermissionItem ? editPermissionItem = !editPermissionItem : editPermissionItem = editPermissionItem" ng-class="{\'inactive\' : editPermissionItem == false}" class="list-icon"> SAVE </div> </div> </div> </div> </div> </div> </div> </md-content> </md-tab> <md-tab label="AWS Applications"> <md-content class="md-padding"> <div class="new-container page-content-container"> <div class="row change-safe"> <div class="container actions"> <div ng-click="newAwsConfiguration(\'md\')" class="function-text right link-style"> <div class="add-icon-container action-icon-wrapper static"> <div class="rotate glyphicon glyphicon-remove-circle"> </div> </div> <div class="text">ADD AWS CONFIGURATION</div> </div> </div> </div> <div ng-if="isEmpty(AwsPermissionsData.data)" class="unavailable-text">No applications are given permission to access this safe,<br> add applications to access the safe</div> <div ng-if="!isEmpty(AwsPermissionsData.data)" class="change-safe-table-container"> <loading-state ng-if="isLoadingData"></loading-state> <div class="row change-safe header"> <div class="container name col-lg-4 col-md-4 col-sm-4 col-xs-4">NAME </div> <div class="container radio-inputs col-lg-4 col-md-4 col-sm-4 col-xs-4">ACTION</div> </div> <div class="change-safe-table-data row"> <div ng-if="!isLoadingData" ng-init="editPermissionItem = false; activeItem = false; radioValue = value" ng-class="{\'grayBackground\' : activeItem == true}" ng-repeat="(key, value) in AwsPermissionsData.data" class="row change-safe item hide-in-mobile"> <div ng-click="editAWSConfigurationDetails(editPermissionItem, key)" ng-class="{\'inactive\' : editPermissionItem == false, \'pink-text\' : editPermissionItem == true}" class="container name col-lg-4 col-md-4 col-sm-4 col-xs-4">{{key}}</div> <div class="container radio-inputs col-lg-4 col-md-4 col-sm-4 col-xs-4"> <radio-buttons data="radio" value="radioValue" state="editPermissionItem"></radio-buttons> </div> <div class="container actions col-lg-4 col-md-4 col-sm-4 col-xs-4"> <div class="down"> <div ng-click="deletePermission(\'AWSPermission\', true, false, key, radioValue)" class="list-icon icon-delete"></div> </div> <div class="down edit"> <div ng-click="editPermissionItem = !editPermissionItem; activeItem = !activeItem" ng-class="{\'inactive\' : editPermissionItem == true, \'hide-icon\' : editPermissionItem == true}" class="list-icon icon-mode_edit"></div> <div ng-click="editPermissionItem = !editPermissionItem; activeItem = !activeItem; radioValue = value" ng-class="{\'inactive\' : editPermissionItem == true, \'hide-icon\' : editPermissionItem == false}" class="list-icon icon-cross"></div> </div> <div class="down save"> <div ng-click="editPermission(\'AWSPermission\', editPermissionItem, key, radioValue); editPermissionItem ? editPermissionItem = !editPermissionItem : editPermissionItem = editPermissionItem" ng-class="{\'inactive\' : editPermissionItem == false}" class="list-icon"> SAVE </div> </div> </div> </div> <div ng-if="!isLoadingData" ng-init="editPermissionItem = true; activeItem = false; radioValue = value" ng-class="{\'grayBackground\' : activeItem == true}" ng-repeat="(key, value) in AwsPermissionsData.data" class="row change-safe item hide-in-tablet-up"> <div ng-click="editAWSConfigurationDetails(editPermissionItem, key)" ng-class="{\'inactive\' : editPermissionItem == false, \'pink-text\' : editPermissionItem == true}" class="container name col-lg-4 col-md-4 col-sm-4 col-xs-4">{{key}}</div> <div class="container radio-inputs col-lg-4 col-md-4 col-sm-4 col-xs-4"> <drop-down drop-down-options="radio" value="radioValue" error="noTypeSelected"></drop-down> </div> <div class="container actions col-lg-4 col-md-4 col-sm-4 col-xs-4"> <div class="down"> <div ng-click="deletePermission(\'AWSPermission\', editPermissionItem, false, key, radioValue)" ng-class="{\'inactive\' : editPermissionItem == false}" class="list-icon icon-delete"> </div> </div> <div class="down hide-in-mobile edit"> <div ng-click="editPermissionItem = !editPermissionItem; activeItem = !activeItem" ng-class="{\'inactive\' : editPermissionItem == true, \'hide-icon\' : editPermissionItem == true}" class="list-icon icon-mode_edit"></div> <div ng-click="editPermissionItem = !editPermissionItem; activeItem = !activeItem; radioValue = value" ng-class="{\'inactive\' : editPermissionItem == true, \'hide-icon\' : editPermissionItem == false}" class="list-icon icon-cross"></div> </div> <div class="down save"> <div ng-click="editPermission(\'AWSPermission\', editPermissionItem, key, radioValue); editPermissionItem ? editPermissionItem = !editPermissionItem : editPermissionItem = editPermissionItem" ng-class="{\'inactive\' : editPermissionItem == false}" class="list-icon"> SAVE</div> </div> </div> </div> </div> </div> </div> </md-content> </md-tab> </md-tabs> </md-content> <div class="clearfix btn-section"> <div class="right col-lg-6 col-md-6 col-sm-6 col-xs-12 bottom-lg-sep top-lg-sep"> <div class="right"> <button type="button" ng-click="safeEditSafe()" class="common-btn btn btn-primary btn-lg">Done</button> </div> </div> </div> </div> </div> </div> </div>'),
e.put("app/Features/sign-up/sign-up.html",' <header class="signin"></header> <sidebar></sidebar> <script type="text/ng-template" id="error.html"> <div class="row"> <div class="top-lg-sep"> <div class="common-header-label text-center">Error</div> </div> <div class="top-lg-sep notification-text">{{config.shortMessage}}</div> </div> <div ng-if="config.showMore" class="text-center md-margin">{{config.longMessage}}</div> <div ng-if="config.longMessage" class="text-center md-margin"><a ng-click="config.showMore = !config.showMore" class="pointer">{{\'Show \' + (config.showMore ? \'Less\' : \'More\') }}</a></div> <div class="text-center bottom-lg-sep top-lg-sep notification-button"> <div class="clearfix bottom-sm-sep"> <button ng-click="dismiss()" class="common-btn btn btn-primary btn-lg">Close</button> </div> </div> </script> <div class="container-fluid sign-in"> <div class="container-fluid-wrapper container-fluid-wrapper-signin"> <loading-state ng-show="isLoadingData" ng-cloak=""></loading-state> <div class="form-wrapper"> <div class="sign-in-icon-container clearfix"> <div class="sign-in-image"> <img src="assets/images/signin.png"></div> </div> <form ng-show="!isLoadingData" name="authenticate" ng-submit="login()"> <div class="form-group"> <label for="usr">{{userID}}</label> <div class="username-container"> <input id="usr" placeholder="Enter your {{userID}}" ng-model="username" required="" class="form-control input-box-style"> <div ng-if="authType == \'ldap1900\'" class="username-addon">{{domainName}}</div> <div ng-show="authType == &quot;ldap1900&quot; &amp;&amp; usernameInvalid &amp;&amp; username.length &gt; 0" class="username-error">Please enter Email Id without domain name </div> </div> </div> <div class="form-group extra-margin-actions"> <label for="pwd">Password</label> <input type="password" id="pwd" placeholder="Enter your Password" ng-model="password" autocomplete="new-password" required="" class="form-control input-box-style"> </div> <div class="button-container"> <button type="submit" class="btn btn-primary btn-lg login-button">Login</button> </div> </form> <div class="center-text forgot-pwd"><a href="{{forgotPasswordLink}}" target="_blank" ng-if="!!forgotPasswordLink" class="link-style">Forgot Password?</a></div> </div> </div> </div>'),e.put("app/Features/unseal/unseal.html",' <header class="unseal"></header> <sidebar></sidebar> <script type="text/ng-template" id="error.html"> <div class="row"> <div class="top-lg-sep"> <div class="common-header-label text-center">Error</div> </div> <div class="top-lg-sep notification-text">{{errorMessage}}</div> </div> <div class="text-center bottom-lg-sep top-lg-sep notification-button"> <div class="clearfix bottom-sm-sep"> <button ng-click="close()" class="link-style common-btn btn btn-primary btn-lg">Close</button> </div> </div> </script> <div class="container-fluid unseal"> <div class="container-fluid-wrapper curved"> <div class="common-main-content text-center"> <div class="unseal-content-wrapper"> <div class="safe-detail-container-block"> <div class="safe-img-container"><img src="../assets/images/safe_icon.png"></div> <div class="font-type-normal">Minimum 3 users with keys are required to unseal the vault. If you are one of the users with a key, enter the IP address of the vault and your key to unseal the vault.</div> </div> <div class="details-input-group"> <div class="common-form-label">Server IP Address</div> <input ng-model="payload.serverip" name="serverip" type="text" placeholder="12.345.67.890" required="" class="form-control input-box-style"> </div> <div class="button-container"> <button type="button" ng-click="checkUnsealProgress()" class="link-style common-btn btn btn-primary btn-lg">View Status</button> </div> <loading-state ng-if="isLoadingData"></loading-state> <div ng-if="showProgress" class="unseal-status-wrapper"> <div class="unseal-progress-wrapper"> <div class="unseal-progress-bar"></div> <div class="unseal-progress-marker"> <div class="progress-dot-wrapper"> <div ng-class="{active: progress &lt; 1, checked: progress &gt;= 1}" class="progress-dot"> <div class="checkmark"></div> </div> </div> <div class="unseal-user">USER 1</div> <div ng-if="progress &lt; 1" class="unseal-status">key needed</div> <div ng-if="progress &gt;= 1" class="unseal-status">key accepted</div> </div> <div class="unseal-progress-marker"> <div class="progress-dot-wrapper"> <div ng-class="{active: progress == 1, checked: progress &gt;= 2, inactive: progress &lt; 1}" class="progress-dot"> <div class="checkmark"></div> </div> </div> <div class="unseal-user">USER 2</div> <div ng-if="progress &lt; 2" class="unseal-status">key needed</div> <div ng-if="progress &gt;= 2" class="unseal-status">key accepted</div> </div> <div class="unseal-progress-marker"> <div class="progress-dot-wrapper"> <div ng-class="{active: progress == 2, checked: progress &gt;= 3, inactive: progress &lt; 2}" class="progress-dot"> <div class="checkmark"></div> </div> </div> <div class="unseal-user">USER 3</div> <div ng-if="progress &lt; 3" class="unseal-status">key needed</div> <div ng-if="progress &gt;= 3" class="unseal-status">key accepted</div> </div> </div> <div ng-if="progress &lt; 3 &amp;&amp; !keySubmitted" class="details-input-group"> <div class="common-form-label">Key</div> <input ng-model="payload.key" name="key" type="text" required="" class="form-control input-box-style"> </div> <div ng-if="progress &lt; 3 &amp;&amp; !keySubmitted" class="button-container"> <button type="button" ng-click="submitKey()" class="link-style common-btn btn btn-primary btn-lg">Unseal Vault</button> </div> <div ng-if="progress &lt; 3 &amp;&amp; keySubmitted" class="unseal-success-message"> <h4>Your key has been entered successfully. {{ 3 - progress }} more keys are required to open the vault.</h4> </div> <div ng-if="progress === 3 &amp;&amp; keySubmitted" class="unseal-success-message"> <h4>Success! You have unsealed the vault.</h4> </div> <div ng-if="progress === 3 &amp;&amp; !keySubmitted" class="unseal-success-message"> <h4>This instance of vault is already unsealed!</h4> </div> </div> </div> </div> </div> </div>'),e.put("app/Layout/base/base.html",' <script type="text/ng-template" id="text-input.modal.html"> <div ng-init="form.inputValue = config.inputValue; form.passwordValue = config.passwordValue" class="modal-sep createFolder montserrat"> <div class="common-header-label text-center">{{config.title}}</div> </div> <form name="createForm" ng-submit="close({inputValue: form.inputValue, passwordValue: form.passwordValue})" class="createFolder left-lg-sep right-lg-sep"> <div class="modal-inner-wrapper"> <div class="common-form"> <div class="common-form-row"> <div class="details-input-group"> <div class="common-form-label">{{config.inputLabel}}</div> <input placeholder="{{config.placeholder}}" restrict-secret-special-char="config.inputLabel === \'Key\'" restrict-special-char name="inputValue" ng-pattern="config.inputLabel === \'Key\'?\'[a-z0-9_]+\':\'\'" ng-model="form.inputValue" required class="form-control input-box-style"> <div ng-if="config.inputLabel === &quot;Key&quot;" class="key-acceptance-info">Key accepts lowercase alphabets, numbers and underscore only.</div> <div ng-show="createForm.inputValue.$dirty &amp;&amp; createForm.inputValue.$invalid &amp;&amp; createForm.inputValue.$error.required" class="invalid-form">Please enter this field.</div> </div> </div> <div ng-if="config.passwordLabel" class="common-form-row"> <div class="details-input-group"> <div class="common-form-label password-padding">{{config.passwordLabel}}</div> <textarea name="passwordValue" placeholder="{{config.passwordPlaceholder}}" ng-model="form.passwordValue" required class="form-control input-box-style"></textarea> <div ng-show="createForm.passwordValue.$dirty &amp;&amp; createForm.passwordValue.$invalid &amp;&amp; createForm.passwordValue.$error.required" class="invalid-form">Please enter this field.</div> </div> </div> </div> </div> <div class="au-modal-buttons"> <div class="au-inline-buttons"> <button type="submit" ng-disabled="createForm.inputValue.$invalid || createForm.passwordValue.$invalid" class="common-btn btn btn-primary btn-lg">{{config.submitLabel}}</button> <button ng-click="dismiss()" class="link-style common-btn btn btn-default btn-lg">{{config.cancelLabel || \'CANCEL\'}}</button> </div> </div> </form> </script> <script type="text/ng-template" id="folder-text-input.modal.html"> <div ng-init="form.inputValue = config.inputValue; form.passwordValue = config.passwordValue" class="modal-sep createFolder montserrat"> <div class="common-header-label text-center">{{config.title}}</div> </div> <form name="createForm" ng-submit="close({inputValue: form.inputValue, passwordValue: form.passwordValue})" class="createFolder left-lg-sep right-lg-sep"> <div class="modal-inner-wrapper"> <div class="common-form"> <div class="common-form-row"> <div class="details-input-group"> <div class="common-form-label">{{config.inputLabel}}</div> <input placeholder="{{config.placeholder}}" restrict-special-char ng-model="form.inputValue" required class="form-control input-box-style"> </div> </div> </div> </div> <div class="au-modal-buttons"> <div class="au-inline-buttons"> <button type="submit" class="common-btn btn btn-primary btn-lg">{{config.submitLabel}}</button> <button ng-click="dismiss()" class="link-style common-btn btn btn-default btn-lg">{{config.cancelLabel || \'CANCEL\'}}</button> </div> </div> </form> </script> <script type="text/ng-template" id="stop.modal.html"> <div class="row montserrat"> <div class="top-lg-sep"> <div class="common-header-label text-center">{{config.title}}</div> </div> <div class="top-lg-sep notification-text">{{config.message}}</div> </div> <div class="text-center bottom-lg-sep top-lg-sep notification-button"> <div class="clearfix bottom-sm-sep"> <button ng-click="dismiss()" class="link-style common-btn btn btn-primary btn-lg">Close</button> </div> </div> </script> <script type="text/ng-template" id="confirm.modal.html"> <div class="row montserrat"> <div class="top-lg-sep"> <div class="common-header-label text-center">{{config.title}}</div> </div> <div class="top-lg-sep notification-text">{{config.message}}</div> </div> <form class="createFolder left-lg-sep right-lg-sep"> <div class="au-modal-buttons"> <div class="au-inline-buttons"> <button ng-click="close({inputValue: form.inputValue, passwordValue: form.passwordValue})" class="common-btn btn btn-primary btn-lg">{{config.submitLabel}}</button> <button ng-click="dismiss()" class="link-style common-btn btn btn-default btn-lg">{{config.cancelLabel || \'CANCEL\'}}</button> </div> </div> </form> </script> <header></header> <sidebar></sidebar> <div ui-view="content" class="au-base-content"></div>'),e.put("app/Common/Directives/dateTimeFilter/dateTimeFilter.html",' <div ng-class="{&quot;expand&quot; : parentObj.isTimeFilterActive}" ng-click="parentObj.isTimeFilterActive = !parentObj.isTimeFilterActive" class="inner-first-wrap table-cell"> <div class="inner-select-option inline-block clearfix"><span class="select-label left">{{modelData.selectedLabelText}}</span><span class="arrow-down right"></span></div> </div> <div ng-class="{&quot;expand&quot; : parentObj.isTimeFilterActive}" ng-click="parentObj.isTimeFilterActive = !parentObj.isTimeFilterActive" class="filter-option-con absolute pane-child-third-top-select"> <div class="inner-first-wrap table-cell"> <div class="inner-select-option inline-block clearfix"><span class="select-label left">{{modelData.selectedLabelText}}</span><span class="arrow-down right rotated-arrow"></span></div> </div> <div ng-click="$event.stopPropagation();" class="filter-overlay-body"> <div class="filter-option-wrap"> <div class="filter-radio-first-con cm-filter-radio-con"> <div class="filter-radio-first filter-common-radio"> <input type="radio" id="timePeriod" value="timePeriodVal" ng-model="parentObj.timeFilterRadioModel" ng-click="callModel(\'timePeriodVal\')"> <label for="timePeriod" ng-class="{&quot;icon-unselected&quot;:parentObj.timeFilterRadioModel !== &quot;timePeriodVal&quot;,&quot;icon-selected&quot;:parentObj.timeFilterRadioModel === &quot;timePeriodVal&quot;}" class="label-checkbox">TIME PERIOD</label> </div> <div ng-class="{\'this-is-disabled\':parentObj.timeFilterRadioModel !== \'timePeriodVal\'}" class="filter-radio-sibling-con relative"> <div ng-if="parentObj.timeFilterRadioModel !== \'timePeriodVal\'" class="disable-wrap absolute"></div> <div ng-init="parentObj.singleSelect = \'LAST 6 MONTHS\'" class="filter-select-con"> <ui-select ng-model="modelData.selectedItem" ng-change="dateSelectBoxChanged();"> <ui-select-match><span ng-bind="$select.selected.name"></span></ui-select-match> <ui-select-choices repeat="item in itemArray track by item.id"><span ng-bind="item.name"></span></ui-select-choices> </ui-select> </div> </div> </div> <div class="filter-radio-bottom-con cm-filter-radio-con"> <div class="filter-radio-second filter-common-radio"> <input type="radio" id="dateRange" value="dateRangeVal" ng-model="parentObj.timeFilterRadioModel" ng-click="callModel(\'dateRangeVal\')"> <label for="dateRange" ng-class="{&quot;icon-unselected&quot;:parentObj.timeFilterRadioModel !== &quot;dateRangeVal&quot;,&quot;icon-selected&quot;:parentObj.timeFilterRadioModel === &quot;dateRangeVal&quot;}" class="label-checkbox">DATE RANGE</label> </div> <div ng-class="{\'this-is-disabled\':parentObj.timeFilterRadioModel !== \'dateRangeVal\'}" class="filter-radio-sibling-con relative"> <div ng-if="parentObj.timeFilterRadioModel !== \'dateRangeVal\'" class="disable-wrap absolute"></div> <div class="filter-date-input-con first"> <div class="filter-date-input-label">FROM</div> <div class="filter-cm-date-input-wrap relative"> <input type="text" dategetter="" ng-model="modelData.createdDate" placeholder="From" ng-change="fromDateInputChanged(modelData.createdDate);" class="createdDate from-date-input"> <div class="date-icon-input absolute"><span class="icon-date_picker"></span></div> </div> </div> <div class="filter-date-input-con second"> <div class="filter-date-input-label">TO</div> <div class="filter-cm-date-input-wrap relative"> <input type="text" dategetter="" ng-model="modelData.endDate" placeholder="To" ng-change="toDateInputChanged(modelData.endDate);" class="createdDate to-date-input"> <div class="date-icon-input absolute"><span class="icon-date_picker"></span></div> </div> </div> </div> </div> </div> <div ng-class="{\'is-active\': (isSelectionMade &amp;&amp; selectedLabelValue)}" class="filter-bottom-btn-con absolute"> <div ng-click="triggerTimeFiltering();" class="filter-bottom-btn-wrp"> <div class="filter-bottom-btn-text table-cell">APPLY</div> </div> </div> </div> </div>'),e.put("app/Common/Directives/dropDown/dropDown.html",' <div ng-class="{errorIndicator : error === true &amp;&amp; dropdownDisable !== true}" class="select-dropdown-container"> <div class="select-box-text no-sep"> <div uib-dropdown="" uib-dropdown-toggle="" is-open="status.isopen" class="btn-group"> <button id="btn-append-to-single-button" ng-click="toggleDropdown($event)" type="button" ng-disabled="dropdownDisable" class="btn btn-default">{{dropDownOptions.selectedGroupOption.type}}<span class="caret"></span></button> <ul uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button" ng-if="!(dropdownDisable === true)" class="dropdown-menu"> <li role="menuitem" ng-repeat="option in dropDownOptions.tableOptions" ng-click="filterUpdate(option)"><a ng-if="(option.srefValue.obj != undefined || option.srefValue.obj != null) &amp;&amp; option.srefValue != \'href\'">{{option.type}}</a><a ng-if="option.srefValue == \'href\'" href="#">{{option.type}}</a><a ng-if="option.srefValue == null || option.srefValue == undefined">{{option.type}}</a></li> </ul> </div> </div> </div>'),e.put("app/Common/Directives/folderContentsRow/folderContentsRow.html",' <div ng-click="vm.onRowClick($event)" class="accordion-list-main adjustment"> <div ng-if="!vm.isSecret" class="row accordion-list-wrapper"> <div class="cell pink-text col-lg-4 col-md-4 col-sm-4 col-xs-3 column-value-wrapper fits-contents"><span class="icon list-icon folder icon-folder icon-folder-open"> </span><span class="au-table-row-input">{{vm.folderName}}</span></div> <div class="col-lg-1 col-md-1 col-sm-1 col-xs-1 column-value-wrapper"> <div class="invisible">CLEARFIX</div> </div> <div class="cell col-lg-3 col-md-3 col-sm-3 col-xs-3 column-value-wrapper"> <div class="invisible">CLEARFIX</div> </div> <div class="cell col-lg-2 col-md-2 col-sm-2 col-xs-2 column-value-wrapper center-text"> <div class="invisible">CLEARFIX</div> </div> <div class="cell col-lg-2 col-md-2 col-sm-2 col-xs-3 column-value-wrapper"> <div ng-if="vm.write" ng-click="vm.deleteFolder($event)" class="list-icon icon-delete"></div> </div> </div> <form ng-if="vm.isSecret" class="row accordion-list-wrapper"> <div class="cell pink-text col-lg-4 col-md-4 col-sm-4 col-xs-3 column-value-wrapper fits-contents"><img src="assets/icons/safe.svg" class="list-icon folder"> <input rows="1" ng-model="vm.item.key" ng-disabled="true" required="" class="form-control input-box-style input-disabled-text-wrapper folder-row-key-wrapper"> <div ng-if="vm.isSecret" ng-click="vm.copyToClipboard($event, vm.item.key, \'COPY_KEY_TO_CLIPBOARD\')" class="list-icon icon-content_copy vertical-sub-align"></div> </div> <div class="col-lg-1 col-md-1 col-sm-1 col-xs-1 column-value-wrapper"> <div class="invisible">CLEARFIX</div> </div> <div class="cell col-lg-4 col-md-4 col-sm-4 col-xs-4 column-value-wrapper"> <input rows="1" au-display="{{!vm.editing &amp;&amp; !vm.showPassword}}" ng-disabled="true" ng-value="vm.item.value.replace(vm.anyRegex, \'·\')" class="form-control input-box-style au-textarea input-disabled-text-wrapper folder-row-secret-wrapper"> <input rows="1" au-display="{{!vm.editing &amp;&amp; vm.showPassword}}" ng-disabled="true" ng-value="vm.item.value" class="form-control input-box-style au-textarea input-disabled-text-wrapper folder-row-secret-wrapper"> <input rows="1" au-display="{{vm.editing}}" ng-model="vm.item.value" required="" class="form-control input-box-style au-textarea input-disabled-text-wrapper folder-row-secret-wrapper"> <div ng-if="vm.isSecret" ng-click="vm.copyToClipboard($event, vm.item.value, \'COPY_TO_CLIPBOARD\')" class="list-icon icon-content_copy vertical-sub-align"></div> <div ng-mousedown="vm.showPassword = true;" ng-mouseup="vm.showPassword = false" ng-if="!vm.editing" class="list-icon icon-views vertical-sub-align"></div> </div> <div class="col-lg-1 col-md-1 col-sm-1 col-xs-1 column-value-wrapper"> <div class="invisible">CLEARFIX</div> </div> <div class="cell col-lg-2 col-md-2 col-sm-2 col-xs-3 column-value-wrapper"> <div ng-if="vm.isSecret &amp;&amp; vm.write" ng-click="vm.edit()" class="list-icon icon-mode_edit"></div> <div ng-if="vm.write" ng-click="vm.deleteSecret($event)" class="list-icon icon-delete"></div> </div> </form> </div>'),e.put("app/Common/Directives/folderContentsTable/folderContentsTable.html",' <div ng-if="!(vm.folderContent.children | filter : vm.filter).length" class="unavailable-text">No folders or secrets found here.</div> <div ng-if="(vm.folderContent.children | filter : vm.filter).length" class="table-container"> <div class="table-header"> <div class="row"> <div class="cell col-lg-5 col-md-5 col-sm-5 col-xs-4 table-first-cell">NAME</div> <div class="cell col-lg-5 col-md-5 col-sm-5 col-xs-5 invisible"></div> <div class="cell col-lg-2 col-md-2 col-sm-2 col-xs-3 block-3 action-header">ACTION</div> </div> </div> <div class="accordion-table-data-container"> <ul class="accordion-table-data"> <li ng-repeat="item in vm.folderContent.children | filter : vm.filter" class="accordian-list-item"> <folder-contents-row index="$index" item="item" parent="vm.folderContent" loading="vm.loading" write="vm.write" ng-click="vm.clickRow(item)"></folder-contents-row> </li> </ul> </div> </div>'),e.put("app/Common/Directives/footer/footer.html",' <div class="footer-container"> <div class="footer-wrap"><img src="assets/images/logo_cts.png" class="logo-cts"><span class="footer-text">CLOUD STRATEGY & TRANSFORMATION</span></div> </div>'),e.put("app/Common/Directives/header/header.html",' <div class="header-container relative"> <div class="header-overlay absolute"></div> <div class="header-content relative clearfix"> <div class="burger-menu-con left hidden">/* Hiding the burger menu, as it is not required now */ <ul class="bm-icon-con"> <li class="bm-each-bar"></li> <li class="bm-each-bar"></li> <li class="bm-each-bar"></li> </ul> </div> <div class="header-muncher center-aligned"> <div class="muncher-icon-con inline-block"> <div class="muncher-icon-wrap"> <div class="muncher-icon table-cell"></div> </div> </div> </div> <div class="user-profile"> <img ng-click="showDropdown()" src="assets/images/male-user.png"> <ul ng-if="showingDropdown" class="profile-options-wrapper"> <li ng-click="logout()" class="profile-options"> <div class="icon-user"> </div> <div class="text">Logout</div> </li> </ul> </div> <div class="header-right right"> <div class="header-right-wrap"> <div class="notification-con relative right-icons"> <div class="notification-icon icon-Alert"></div> </div> <div class="profile-info right-icons"> <div class="profile-info-icon icon-Profile"></div> </div> <div class="profile-info right-icons"> <div class="profile-info-icon icon-download"></div> </div> <div class="profile-info right-icons"> <div class="profile-info-icon icon-Alert"></div> </div> </div> </div> </div> </div>'),e.put("app/Common/Directives/listTable/listTable.html",' <script type="text/ng-template" id="duplicateSecretError.html"> <div class="top-lg-sep"> <div class="top-lg-sep"> <div class="common-header-label text-center">Duplicate Secrets</div> </div> <div class="top-lg-sep notification-text">You may not have two secrets of the same key.</div> <div class="text-center bottom-lg-sep top-lg-sep notification-button"> <div class="clearfix"> <button ng-click="close()" class="link-style common-btn btn btn-default btn-lg">OK</button> </div> </div> </div> </script> <script type="text/ng-template" id="deleteFolderPopup.html"> <loading-state ng-if="isLoadingModalData"></loading-state> <div ng-if="!isLoadingModalData" class="top-lg-sep"> <div class="top-lg-sep"> <div class="common-header-label text-center">Confirmation</div> </div> <div class="top-lg-sep notification-text">Are you sure you want to delete this item?</div> <div class="text-center bottom-lg-sep top-lg-sep notification-button"> <div class="clearfix bottom-sm-sep"> <button ng-click="deleteFolder()" class="common-btn btn btn-primary btn-lg">DELETE</button> </div> <div class="clearfix"> <button ng-click="close()" class="link-style common-btn btn btn-default btn-lg">CANCEL</button> </div> </div> </div> </script> <script type="text/ng-template" id="deleteSecretPopup.html"> <loading-state ng-if="isLoadingModalData"></loading-state> <div ng-if="!isLoadingModalData" class="top-lg-sep"> <div class="top-lg-sep"> <div class="common-header-label text-center">Confirmation</div> </div> <div class="top-lg-sep notification-text">Are you sure you want to delete this secret?</div> <div class="text-center bottom-lg-sep top-lg-sep notification-button"> <div class="clearfix bottom-sm-sep"> <button ng-click="deleteSecret()" class="common-btn btn btn-primary btn-lg">DELETE</button> </div> <div class="clearfix"> <button ng-click="close()" class="link-style common-btn btn btn-default btn-lg">CANCEL</button> </div> </div> </div> </script> <div ng-if="(data.length === 0) &amp;&amp; (!admin)" class="unavailable-text">No folders available in your safe</div> <div ng-if="(data.length === 0) &amp;&amp; (admin)" class="unavailable-text">No Safes Available </div> <div ng-if="data.length !== 0" class="table-container"> <div class="table-header"> <div class="row"> <div class="cell col-lg-5 col-md-5 col-sm-5 col-xs-4 table-first-cell"><span ng-if="accordion == true">FOLDERS</span><span ng-if="accordion != true">SAFES</span></div> <div ng-class="{\'invisible\': accordion == true}" class="cell col-lg-5 col-md-5 col-sm-5 col-xs-5">TYPE</div> <div class="cell col-lg-2 col-md-2 col-sm-2 col-xs-3 block-3 action-header">ACTION</div> </div> </div> <div class="accordion-table-data-container"> <div ng-show="loading" ng-cloak="" class="loader-wrapper"> <div class="gif-wrp"><img src="assets/images/loading.gif" class="loading-state-img"></div> </div> <ul ng-show="!loading" ng-cloak="" class="accordion-table-data"> <li ng-repeat="item in data | filter: searchObject | filter : searchValue track by $index" class="accordian-list-item"> <div class="accordion-list-main"> <div ng-click="loadFolderData(item); expandRow($index)" class="row accordion-list-wrapper"> <div ng-if="accordion != true" class="cell pink-text col-lg-5 col-md-5 col-sm-5 col-xs-4 column-value-wrapper table-first-cell"> {{item.safe}}</div> <div ng-if="accordion == true" class="cell pink-text col-lg-5 col-md-5 col-sm-5 col-xs-4 column-value-wrapper table-first-cell"><span ng-if="accordion == true" ng-class="{\'icon-folder-open\' : expandBlock == true}" class="list-icon list-icon folder icon-folder"></span><span>{{item.name}}</span></div> <div ng-class="{\'invisible\': accordion == true}" class="cell col-lg-5 col-md-5 col-sm-5 col-xs-5 column-value-wrapper">{{item.type}}</div> <div class="cell col-lg-2 col-md-2 col-sm-2 col-xs-3 column-value-wrapper"> <div ng-if="admin" ng-click="editFolder({param: item})" class="list-icon icon-mode_edit"></div> <div ng-if="admin || auth === \'write\'" ng-click="openDeleteFolderModal(item, $event)" class="list-icon icon-delete"></div> </div> </div> </div> <div ng-class="{\'open-accordion\' : expandBlock === true &amp;&amp; $index === expandBlockIndex &amp;&amp; !admin}" class="accordion-expand-block"> <form ng-submit="saveSafe(item)" class="folder-wrapper"> <loading-state ng-if="isLoadingSecrets &amp;&amp; $index === expandBlockIndex &amp;&amp; expandBlock === true" ng-cloak="ng-cloak"></loading-state> <div class="secrets-accordion-wrapper"> <div ng-if="(!item.keys || (item.keys.length == 1 &amp;&amp; item.keys[0].key == &quot;default&quot;))" ng-cloak="ng-cloak" class="unavailable-text">No secrets available in your folder</div> <div ng-repeat="key in item.keys track by $index" ng-cloak="ng-cloak" ng-if="(!(!item.keys || (item.keys.length == 1 &amp;&amp; item.keys[0].key == &quot;default&quot;)))" class="folder-keys clearfix"> <div ng-if="!key.new &amp;&amp; key.key !== \'default\'" ng-cloak="ng-cloak" class="row"> <div class="cell block-2 col-lg-2 col-md-2 col-sm-2 col-xs-4 key"> <div class="folder-key">{{ key.key }}</div> </div> <div class="cell block-3 col-lg-4 col-md-4 col-sm-4 col-xs-4 folder-key-input"> <input ng-attr-type="{{ showPassword ? \'text\' : \'password\' }}" ng-model="key.value" class="form-control"> <div ng-mousedown="showPassword = !showPassword" ng-mouseup="showPassword = !showPassword" class="list-icon icon-views"></div> </div> <div class="down"> <div ng-click="copy(key.value)" class="list-icon icon-content_copy"></div> </div> <div ng-if="auth === \'write\'" class="down"> <div ng-click="openDeleteSecretModal(item, $index)" class="list-icon icon-delete"></div> </div> </div> <div ng-if="key.new" ng-cloak="" class="row"> <div class="cell block-2 col-lg-2 col-md-2 col-sm-2 col-xs-4 folder-key-input"> <input id="key" restrict-special-char="" ng-model="key.key" placeholder="Key" required="" class="form-control input-box-style key-input-box"> </div> <div class="cell block-3 col-lg-4 col-md-4 col-sm-4 col-xs-4 folder-key-input"> <input id="secret" ng-attr-type="{{ showPassword ? \'text\' : \'password\' }}" type="password" ng-model="key.value" placeholder="Secret" autocomplete="new-password" required="" class="form-control input-box-style"> <div ng-mousedown="showPassword = !showPassword" ng-mouseup="showPassword = !showPassword" class="list-icon icon-views"></div> </div> </div> </div> </div> <div ng-if="auth === \'write\'" ng-cloak="ng-cloak" class="extra-actions"> <div class="create-folder-container"> <div ng-click="addNewSecret($index)" class="function-text link-style clearfix"> <div class="action-icon-wrapper static"> <div class="rotate glyphicon glyphicon-remove-circle"></div> </div> <div class="create-link middle-block"> <div class="text">ADD NEW SECRET</div> </div> </div> </div> <div ng-if="auth === \'write\'" ng-cloak="" class="row button-container"> <button type="submit" class="btn btn-primary btn-sm pull-right">SAVE</button>   </div> </div> </form> </div> </li> </ul> </div> </div>'),e.put("app/Common/Directives/loadingState/loadingState.html",' <div ng-style="loadingStyle" class="loading-state-con"> <div class="loading-state"> <div class="loading-state-wrp"> <div class="gif-wrp"><img src="assets/images/loader.png" class="loading-state-img"></div> </div> </div> </div>'),e.put("app/Common/Directives/navBar/navBar.html",' <div class="page-nav-block"> <div ng-if="navTagName.show" ng-click="goTo(navTagName)" ng-repeat="navTagName in navTags" class="breadcrumb"><span ng-class="{\'active\': activeTab == navTagName.navigationName }">{{navTagName.displayName}}</span><span ng-if="navTagName.addComma" class="breadcrumb-arrow glyphicon glyphicon-menu-right"></span></div> </div>'),e.put("app/Common/Directives/radioButtons/radioButtons.html",' <div class="radio-container"> <md-radio-group layout="row" ng-model="value" ng-class="{\'inactive\': state == false}"> <md-radio-button value="{{item.text}}" ng-disabled="state != true" ng-repeat="item in data.options">{{item.text}}</md-radio-button> </md-radio-group> <div class="radio-extra-functions"></div> </div>'),e.put("app/Common/Directives/searchbar/searchbar.html",' <div class="au-searchbar"> <input type="text" placeholder="SEARCH" ng-model="vm.searchValue" class="search-input"> <div ng-click="vm.callSearch()" class="au-search-button"> <div class="icon-search"></div> </div> </div>'),e.put("app/Common/Directives/sidebar/sidebar.html",' <div class="sidebar-container"></div>'),e.put("app/Common/Directives/tiles/tiles.html",' <div class="tiles-wrapper"> <div ng-show="loading" ng-cloak="" class="loader-wrapper"> <div class="gif-wrp"><img src="assets/images/loading.gif" class="loading-state-img"></div> </div> <ul ng-show="!loading" ng-cloak="" class="row"> <li ng-repeat="item in data | filter : searchValue | limitTo: paginationLimit()" ng-click="parent != \'admin\' &amp;&amp; tileClicked($event, item)" class="tiles-container col-lg-3 col-md-3 col-sm-4 col-xs-6"> <div md-whiteframe="{{height}}" ng-init="height = 3" ng-mouseenter="height = 12" ng-mouseleave="height = 3" ng-class="{\'admin-parent\' : parent === \'admin\', \'safe-parent\': parent != \'admin\'}" class="tiles-container-block padded"> <div class="tile-image-wrapper"></div> <div class="tile-label">{{item.safe}}</div> <div ng-if="parent === \'admin\'" class="admin-tile-overlay"> <div ng-click="$event.stopPropagation(); editFolder({param: item})" class="modify-safe-admin-wrapper edit-wrapper"><span class="icon-mode_edit action-icons-style action-icon-with-text-gap"></span><span class="modify-safe-text">Edit</span></div> <div ng-click="$event.stopPropagation(); deleteFolder({param: item})" class="modify-safe-admin-wrapper delete-wrapper"><span class="icon-delete action-icons-style action-icon-with-text-gap"></span><span class="modify-safe-text">Delete</span></div> </div> </div> </li> <li ng-repeat="item in numOfTiles = ( data | filter : { safe: searchValue } ).length"></li> </ul> </div> <div ng-if="parent_admin" ng-show="hasMoreItemsToShow()" class="pagination-wrapper"> <div ng-if="numOfTiles&gt;0" class="pagination-count">Displaying {{currentshown}} of {{numOfTiles}}</div> <div ng-click="showMoreItems()" class="pagination-button-wrapper"> <button class="show-more-btn">VIEW MORE</button><span><img src="assets/icons/front-arrow.svg"></span> </div> </div>'),e.put("app/Features/safes/safes-folders/safes-folders.html",' <md-content class="au-100-height"> <md-tabs md-selected="vm.tabIndex" class="md-dynamic-height md-border-bottom"> <md-tab ng-repeat="tab in vm.safeCategories" ng-attr-label="{{tab.name}}" ng-click="vm.clickSafeTab(tab)"> <md-content> <div class="invisible">stand-in content</div> </md-content> </md-tab> </md-tabs> <md-content class="au-tabs-inner"> <div class="md-content-inner-wrapper"> <div class="new-container page-content-container"> <div class="create-folder-container slide-header"> <div class="function-text"> <div class="clearfix"> <div ng-click="vm.goToSafeTiles()" class="editColor left static"> <div class="glyphicon glyphicon-chevron-left"></div> </div> <div class="left"><span ng-repeat="folder in vm.folderPathArray"><span ng-click="vm.goToFolder(folder.fullPath)" ng-class="{\'folder-link\': !$last}">{{folder.folderName}}</span><span ng-if="!$last">{{\' / \'}}</span></span></div> </div> </div> <div ng-click="vm.createFolder()" ng-if="vm.writeAccess" class="function-text link-style option right"> <div class="action-icon-wrapper static"> <div class="rotate glyphicon glyphicon-remove-circle"></div> </div> <div class="create-link middle-block"> <div class="text hide-in-mobile">CREATE NEW FOLDER</div> </div> </div> <div ng-click="vm.createSecret()" ng-if="vm.userViewingFolder &amp;&amp; vm.writeAccess" class="function-text link-style option right"> <div class="action-icon-wrapper static"> <div class="rotate glyphicon glyphicon-remove-circle"></div> </div> <div class="create-link middle-block"> <div class="text hide-in-mobile">CREATE NEW SECRET</div> </div> </div> </div> </div> <div ng-if="vm.loadingFlag" class="au-loader"> <loading-state></loading-state> </div> <folder-contents-table folder-content="vm.folderContent" loading="vm.loading" write="vm.writeAccess" ng-if="!vm.loadingFlag"></folder-contents-table> </div> </md-content> </md-content>'),
e.put("app/Features/safes/safes-tabs/safes-tabs.html",' <div class="au-tabs"> <div class="au-tabs-header"> <div class="au-tabs-gutter"> <nav-bar active-tab="safes" nav-tags="safesNavTags"></nav-bar> <div class="page-header-text">SAFES</div> <searchbar class="au-push-left"></searchbar> </div> </div> <div class="au-tabs-body"> <div ng-if="loadingSafeTabs" class="au-loader"> <loading-state></loading-state> </div> <div ui-view="content" ng-if="!loadingSafeTabs" class="au-100-height"></div> </div> </div>'),e.put("app/Features/safes/safes-tiles/safes-tiles.html",' <md-content class="au-100-height"> <md-tabs md-selected="vm.tabIndex" class="au-100-height md-border-bottom md-dynamic-height"> <md-tab ng-repeat="tab in vm.safeCategories" ng-attr-label="{{tab.name}}"> <md-content ng-init="safeList = vm.tiles[tab.id]" class="au-tabs-inner"> <tiles data="safeList" tile-func-available="true" img="\'safe_tile.png\'" search-value="vm.searchValue" tile-details="vm.goToFolders"></tiles> <div ng-if="!safeList.length" class="unavailable-text">No safes available</div> </md-content> </md-tab> </md-tabs> </md-content>'),e.put("app/Common/Directives/header/templates/burgerMenu.html","")}]);
//# sourceMappingURL=../maps/scripts/app-208589b01f.js.map
