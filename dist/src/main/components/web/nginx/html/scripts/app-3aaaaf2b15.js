/*
* =========================================================================
* Copyright 2018 T-Mobile, US
* 
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* See the readme.txt file for additional language around disclaimer of warranties.
* =========================================================================
*/
"use strict";function readTextFile(e){var a=new XMLHttpRequest;a.open("GET",e,!1),a.onreadystatechange=function(){if(4===a.readyState&&(200===a.status||0==a.status)){var e=a.responseText,t=JSON.parse(e);sessionStorage.setItem("ApiUrls",JSON.stringify(t))}},a.send(null)}angular.module("vault.services.VaultUtility",[]).service("vaultUtilityService",["fetchData","UtilityService","SessionStore",function(e,a,t){this.getDropdownDataForPermissions=function(t,s){return new Promise(function(t,s){var i={},o=a.getAppConstant("AD_USERS_DATA_URL");try{i.loadingDataFrDropdown=!0,e.getActionData(null,o,null).then(function(e){try{i.response=e;var a=e.data.data.values;"OK"!==e.statusText?(i.loadingDataFrDropdown=!1,i.erroredFrDropdown=!1,i.successFrDropdown=!1,t(i)):(i.dataFrmApi=a,i.loadingDataFrDropdown=!1,i.erroredFrDropdown=!1,i.successFrDropdown=!0,t(i))}catch(o){i.error=o,s(i.error)}},function(e){i.error=e.data,s(i.error)})}catch(n){i.error=n,s(i.error)}})},this.massageDataFrPermissionsDropdown=function(e,a,t,s){var i=[],e=e.toLowerCase();if(void 0!==t){var o=t;return o.forEach(function(e){var t=e.userId.toLowerCase();t.indexOf(a.toLowerCase())>-1&&i.push(e.userId)}),i}},this.clearAllCommas=function(e,a){var t=a.indexOf(e);return a=a.replace(e,""),(","===a[t]||" ,"===a[t])&&(a=a.replace(a[t],"")),a}}]),function(e){e.service("SafesManagement",["ServiceEndpoint","$q","DataCache","fetchData","$rootScope","ModifyUrl","ErrorMessage",function(e,a,t,s,i,o,n){this.saveNewFolder=function(a,t){var s=o.addUrlParameteres("saveNewFolder",t);return e.saveNewFolder.makeRequest(a,s).then(function(e){return e})},this.getFolderData=function(a,t){var s=o.addUrlParameteres("safesList",t);return e.safesList.makeRequest(null,s).then(function(e){return e},function(e){return e})},this.getSecrets=function(a,t){var s=o.addUrlParameteres("getSecrets",t);return e.getSecrets.makeRequest(null,s).then(function(e){return e})},this.writeSecret=function(a){return e.postSecrets.makeRequest(a).then(function(e){return e})},this.deleteFolder=function(a,t){var s=o.addUrlParameteres("deleteSafe",t);return e.deleteSafe.makeRequest(a,s).then(function(e){return e})},this.getTheRightErrorMessage=function(e){return 500===e.status||"Internal Server Error"===e.statusText?n.ERROR_NETWORK:404===e.status||"Not Found"===e.statusText?n.ERROR_CONTENT_NOT_FOUND:422===e.status||e.data.errors[0].indexOf("Exist")>0?n.ERROR_CONTENT_EXISTS:n.ERROR_GENERAL}}])}(angular.module("vault.services.SafesManagement",[])),function(e){e.service("fetchData",["ServiceEndpoint","$q","DataCache",function(e,a,t){return{postActionData:function(a,t,s){return e.postAction.makeRequest(a,t,s).then(function(e){return e})},getActionData:function(a,t,s){return e.getAction.makeRequest(a,t,s).then(function(e){return e})},deletePermission:function(a,t,s){return e.deletePermission.makeRequest(a,t,s).then(function(e){return e})},getAwsConfigurationDetails:function(a,t,s){return e.awsConfigurationDetails.makeRequest(a,t,s).then(function(e){return e})}}}])}(angular.module("vault.services.fetchData",[])),function(e){e.service("Authentication",["fetchData","$window","ServiceEndpoint","ErrorMessage",function(e,a,t,s){return{authenticateUser:function(e,a){var s={};try{return t.login.makeRequest(e).then(function(e){return e},function(e){return console.log("error in login"),console.log(e),e})}catch(i){return s={error:i},a(s)}},getTheRightErrorMessage:function(e){return"500"===e.status||"Internal Server Error"===e.statusText?s.ERROR_NETWORK:"404"===e.status?s.ERROR_WRONG_USERNAME_PASSWORD:s.ERROR_GENERAL},formatUsernameWithoutDomain:function(e){var a=/^(corp\/|corp\\)/gi;return e.replace(a,"")}}}])}(angular.module("vault.services.Authentication",["vault.services.ServiceEndpoint","vault.constants.ErrorMessage"])),function(e){e.service("AdminSafesManagement",["ServiceEndpoint","$q","DataCache","fetchData","$rootScope","ErrorMessage",function(e,a,t,s,i,o){return{getCompleteSafesList:function(a,t){return e.safesList.makeRequest(a,t).then(function(e){return e})},deleteSafe:function(a,t){return e.deleteSafe.makeRequest(a,t).then(function(e){return e})},getSafeInfo:function(a,t){return e.getSafeInfo.makeRequest(a,t).then(function(e){return e})},createSafe:function(a,t){return e.createSafe.makeRequest(a,t).then(function(e){return e})},editSafe:function(a,t){return e.editSafe.makeRequest(a,t).then(function(e){return e})},deleteUserPermissionFromSafe:function(a,t){return e.deleteUserPermission.makeRequest(a,t).then(function(e){return e})},deleteGroupPermissionFromSafe:function(a,t){return e.deleteGroupPermission.makeRequest(a,t).then(function(e){return e})},deleteAWSPermissionFromSafe:function(a,t){return e.deleteAWSPermission.makeRequest(a,t).then(function(e){return e})},addUserPermissionForSafe:function(a,t){return e.addUserPermission.makeRequest(a,t).then(function(e){return e})},addGroupPermissionForSafe:function(a,t){return e.addGroupPermission.makeRequest(a,t).then(function(e){return e})},addAWSPermissionForSafe:function(a,t){return e.addAWSPermission.makeRequest(a,t).then(function(e){return e})},getAWSConfigurationDetails:function(a,t){return e.getAwsConfigurationDetails.makeRequest(a,t).then(function(e){return e})},addAWSRole:function(a,t){return e.createAwsRole.makeRequest(a,t).then(function(e){return e})},updateAWSRole:function(a,t){return e.updateAwsRole.makeRequest(a,t).then(function(e){return e})},getTheRightErrorMessage:function(e){return"500"===e.status||"Internal Server Error"===e.statusText?o.ERROR_NETWORK:"404"===e.status?o.ERROR_CONTENT_NOT_FOUND:o.ERROR_GENERAL}}}])}(angular.module("vault.services.AdminSafesManagement",[])),function(e){e.service("httpInterceptor",["SessionStore",function(e){return{request:function(a){if(a.headers=a.headers||{},a.url.indexOf("ad/users")>-1)return a;var t=e.getItem("myVaultKey");return a.headers["vault-token"]=t,a}}}])}(angular.module("vault.services.httpInterceptor",[])),function(e){e.service("ModifyUrl",["RestEndpoints","ArrayFilter",function(e,a){return{addUrlParameteres:function(t,s){var i,o=e.baseURL,n=e.endpoints,r=a.searchAnObjectFromArray("name",t,n);return r.url&&(i=o+r.url+s),i}}}])}(angular.module("vault.services.ModifyUrl",["vault.constants.RestEndpoints","vault.services.ArrayFilter"])),function(e){e.service("UtilityService",["AppConstant","ErrorMessage","SuccessMessage",function(e,a,t){this.split=function(e){return e.split(/,\s*/)},this.extractLast=function(e){return this.split(e).pop()},this.formatName=function(e){return null!==e&&void 0!==e?(e=e.toLowerCase(),e.replace(/[ ]/g,"-")):void 0},this.getAppConstant=function(a){return e[a]},this.ifAPIRequestSuccessful=function(e){return"200"===e.status||"OK"===e.statusText||200===e.status},this.getAParticularErrorMessage=function(e){return a[e]},this.getAParticularSuccessMessage=function(e){return t[e]},this.isObjectEmpty=function(e){return e?0===Object.keys(e).length&&e.constructor===Object:!0}}])}(angular.module("vault.services.UtilityService",["vault.constants.AppConstant","vault.constants.ErrorMessage","vault.constants.SuccessMessage"])),function(e){e.service("Unseal",["ServiceEndpoint","$q","DataCache","fetchData","$rootScope","ModifyUrl","ErrorMessage",function(e,a,t,s,i,o,n){this.unseal=function(a){return e.unseal.makeRequest(a).then(function(e){return e})},this.unsealProgress=function(a,t){var s=o.addUrlParameteres("unsealProgress",t);return e.unsealProgress.makeRequest(a,s).then(function(e){return e})},this.getTheRightErrorMessage=function(e){return 500===e.status||"Internal Server Error"===e.statusText?n.ERROR_NETWORK:404===e.status||"Not Found"===e.statusText?n.ERROR_CONTENT_NOT_FOUND:422===e.status||e.data.errors[0].indexOf("Exist")>0?n.ERROR_CONTENT_EXISTS:n.ERROR_GENERAL}}])}(angular.module("vault.services.Unseal",[])),function(e){e.service("SessionStore",["$window",function(e){this.setItem=function(a,t){e.sessionStorage.setItem(a,t)},this.getItem=function(a){return e.sessionStorage.getItem(a)},this.clear=function(){e.sessionStorage.clear()},this.removeItem=function(a){e.sessionStorage.removeItem(a)}}])}(angular.module("vault.services.SessionStore",[])),function(e){e.factory("ServiceEndpoint",["RestEndpoints","$http","$q","$rootScope","MockData",function(e,a,t,s,i){function o(e,i,o,r){n[e]={name:e,url:i,method:o,lazy:r,makeRequest:function(n,d,c){void 0!=d&&""!=d&&(i=d),l=void 0!=c&&""!=c?c:{},n=n||{};var u={method:o,url:i,data:n,lazy:r,headers:l};s.showLoadingScreen=!0;var m=a(u).then(function(a){s.showLoadingScreen=!1;var i=a.headers("x-response-type");if("ERROR"===i){var o={service:e,message:a.headers("x-response-message")};return s.$broadcast("genericServiceError",o),t.reject(a)}return a},function(a){var i,o;i=a.headers("x-response-type"),o=a.headers("x-response-message");var n={service:e,message:o};return s.$broadcast("genericServiceError",n),t.reject(a)});return r||(s.showLoadingScreen=!1),m}}}var n={};n.adhockEndpoint=function(e,a,t,s){return o(e,a,t,s),n[e]};for(var r=e.baseURL,l=(e.apiKey,{}),d=e.endpoints,c=d.length-1;c>=0;c--)o(d[c].name,r+d[c].url,d[c].method,d[c].lazy);return n}])}(angular.module("vault.services.ServiceEndpoint",["vault.constants.RestEndpoints"])),function(e){e.service("RefreshHandler",["DataCache","$window","$rootScope","$state","SessionStore",function(e,a,t,s,i){var o=!1;this.loadFromWebstorage=function(){e.loadFromWebstorage(),o=!0},this.isRefreshing=function(){return o},this.refreshDone=function(){o=!1},this.bindRefreshWarning=function(e){if(a.Modernizr.sessionstorage){this.setRedirectState();var s="If you refresh then you will be taken back to the first step of and lose your progress";t.isEcomPayment&&(s="If you refresh then you will be taken back to the first step of the process"),a.onbeforeunload=function(){return e&&(s=e),s}}},this.unbindRefreshWarning=function(){a.onbeforeunload=null,i.removeItem("onRefreshRedirectState")}}])}(angular.module("vault.services.RefreshHandler",[])),function(e){e.service("Notifications",["toastr",function(e){return{toast:function(a){e.info(a,"",{containerId:"toast-container",iconClass:"toast",tapToDismiss:!1,timeOut:1e3,positionClass:"custom-toast",newestOnTop:!0,preventDuplicates:!1,preventOpenDuplicates:!1,progressBar:!1})},toastError:function(a){e.info(a,"",{iconClass:"toastError",tapToDismiss:!1,timeOut:3e3,extendedTimeOut:1e3,positionClass:"custom-toast"})},clearToastr:function(){e.clear(),e.clearToastr}}}])}(angular.module("vault.services.Notifications",["toastr"])),function(e){e.service("Modal",["$uibModal",function(e){var a,t=!0;return{createModal:function(s,i,o,n){a&&this.close(),a=e.open({animation:t,templateUrl:i,size:s,scope:n})},close:function(){a&&(a.dismiss("Close clicked"),a=null)},save:function(){a.close("Save clicked"),a=null}}}])}(angular.module("vault.services.Modal",[])),function(e){e.service("DeviceDetector",["$window","$log",function(e,a){var t,s,i=640,o=1024,n="",r=e.navigator.userAgent;return{checkDevice:function(){return t=e.innerWidth,t>o?n="large":t>=i&&o>=t?n="medium":i>t?n="small":a.log("Unrecognised device type"),n},isIphone:function(){return r.indexOf("iPhone")>=0&&(s=!0),s},isIpad:function(){return r.indexOf("iPad")>=0&&(s=!0),s},getDeviceheight:function(){return e.innerHeight},getDeviceWidth:function(){return e.innerWidth}}}])}(angular.module("vault.services.DeviceDetector",[])),function(e){e.service("DataCache",["SessionStore",function(e){var a={};return{saveGlobalData:function(t,s){var i=angular.copy(s);return a[t]=i,e.setItem("data",angular.toJson(a)),i},returnData:function(e){var t=angular.copy(a[e]);return t},clearAll:function(){a={},e.clear()},clearCache:function(e){if(Array.isArray(e))for(var a=e.length-1;a>=0;a--)this.saveGlobalData(e[a],null);else this.saveGlobalData(e,null)},loadFromWebstorage:function(){a=angular.fromJson(e.getItem("data"))||{}}}}])}(angular.module("vault.services.DataCache",[])),function(e){e.service("CopyToClipboard",function(){return{copy:function(e){var a=e,t=document.createElement("span");t.appendChild(document.createTextNode(a)),t.id="tempCopyToClipboard",angular.element(document.body.append(t));var s=document.createRange();s.selectNode(t),window.getSelection().removeAllRanges(),window.getSelection().addRange(s),document.execCommand("copy"),window.getSelection().removeAllRanges(),t.remove()}}})}(angular.module("vault.services.CopyToClipboard",[])),function(e){e.service("ArrayFilter",function(){this.searchAnObjectFromArray=function(e,a,t){var s=t.filter(function(t){return t[e]===a})[0];return s},this.findIndexInArray=function(e,a,t){var s=t.findIndex(function(t){return t[e]===a});return s}})}(angular.module("vault.services.ArrayFilter",[])),/*
* =========================================================================
* Copyright 2018 T-Mobile, US
* 
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* See the readme.txt file for additional language around disclaimer of warranties.
* =========================================================================
*/
function(){angular.module("vault",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngResource","ui.router","ui.bootstrap","toastr","counter","ngMaterial","ngTable","ui.select","vault.features","vault.services","vault.constants","vault.directives","vault.factories"]),angular.module("vault.features",["vault.features.SignUpCtrl","vault.features.SafesCtrl","vault.features.AdminCtrl","vault.features.ChangeSafeCtrl","vault.features.DocumentationCtrl","vault.features.UnsealCtrl"]),angular.module("vault.services",["vault.services.CopyToClipboard","vault.services.DataCache","vault.services.DeviceDetector","vault.services.Modal","vault.services.RefreshHandler","vault.services.ServiceEndpoint","vault.services.SessionStore","vault.services.fetchData","vault.services.SafesManagement","vault.services.UtilityService","vault.services.Authentication","vault.services.AdminSafesManagement","vault.services.ModifyUrl","vault.services.ArrayFilter","vault.services.httpInterceptor","vault.services.Notifications","vault.services.Unseal","vault.services.VaultUtility"]),angular.module("vault.constants",["vault.constants.RestEndpoints","vault.constants.AppConstant","vault.constants.ErrorMessage","vault.constants.ListOfApi","vault.constants.MockData"]),angular.module("vault.filters",["vault.filters.ToArray","vault.filters.CustomFilter"]),angular.module("vault.directives",["vault.features.Autocomplete","vault.features.ElementProperties","vault.features.Scroll","vault.directives.dateTimeFilter","vault.directives.dropDown","vault.directives.footer","vault.directives.header","vault.directives.listtable","vault.directives.loadingState","vault.directives.resize","vault.directives.sidebar","vault.directives.tiles","vault.directives.radioButtons","vault.directives.restrictSpecialChar","vault.directives.dropDown","vault.directives.navBar"]),angular.module("vault.factories",[])}(),angular.module("vault").filter("trustAsHtml",["$sce",function(e){return function(a){return e.trustAsHtml(a)}}]),function(e){e.filter("toArray",function(){return function(e){var a=[];return angular.forEach(e,function(e,t){a.push(e)}),a}})}(angular.module("vault.filters.ToArray",[])),angular.module("vault").filter("timeFilter",["$filter",function(e){return function(a){var t,s=Math.floor(a/60);if(60>s)t=s+" minutes";else{var i=Math.floor(s/60),o=s%60;t=i+" hours "+o+" minutes"}return e("trustAsHtml")(t)}}]),angular.module("vault").filter("percent",["$filter",function(e){return function(a){var t="<span class='target-text'>"+a+"</span><span class='text-suffix'>%</span>";return e("trustAsHtml")(t)}}]),angular.module("vault").filter("numFilter",["$filter",function(e){return function(a){var t;return void 0!==a?(t=Math.abs(a),t>=Math.pow(10,12)?a="<span class='target-text'>"+(a/Math.pow(10,12)).toFixed(1)+"</span><span class='text-suffix'>T</span>":t<Math.pow(10,12)&&t>=Math.pow(10,9)?a="<span class='target-text'>"+(a/Math.pow(10,9)).toFixed(1)+"</span><span class='text-suffix'>B</span>":t<Math.pow(10,9)&&t>=Math.pow(10,6)?a=(a/Math.pow(10,6)).toFixed(1)+"M":t<Math.pow(10,6)&&t>=Math.pow(10,3)&&(a=(a/Math.pow(10,3)).toFixed(1)+"K"),e("trustAsHtml")(a)):void 0}}]),function(e){e.filter("customFilter",["$filter",function(e){return function(a,t){if(a==1/0)return null;var s=2;switch(void 0!=t&&t.indexOf(":")>-1&&(s=parseInt(t.split(":")[1].trim()),t=t.split(":")[0].trim()),t){case"text":return a;case"number":return e(t)(a,s);case"percentage":return e("number")(a,s)+"%";case"date":return e("date")(a,"MM/dd/yyyy");default:return a}}}])}(angular.module("vault.filters.CustomFilter",[])),function(e){e.directive("tiles",function(){return{restrict:"E",templateUrl:"app/Common/Directives/tiles/tiles.html",scope:{data:"=",img:"=",tileFuncAvailable:"=",numOfTiles:"=?",loading:"=",searchValue:"=",tileDetails:"&",deleteFolder:"&",editFolder:"&",parent:"@"},link:function(e,a,t){e.imgSource="assets/images/"+e.img,e.tileClicked=function(a,t){e.tileFuncAvailable&&e.tileDetails()(t),a.stopPropagation()}}}})}(angular.module("vault.directives.tiles",[])),function(e){e.directive("sidebar",function(){return{restrict:"E",templateUrl:"app/Common/Directives/sidebar/sidebar.html",link:function(e){}}})}(angular.module("vault.directives.sidebar",[])),function(e){e.directive("scroll",["$window","$timeout",function(e,a){return{restrict:"A",link:function(e,a,t){$(a).on("scroll",function(e){a.addClass("scroll-visible")}),setInterval(function(){a.removeClass("scroll-visible")},250)}}}])}(angular.module("vault.features.Scroll",[])),function(e){e.directive("restrictSpecialChar",function(){return{require:"ngModel",restrict:"A",link:function(e,a,t,s){s.$parsers.push(function(e){if(null==e)return"";var a=e.replace(/[^-\w\s]/gi,"");return a!=e&&(s.$setViewValue(a),s.$render()),a})}}})}(angular.module("vault.directives.restrictSpecialChar",[])),function(e){e.directive("radioButtons",function(){return{restrict:"E",templateUrl:"app/Common/Directives/radioButtons/radioButtons.html",scope:{data:"=",value:"=",state:"="},link:function(e,a,t){e.select=function(e,a){e.stopPropagation()}}}})}(angular.module("vault.directives.radioButtons",[])),function(e){e.directive("navBar",["$rootScope","$state","$timeout",function(e,a,t){return{restrict:"EA",templateUrl:"app/Common/Directives/navBar/navBar.html",scope:{activeTab:"@",navTags:"="},link:function(s,i,o){s.goTo=function(s){if("details"!==s&&"permissions"!==s)try{a.go(s)}catch(i){console.log(i)}else t(function(){if("details"===s)e.activeDetailsTab=s,e.showDetails=!0;else{var a=$(".btn-primary");e.showDetails===!0&&a.click()}})}}}}])}(angular.module("vault.directives.navBar",[])),function(e){e.directive("loadingState",function(){return{restrict:"EA",templateUrl:"app/Common/Directives/loadingState/loadingState.html",scope:{position:"="},link:function(e,a,t){e.position&&(e.loadingStyle={position:e.position})}}})}(angular.module("vault.directives.loadingState",[])),function(e){e.directive("listtable",["CopyToClipboard","Modal","$rootScope","SafesManagement","$state","ArrayFilter","Notifications","UtilityService",function(e,a,t,s,i,o,n,r){return{restrict:"E",templateUrl:"app/Common/Directives/listTable/listTable.html",scope:{columns:"=",data:"=",loading:"=",type:"=",admin:"=",searchValue:"=",searchObject:"=?",deleteFolder:"&",editFolder:"&",folder:"&",auth:"="},link:function(i,l,d){i.expandBlock=!1,"accordion"===i.type&&(i.accordion=!0),i.expandRow=function(e){i.expandBlockIndex!==e?i.expandBlock=!0:i.expandBlock=!i.expandBlock,i.expandBlockIndex=e},i.copy=function(a){var t=r.getAParticularSuccessMessage("COPY_TO_CLIPBOARD");n.toast(t),e.copy(a)},i.loadFolderData=function(e){if(t.categories[e.appIndex]){i.isLoadingSecrets=!0;var a=t.categories[e.appIndex].id,o=t.categories[e.appIndex].tableData[e.safeIndex].safe,n=e.name,l=a+"/"+o+"/"+n;e.keys=[];try{s.getSecrets(null,l).then(function(a,t){if(r.ifAPIRequestSuccessful(a))try{a=a.data.data;var s=Object.keys(a),o=[];s.forEach(function(e){var e={key:e,value:a[e]};o.push(e)}),e.keys=o,i.isLoadingSecrets=!1}catch(n){console.log(n),i.isLoadingSecrets=!1}else console.log(t),i.isLoadingSecrets=!1})}catch(d){console.log(d),i.isLoadingSecrets=!1}}},i.addNewSecret=function(e){i.newSecretAdded=!0;var a={key:"",value:"","new":!0};i.data[e].keys.push(a)},i.cancelSafe=function(e){var a=[];if(i.data[e].keys){for(var t=0;t<i.data[e].keys.length;t++)i.data[e].keys[t]["new"]||a.push(i.data[e].keys[t]);i.data[e].keys=a,i.newSecretAdded=!1}},i.saveSafe=function(e){if(t.categories[e.appIndex]){i.deletingSecret===!0&&t.deleteSecretIndex>=0&&t.folderToSend.keys.splice(t.deleteSecretIndex,1),i.isLoadingSecrets=!0;var o=t.categories[e.appIndex].id,l=t.categories[e.appIndex].tableData[e.safeIndex].safe,d=e.name,c={path:"",data:{}};c.path=o+"/"+l+"/"+d,e.keys.forEach(function(e){("default"!==e.key||"default"!==e.value)&&(c.data[e.key]=e.value)}),0===Object.keys(c.data).length&&(c.data["default"]="default");try{s.writeSecret(c).then(function(t,s){if(r.ifAPIRequestSuccessful(t))try{i.isLoadingModalData=!1,i.isLoadingSecrets=!1,e.keys.forEach(function(e){e["new"]&&(e["new"]=!1)}),a.close();var o=r.getAParticularSuccessMessage("MESSAGE_ADD_SUCCESS");if(1==i.deletingSecret){i.deletingSecret=!1;var o=r.getAParticularSuccessMessage("MESSAGE_SAFE_DELETE")}n.clearToastr(),n.toast("Secret"+o),i.newSecretAdded=!1}catch(l){console.log(l),i.isLoadingModalData=!1,i.isLoadingSecrets=!1,i.deletingSecret=!1}else console.log(s),i.isLoadingModalData=!1,i.isLoadingSecrets=!1,i.deletingSecret=!1})}catch(u){console.log(u),i.isLoadingModalData=!1,i.isLoadingSecrets=!1,i.deletingSecret=!1}}},i.openDeleteSecretModal=function(e,s){i.fetchDataError=!1,t.deleteSecretIndex=s,t.folderToSend=e;var o="md";a.createModal(o,"deleteSecretPopup.html","safesCtrl",t)},i.openDeleteFolderModal=function(e,s){s.stopPropagation(),t.folderToDelete=e,i.folderToDelete={folder:e},i.admin?a.createModal("md","deleteFolderPopup.html","AdminCtrl",t):a.createModal("md","deleteFolderPopup.html","safesCtrl",t)},t.deleteFolder=function(){if(i.admin)t.deleteSafe(t.folderToDelete);else{a.close(),i.isLoadingModalData=!0,t.isLoadingData=!0;var e=t.folderToDelete;if(t.categories[e.appIndex]){var l=t.categories[e.appIndex].id,d=t.categories[e.appIndex].tableData[e.safeIndex].safe,c=e.name,u="path="+l+"/"+d+"/"+c;try{s.deleteFolder(null,u).then(function(s){if(r.ifAPIRequestSuccessful(s))try{var l=o.findIndexInArray("name",c,i.data);i.data.splice(l,1),i.isLoadingModalData=!1,t.isLoadingData=!1,a.close();var d=r.getAParticularSuccessMessage("MESSAGE_SAFE_DELETE");n.toast(e.name+d)}catch(u){console.log(u),i.isLoadingModalData=!1,t.isLoadingData=!1}else console.log("error",s),i.isLoadingModalData=!1,t.isLoadingData=!1})}catch(m){console.log(m),i.isLoadingModalData=!1,t.isLoadingData=!1}}}},t.deleteSecret=function(){a.close(),i.isLoadingModalData=!0,i.deletingSecret=!0,i.saveSafe(t.folderToSend)},t.close=function(){a.close()}}}}])}(angular.module("vault.directives.listtable",[])),function(e){e.directive("header",["$state","SessionStore",function(e,a){return{restrict:"E",templateUrl:"app/Common/Directives/header/header.html",link:function(t){t.showingDropdown=!1,t.showDropdown=function(){t.showingDropdown=!t.showingDropdown},t.logout=function(){a.clear(),e.go("signup")}}}}])}(angular.module("vault.directives.header",[])),function(e){e.directive("footer",function(){return{restrict:"E",templateUrl:"app/Common/Directives/footer/footer.html",link:function(e){}}})}(angular.module("vault.directives.footer",[])),function(e){e.directive("elementProperties",["$rootScope","$document",function(e,a){return{restrict:"A",scope:{elementHeight:"="},link:function(e,a,t){var s=a[0].offsetHeight,i=s-153,o=i+"px";e.elementHeight=o}}}])}(angular.module("vault.features.ElementProperties",[])),function(e){e.directive("dropDown",["$http","$state",function(e,a){return{restrict:"EA",templateUrl:"app/Common/Directives/dropDown/dropDown.html",scope:{dropDownOptions:"=",row:"=",error:"=?",dropdownDisable:"=",listDetails:"=",value:"=?"},link:function(e,t,s){e.status={},e.status.isopen=!1,angular.isDefined(e.dropDownOptions.options)&&(e.dropDownOptions.selectedGroupOption={option:"radio",type:e.value.toUpperCase(),value:e.value},e.dropDownOptions.tableOptions=[],e.dropDownOptions.options.forEach(function(a){var t={option:"radio",type:a.text.toUpperCase(),value:a.text};e.dropDownOptions.tableOptions.push(t)})),e.toggleDropdown=function(a){a.preventDefault(),a.stopPropagation(),e.status.isopen=!e.status.isopen},e.filterUpdate=function(t){if(e.error=!1,"radio"===t.option)e.value=t.value,e.dropDownOptions.selectedGroupOption={option:"radio",type:t.value.toUpperCase(),value:t.value},e.status.isopen=!e.status.isopen;else if(void 0!=t.srefValue&&void 0!=t.srefValue.obj&&void 0!=t.srefValue.url){var s=t.srefValue.obj.toString(),i=e.listDetails,o={};o[s]=i,a.go(t.srefValue.url,o)}else"href"===t.srefValue||(-1!=t.type.indexOf("All")?e.dropDownOptions.selectedGroupOption=t:e.dropDownOptions.selectedGroupOption=t)}}}}])}(angular.module("vault.directives.dropDown",[])),function(e){e.directive("dateTimeFilter",["$rootScope","$window","$filter",function(e,a,t){return{restrict:"E",templateUrl:"app/Common/Directives/dateTimeFilter/dateTimeFilter.html",scope:{parentObj:"="},link:function(a){a.modelData={},a.modelData.displayLabel="LAST 6 MONTHS",a.parentObj.timeFilterRadioModel=a.parentObj.timeFilterRadioModel||"timePeriodVal",a.triggerTimeFiltering=function(){if(a.isSelectionMade){var t=a.createDateFilterLabel();t&&(a.parentObj.isTimeFilterActive=!1,a.modelData.selectedLabelText=t,e.$broadcast("reRenderAllTiles"),a.isSelectionMade=!1,a.selectedLabelValue=!1)}},a.dateSelectBoxChanged=function(){console.log(a.modelData.selectedItem),a.isSelectionMade=!0,a.selectedLabelValue=!0,console.log(a.selectedLabelValue),console.log(a.isSelectionMade)},a.dateFilterRadioChange=function(e){a.isSelectionMade=!1,a.selectedLabelValue=!1,a.parentObj.timeFilterRadioModel=e},a.callModel=function(e){a.parentObj.timeFilterRadioModel=e},a.checkProceedStatus=function(){a.modelData.createdDate&&a.modelData.endDate?a.selectedLabelValue=!0:a.selectedLabelValue=!1},a.fromDateInputChanged=function(e){a.isSelectionMade=!0,a.checkProceedStatus()},a.toDateInputChanged=function(e){a.isSelectionMade=!0,a.checkProceedStatus()},a.createDateFilterLabel=function(){var e;return"timePeriodVal"===a.parentObj.timeFilterRadioModel?e=a.modelData.selectedItem.name:"dateRangeVal"===a.parentObj.timeFilterRadioModel&&(e=a.modelData.createdDate&&a.modelData.endDate?t("date")(new Date($(".from-date-input").val()),"M/d/yy")+" - "+t("date")(new Date($(".to-date-input").val()),"M/d/yy"):null),e},a.itemArray=[{id:1,name:"Last 6 Months"},{id:2,name:"Last 9 Months"},{id:3,name:"Last 12 Months"}],a.modelData.selectedItem=a.itemArray[0],a.modelData.selectedLabelText=a.modelData.selectedItem.name}}}]),e.directive("dategetter",["$window",function(e){function a(a,t,s,i){t.datepicker({autoclose:!0,clearBtn:!0}),i.$parsers.push(function(a){return e.moment(a).format("X")})}return{restrict:"A",require:"ngModel",link:a}}])}(angular.module("vault.directives.dateTimeFilter",[])),function(e){e.directive("autoComplete",["$rootScope","$timeout","UtilityService",function(e,a,t){return function(e,a,s){e.$watch(s.uiItems,function(e,s){void 0!=e&&e.length>0?a.bind("keydown",function(e){e.keyCode===$.ui.keyCode.TAB&&$(this).autocomplete("instance").menu.active&&e.preventDefault()}).autocomplete({minLength:0,source:function(a,s){var i=a.term.split(",");i.forEach(function(a){var t=a;t=t.replace(" ",""),void 0!=t&&e.forEach(function(a){if(a===t){var s=e.indexOf(t);s>-1&&e.splice(s,1)}})}),""===a.term&&(e=[]),s($.ui.autocomplete.filter(e,t.extractLast(a.term)))},focus:function(){return!1},select:function(e,a){var s=t.split(this.value);s.pop(),s.push(a.item.value),s.push("");var i=s.join(", ");return $(e.target).hasClass("permission-search-input")?this.value=i.substring(0,i.length-2):this.value=i,!1}}):a[0].value.length>0&&a.autocomplete({source:["Loading Data.. Please wait.."]})})}}])}(angular.module("vault.features.Autocomplete",[])),function(e){e.directive("resize",["$window","DeviceDetector","$log","$rootScope",function(e,a,t,s){return function(a,i){var o,n=640,r=1024,l="",d=angular.element(e),c=function(e){return o=e.w,o>r?l="large":o>=n&&r>=o?l="medium":n>o?l="small":t.log("Unrecognised device type"),s.modalParent.isMobilePhoneDevice="small"===l,s.modalParent.isMediumScrennDevice="medium"===l,s.modalParent.isLargeDevice="large"===l,s.modalParent.notLargeDevice="small"===l||"medium"===l,l};a.getWindowDimensions=function(){return{h:e.innerHeight,w:e.innerWidth}},a.setElementWidth=function(){return{width:i[0].offsetWidth+"px"}},a.setElementHeight=function(){return{height:i[0].offsetHeight+"px"}},a.$watch(a.getWindowDimensions,function(e){a.windowHeight=e.h,a.windowWidth=e.w,a.targetElementsWidth=i[0].offsetWidth+"px",a.targetElementsHeight=i[0].offsetHeight+"px",a.style=function(){return{height:e.h+"px",width:e.w+"px"}},c(e),s.$broadcast("deviceResized")},!0),d.bind("resize",function(){a.$apply()})}}])}(angular.module("vault.directives.resize",[])),function(e){e.constant("SuccessMessage",{MESSAGE_ADD_SUCCESS:" added successfully!",MESSAGE_SAFE_DELETE:" deleted successfully!",MESSAGE_CREATE_SUCCESS:" created successfully!",MESSAGE_UPDATE_SUCCESS:" updated successfully!",COPY_TO_CLIPBOARD:"Secret copied to clipboard"})}(angular.module("vault.constants.SuccessMessage",[])),this.readTextFile("../apiUrls.json"),function(e){e.constant("RestEndpoints",{baseURL:JSON.parse(sessionStorage.getItem("ApiUrls")).baseURL,endpoints:[{name:"postAction",url:"/postAction",method:"POST"},{name:"getAction",url:"/getAction",method:"GET"},{name:"login",url:"/auth/tvault/login",method:"POST"},{name:"safesList",url:"/sdb/list?",method:"GET"},{name:"deleteSafe",url:"/sdb/delete?",method:"DELETE"},{name:"getSafeInfo",url:"/sdb?",method:"GET"},{name:"createSafe",url:"/sdb/create",method:"POST"},{name:"editSafe",url:"/sdb/update",method:"POST"},{name:"deleteUserPermission",url:"/sdb/deleteuser",method:"POST"},{name:"deleteGroupPermission",url:"/sdb/deletegroup",method:"POST"},{name:"deleteAWSPermission",url:"/sdb/deleterole",method:"POST"},{name:"addUserPermission",url:"/sdb/adduser",method:"POST"},{name:"addGroupPermission",url:"/sdb/addgroup",method:"POST"},{name:"addAWSPermission",url:"/sdb/addrole",method:"POST"},{name:"getAwsConfigurationDetails",url:"/auth/aws/roles/",method:"GET"},{name:"saveNewFolder",url:"/sdb/createfolder?path=",method:"POST"},{name:"postSecrets",url:"/write",method:"POST"},{name:"getSecrets",url:"/read?path=",method:"GET"},{name:"createAwsRole",url:"/auth/aws/roles/create",method:"POST"},{name:"updateAwsRole",url:"/auth/aws/roles/update",method:"POST"},{name:"unseal",url:"/unseal",method:"POST"},{name:"unsealProgress",url:"/unseal-progress?serverip=",method:"GET"}]})}(angular.module("vault.constants.RestEndpoints",[])),function(e){e.constant("MockData",{"/vault/auth/tvault/login":{admin:"no",access:{users:[{"safe-name":"read"},{safe2:"read"}]}},"/vault/sdb/list?":{},"/vault/sdb/list?path=users":{hello:"world"}})}(angular.module("vault.constants.MockData",[])),function(e){e.constant("ListOfApi",{api_details:[{title:"Login LDAP",url:"auth/ldap/login",methodType:"POST",description:" ",sampleRequest:'{"username":"<corp user id>","password":"<password>"}',sampleResponse:'{success: 200} {"client_token":"2e8a4d39-8bba-6067-9f33-98a632165a6f",”admin”:”yes”,"access":{"shared":[{"cso":"read"}],"users":[{"achandr13":"write"}],"apps":[{"app1":"read"},{"app3":"write"}]},"policies":["default","r_apps_app1","r_shared_cso","w_apps_app3","w_users_achandr13"]}',note:"Use the client_token returned should be used as “vault-token” in request header for all other API calls. If user is an administrator, “admin”:”yes” will be populated"},{title:"AWS Role Configure",url:"/auth/aws/roles/update",methodType:"POST",description:" ",sampleRequest:'{"role":"testawsrole","policies":"","bound_ami_id":"","bound_account_id":"ddd","bound_region":"","bound_vpc_id":"","bound_subnet_id":"","bound_iam_instance_profile_arn":"","bound_iam_role_arn":""}',sampleResponse:'{success: 200} {"Messages":["AWS Role created "]}}',note:"At least one bound conditions is mandatory"},{title:"Fetch AWS Role Info",url:"auth/aws/roles/<rolename>",methodType:"GET",description:" ",sampleRequest:"",sampleResponse:'{success: 200} {"bound_ami_id":"testami","bound_region":"","bound_subnet_id":"","policies":["default"],"bound_account_id":"","bound_iam_instance_profile_arn":"","bound_iam_role_arn":"","bound_vpc_id":""}'},{title:"Create Safe",url:"/sdb/create",methodType:"POST",description:" ",sampleRequest:'{"path":"apps/app5","data":{"owner":"cso","createdby":"anil"}}',sampleResponse:'{success: 200} {"Message":"SDB and associated read/write/deny policies created "}',note:"You can add any key value pairs in side data."},{title:"Get Safe Information",url:"/sdb?path=<path to safe>",methodType:"GET",description:" ",sampleRequest:"/sdb?path=apps/app3",sampleResponse:'{success: 200} {"data":{"createdby":"anil","owner":"cso","aws-roles":{“role1”:”read”,”role2”:”write”}, "groups":{"r_win_opr_dev_rdp":"write"},"users":{"achandr1":"deny","achandr13":"deny"}}}'},{title:"List safes",url:"/sdb/list?path=<path name> // path would be apps/shared/users",methodType:"GET",description:" ",sampleRequest:"/sdb/list?path=apps",sampleResponse:'{success: 200, Incorrect path : 403}, {"keys":["app1","app2”,"app3","app5"]}',note:"The same api could be used to list the folders under a safe. The path needs to be provided accordingly."},{title:"Creating Folder under a safe",url:"/sdb/createfolder?path=<path with folder name>",methodType:"POST",description:" ",sampleRequest:"/sdb/createfolder?path=apps/app1",sampleResponse:'{success: 200} {"messages":["Folder created “]}',note:"When a new folder is created an entry “default”:”default” will be added. UI needs to ignore “default”:”default”  returned while showing the secrets under a folder."},{title:"Deleting a Safe/Folder",url:"/sdb/delete?path=<full path>",methodType:"DELETE",description:" ",sampleRequest:"/sdb/delete?path=apps/app1/secrets",sampleResponse:'{ success: 200 } {"messages":["SDB deleted"]}'},{title:"Associating user to safe",url:"/sdb/adduser",methodType:"POST",description:" ",sampleRequest:'{"path":"apps/app1","username":"achandr13","access":"read"}',sampleResponse:'{success: 200} {"Message":"User is successfully associated "}'},{title:"Associating Group to safe",url:"/sdb/addgroup",methodType:"POST",description:" ",sampleRequest:'{"path":"apps/app1","groupname":"vault-admin","access":"write"}',sampleResponse:'{success: 200} {"Message":"Group is successfully associated with SDB"}'},{title:"Associating Aws Role to safe",url:"/sdb/addrole",methodType:"POST",description:" ",sampleRequest:'{"path":"apps/app1"," role":"aws-sample-role","access":"write"}',sampleResponse:'{success: 200} {"Message":"Role is successfully associated "}'},{title:"Removing user association to safe",url:"/sdb/deleteuser",methodType:"POST",description:" ",sampleRequest:'{"path":"apps/app1","username":"achandr13"}',sampleResponse:'{success: 200} {"Message":"User association is removed "}'},{title:"Removing Group association to safe",url:"/sdb/deletegroup",methodType:"POST",description:" ",sampleRequest:'{"path":"apps/app1","groupname":"vault-admin"}',sampleResponse:'{success: 200} {"Message":"Group association is removed "}'},{title:"Removing AWS-Role association to safe",url:"/sdb/deleterole",methodType:"POST",description:" ",sampleRequest:'{"path":"apps/app1","role":"1_a04f33f6-74ad-b7ad"}',sampleResponse:'{success: 200} {"Message":"Role association is removed "}'},{title:"Read Secret",url:"read?path=<Path>",methodType:"GET",description:" ",sampleRequest:"/read?path=apps/app1/secrets",sampleResponse:'{success: 200} {"data":{"key1":"value1","key2":"value2"}}'},{title:"Write Secret",url:"/write",methodType:"POST",description:" ",sampleRequest:'{"path":"apps/app1/secrets","data": {"key1":"value1","key2":"value2"}}',sampleResponse:'{success: 200} {"Message":"Secret saved to vault"}'}]})}(angular.module("vault.constants.ListOfApi",[])),function(e){e.constant("ErrorMessage",{ERROR_GENERAL:"Please try again, if the issue persists contact Vault Administrator",ERROR_WRONG_USERNAME_PASSWORD:"Username or password is wrong, please try again",ERROR_NETWORK:"Please check your network connection, if the issue persists contact Vault Administrator",ERROR_CONTENT_NOT_FOUND:"Requested content not found!",ERROR_CONTENT_EXISTS:"Content already exits",ERROR_PROCESSING_DATA:"Error processing response data. Please try again, if the issue persists contact Vault Administrator",ERROR_PROCESSING_RELOAD_PAGE:"Error processing. Please Reload the Page"})}(angular.module("vault.constants.ErrorMessage",[])),function(e){e.constant("AppConstant",{FORGOT_PASSWORD_LINK:"",AD_USERS_DATA_URL:""})}(angular.module("vault.constants.AppConstant",[])),/*
* =========================================================================
* Copyright 2018 T-Mobile, US
* 
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* See the readme.txt file for additional language around disclaimer of warranties.
* =========================================================================
*/
function(){function e(e){e.state("unseal",{url:"/unseal",templateUrl:"app/Features/unseal/unseal.html",controller:"UnsealCtrl"})}e.$inject=["$stateProvider"],angular.module("vault").config(e)}(),function(e){e.controller("UnsealCtrl",["$scope","fetchData","Unseal","ModifyUrl","Modal","$rootScope","$http","$log","$state","SessionStore","UtilityService",function(e,a,t,s,i,o,n,r,l,d,c){o.isLoadingData=!1,e.isLoadingModalData=!1,e.fetchDataError=!1,e.payload={},e.keySubmitted=!1,e.showProgress=!1;var u=function(a){i.createModal(a,"error.html","UnsealCtrl",e)};e.close=function(){i.close()},e.checkUnsealProgress=function(){try{o.isLoadingData=!0,e.keySubmitted=!1,e.payload.key="",t.unsealProgress(null,e.payload.serverip).then(function(a){if(c.ifAPIRequestSuccessful(a)){console.log("response",a),o.isLoadingData=!1;var s=a.data;e.showProgress=!0,s.sealed===!1?e.progress=3:(e.progress=s.progress,console.log("initial -->",e.progress),d.setItem("currentProgress",JSON.stringify(e.progress)))}else o.isLoadingData=!1,e.errorMessage=t.getTheRightErrorMessage(a),"Requested content not found!"!==e.errorMessage&&u("md")},function(a){o.isLoadingData=!1,e.errorMessage=t.getTheRightErrorMessage(a),"Requested content not found!"!==e.errorMessage&&u("md")})}catch(a){console.log(a),e.errorMessage=c.getAParticularErrorMessage("ERROR_GENERAL"),u("md"),o.isLoadingData=!1}},e.submitKey=function(){try{o.isLoadingData=!0,t.unseal(e.payload).then(function(a){if(c.ifAPIRequestSuccessful(a)){o.isLoadingData=!1;var s=a.data;e.showProgress=!0;var i=JSON.parse(d.getItem("currentProgress"));s.sealed===!1?(e.progress=3,e.keySubmitted=!0):s.progress==i?(e.errorMessage="Key has already been entered, please try a different key.",u("md")):(e.progress=s.progress,e.keySubmitted=!0)}else o.isLoadingData=!1,e.checkUnsealProgress(),e.errorMessage=t.getTheRightErrorMessage(a),"Requested content not found!"!==e.errorMessage&&u("md")},function(a){o.isLoadingData=!1,e.checkUnsealProgress(),e.errorMessage=a.data.errors[0],"Requested content not found!"!==e.errorMessage&&u("md")})}catch(a){console.log(a),e.errorMessage=c.getAParticularErrorMessage("ERROR_GENERAL"),u("md"),o.isLoadingData=!1}}}])}(angular.module("vault.features.UnsealCtrl",["vault.services.SafesManagement","vault.services.Notifications"])),/*
* =========================================================================
* Copyright 2018 T-Mobile, US
* 
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* See the readme.txt file for additional language around disclaimer of warranties.
* =========================================================================
*/
function(){function e(e){e.state("signup",{url:"/signup",templateUrl:"app/Features/sign-up/sign-up.html",controller:"SignUpCtrl"})}e.$inject=["$stateProvider"],angular.module("vault").config(e)}(),function(e){e.controller("SignUpCtrl",["$scope","Modal","$state","Authentication","SessionStore","UtilityService",function(e,a,t,s,i,o){var n=function(){e.forgotPasswordLink=o.getAppConstant("FORGOT_PASSWORD_LINK")},r=function(a){if(void 0!=a){var s=a.client_token,n="no"!=a.admin.toLowerCase(),r=a.access,d=a.policies;i.setItem("myVaultKey",s),i.setItem("isAdmin",n),i.setItem("accessSafes",JSON.stringify(r)),i.setItem("policies",d),t.go("safes")}else e.errorMessage=o.getAParticularErrorMessage("ERROR_GENERAL"),l("md")},l=function(t){a.createModal(t,"error.html","SignUpCtrl",e)};e.close=function(){a.close()},e.login=function(){e.isLoadingData=!0;var a=e.username.toLowerCase();a=s.formatUsernameWithoutDomain(a);var t={username:a,password:e.password};s.authenticateUser(t).then(function(a){e.isLoadingData=!1,o.ifAPIRequestSuccessful(a)?r(a.data):(e.errorMessage=s.getTheRightErrorMessage(a),l("md"))})},n()}])}(angular.module("vault.features.SignUpCtrl",["vault.services.UtilityService"])),/*
* =========================================================================
* Copyright 2018 T-Mobile, US
* 
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* See the readme.txt file for additional language around disclaimer of warranties.
* =========================================================================
*/
function(){function e(e){e.state("safes",{url:"/safes",params:{safe:null},templateUrl:"app/Features/safes/safes.html",controller:"SafesCtrl"})}e.$inject=["$stateProvider"],angular.module("vault").config(e)}(),function(e){e.controller("SafesCtrl",["$scope","fetchData","SafesManagement","ModifyUrl","AdminSafesManagement","Modal","CopyToClipboard","$rootScope","$http","$log","$state","SessionStore","UtilityService","ArrayFilter","$stateParams","Notifications",function(e,a,t,s,i,o,n,r,l,d,c,u,m,p,g,v){e.searchValue="",r.isLoadingData=!1,e.isLoadingModalData=!1,e.fetchDataError=!1,e.slide=!1,e.slideItems=[],e.slideHeader="",e.slideHeaderDescription="",e.currentCategory="users",r.categories=[{name:"My Safes",id:"users"},{name:"Shared Safe",id:"shared"},{name:"Applications Safe",id:"apps"}],e.radio={value:"Write",options:[{text:"Read"},{text:"Write"},{text:"Admin"}]},e.safesNavTags=[{displayName:"SAFES",navigationName:"safes",addComma:!1,show:!0},{displayName:"ADMIN",navigationName:"admin",addComma:!1,show:"true"==u.getItem("isAdmin")},{displayName:"HEALTH",navigationName:"health",addComma:!1,show:!1},{displayName:"ALERTS",navigationName:"alerts",addComma:!1,show:!1},{displayName:"DOCUMENTATION",navigationName:"documentation",addComma:!1,show:!0}],e.actionDropDownOptions={selectedGroupOption:{type:"Action"},tableOptions:[{type:"Edit",srefValue:{url:"change-safe",obj:"safeObject",myobj:"listDetails"}},{type:"Delete",srefValue:"href"}]};var f=function(a){o.createModal(a,"error.html","SafesCtrl",e)};e.createFolder=function(a){o.createModal("md","createNewFolderPopup.html","SafesCtrl",e)},e.saveNewFolder=function(a){if(o.close(),a){e.isLoadingData=!0;try{var s=e.currentSafe;a=m.formatName(a);var i=e.currentCategory+"/"+s+"/"+a;t.saveNewFolder(null,i).then(function(i){if(m.ifAPIRequestSuccessful(i)){e.isLoadingData=!1;var o=p.findIndexInArray("id",e.currentCategory,r.categories),n=p.findIndexInArray("safe",s,r.categories[o].tableData),l={name:a,keys:[{key:"default",value:"default"}],appIndex:o,safeIndex:n};r.categories[o].tableData[n].folders.push(l),e.slideItems=r.categories[o].tableData[n].folders;var d=m.getAParticularSuccessMessage("MESSAGE_ADD_SUCCESS");v.toast(a+d)}else e.isLoadingData=!1,e.errorMessage=t.getTheRightErrorMessage(i),f("md")},function(a){console.log(a),e.isLoadingData=!1,e.errorMessage=t.getTheRightErrorMessage(a),e.error("md")})}catch(n){console.log(n),e.isLoadingData=!1,e.errorMessage=m.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")}}},e.close=function(){o.close()},e.sliderFunction=function(a){if(e.slide=!e.slide,null!=a&&void 0!=a){e.slideAuth=a.auth,e.slideHeader=a.safe,e.currentSafe=a.safe,e.requestDataFrSafes(a.safe),c.transitionTo("safes",{safe:a.safe},{notify:!1});try{e.slideHeaderDescription="",r.isLoadingData=!0;var o="path=users/"+a.safe,n=s.addUrlParameteres("getSafeInfo",o);i.getSafeInfo(null,n).then(function(a){if(m.ifAPIRequestSuccessful(a))try{r.isLoadingData=!1,e.slideHeaderDescription=a.data.data.description}catch(t){console.log(t),r.isLoadingData=!1,e.errorMessage=m.getAParticularErrorMessage("ERROR_PROCESSING_DATA")}else r.isLoadingData=!1,e.errorMessage=i.getTheRightErrorMessage(a)},function(a){console.log(a),r.isLoadingData=!1,e.errorMessage=t.getTheRightErrorMessage(a)})}catch(l){console.log(l),r.isLoadingData=!1,e.errorMessage=m.getAParticularErrorMessage("ERROR_GENERAL")}}},e.resetSlide=function(a){e.currentCategory=a.id,e.slide=!1},e.init=function(){u.getItem("myVaultKey")?(r.access=JSON.parse(u.getItem("accessSafes")),e.massageSafesList()):c.go("signup")},e.massageSafesList=function(){try{r.categories[0].tableData=[],r.categories[1].tableData=[],r.categories[2].tableData=[],r.access.users&&0!==r.access.users.length&&r.access.users.forEach(function(e){var a=Object.keys(e)[0],t={safe:a,folders:[],auth:e[a]};r.categories[0].tableData.push(t)}),r.access.shared&&0!==r.access.shared.length&&r.access.shared.forEach(function(e){var a=Object.keys(e)[0],t={safe:a,folders:[],auth:e[a]};r.categories[1].tableData.push(t)}),r.access.apps&&0!==r.access.apps.length&&r.access.apps.forEach(function(e){var a=Object.keys(e)[0],t={safe:a,folders:[],auth:e[a]};r.categories[2].tableData.push(t)})}catch(a){console.log(a),r.isLoadingData=!1,e.errorMessage=m.getAParticularErrorMessage("ERROR_PROCESSING_DATA"),e.error("md")}},e.error=function(a){o.createModal(a,"error.html","SafesCtrl",e)},(null===u.getItem("allSafes")||void 0===u.getItem("allSafes"))&&(r.safes=[],t.getFolderData(null,"path=apps").then(function(e){"404"!==String(e.status)&&void 0!==e.data.keys&&null!==e.data.keys&&e.data.keys.forEach(function(e,a){r.safes.push(e)}),t.getFolderData(null,"path=users").then(function(e){"404"!==String(e.status)&&void 0!==e.data.keys&&null!==e.data.keys&&e.data.keys.forEach(function(e,a){r.safes.push(e)}),t.getFolderData(null,"path=shared").then(function(e){"404"!==String(e.status)&&void 0!==e.data.keys&&null!==e.data.keys&&e.data.keys.forEach(function(e,a){r.safes.push(e)}),u.setItem("allSafes",JSON.stringify(r.safes))})})})),e.requestDataFrSafes=function(a){try{r.isLoadingData=!0;var s="path="+e.currentCategory+"/"+a;t.getFolderData(null,s).then(function(s){if(m.ifAPIRequestSuccessful(s)){console.log("safes info",s),r.isLoadingData=!1;var i=s.data;if(i.keys){var o;switch(e.currentCategory){case"users":o=0;break;case"shared":o=1;break;case"apps":o=2;break;default:o=0}var n=p.findIndexInArray("safe",a,r.categories[o].tableData),l=[];i.keys.forEach(function(e){var a={name:e,appIndex:o,safeIndex:n};l.push(a)}),r.categories[o].tableData[n].folders=l,e.slideItems=r.categories[o].tableData[n].folders}}else e.slideItems=[],r.isLoadingData=!1,e.errorMessage=t.getTheRightErrorMessage(s),"Requested content not found!"!==e.errorMessage&&f("md")})}catch(i){console.log(i),e.errorMessage=m.getAParticularErrorMessage("ERROR_GENERAL"),f("md"),r.isLoadingData=!1}},e.init()}])}(angular.module("vault.features.SafesCtrl",["vault.services.SafesManagement","vault.services.Notifications"])),/*
* =========================================================================
* Copyright 2018 T-Mobile, US
* 
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* See the readme.txt file for additional language around disclaimer of warranties.
* =========================================================================
*/
function(){function e(e){e.state("documentation",{url:"/documentation",params:{safe:null},templateUrl:"app/Features/documentation/documentation.html",controller:"DocumentationCtrl"})}e.$inject=["$stateProvider"],angular.module("vault").config(e)}(),function(e){e.controller("DocumentationCtrl",["$scope","$rootScope","SessionStore","ListOfApi",function(e,a,t,s){e.init=function(){},e.expandBlock=!1,e.currentBlock=0,e.filteredApiList=[],e.expand=function(a){a!==e.currentBlock?(e.currentBlock=a,e.expandBlock=!0):e.expandBlock=!e.expandBlock},e.apiData=s.api_details,e.init(),e.documentationNavTags=[{displayName:"SAFES",navigationName:"safes",addComma:!1,show:!0},{displayName:"ADMIN",navigationName:"admin",addComma:!1,show:"true"==t.getItem("isAdmin")},{displayName:"HEALTH",navigationName:"health",addComma:!1,show:!1},{displayName:"ALERTS",navigationName:"alerts",addComma:!1,show:!1},{displayName:"DOCUMENTATION",navigationName:"documentation",addComma:!1,show:!0}]}])}(angular.module("vault.features.DocumentationCtrl",[])),/*
* =========================================================================
* Copyright 2018 T-Mobile, US
* 
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* See the readme.txt file for additional language around disclaimer of warranties.
* =========================================================================
*/
function(){function e(e){e.state("change-safe",{url:"/change-safe/",params:{safeObject:null},templateUrl:"app/Features/change-safe/change-safe.html",controller:"ChangeSafeCtrl"})}e.$inject=["$stateProvider"],angular.module("vault").config(e)}(),function(e){e.controller("ChangeSafeCtrl",["$scope","$rootScope","Modal","$timeout","fetchData","$http","UtilityService","Notifications","$window","$state","$stateParams","$q","SessionStore","vaultUtilityService","ModifyUrl","AdminSafesManagement",function(e,a,t,s,i,o,n,r,l,d,c,u,m,p,g,v){e.selectedGroupOption="",a.showDetails=!0,e.similarSafes=0,a.activeDetailsTab="details",e.typeDropdownDisable=!1,e.safeCreated=!1,e.isEditSafe=!1,e.awsRadioBtn={},e.usrRadioBtnVal="read",e.grpRadioBtnVal="read",e.awsRadioBtn.value="read",e.isEmpty=n.isObjectEmpty,e.awsConfPopupObj={role:"",bound_account_id:"",bound_region:"",bound_vpc_id:"",bound_subnet_id:"",bound_ami_id:"",bound_iam_instance_profile_arn:"",bound_iam_role_arn:"",policies:""},e.tableOptions=[{type:"User Safe"},{type:"Shared Safe"},{type:"Application Safe"}],e.radio={value:"read",options:[{text:"read"},{text:"write"},{text:"deny"}]},e.detailsNavTags=[{displayName:"DETAILS",navigationName:"details",addComma:!0,show:!0},{displayName:"PERMISSIONS",navigationName:"permissions",addComma:!1,show:!0}],e.goBack=function(){e.goBackToAdmin!==!0?a.showDetails===!0?d.go("admin"):(a.showDetails=!0,a.activeDetailsTab="details"):a.lastVisited?d.go(a.lastVisited):d.go("admin")},e.error=function(a){t.createModal(a,"error.html","ChangeSafeCtrl",e)},e.searchValue={userName:""},e.dropDownValArray={userNameDropdownVal:[]},e.totalDropdownVal=[],a.loadingDropDownData=!1;var f=function(a){e.dropDownValArray.userNameDropdownVal=[]};e.$watch("searchValue",function(t,s){if(n.getAppConstant("AD_USERS_DATA_URL")){var i="";if(void 0!=t.userName&&t.userName!=s.userName&&(i="userName"),void 0!=t[i]){var o=t[i].split(","),r=o[o.length-1];r=r.replace(" ",""),0===r.length&&(f(i),e.totalDropdownVal=[],a.loadingDropDownData=!0),"permission"===i&&(i="actionName"),e.getDropdownDataForPermissions(i,r)}else f(i)}},!0),e.getDropdownDataForPermissions=function(a,t){var s=JSON.parse(m.getItem("ADUsers"));if(void 0===s||null==s)p.getDropdownDataForPermissions(a,t).then(function(s,i){var o;s?(o=s,e.loadingDataFrDropdown=o.loadingDataFrDropdown,e.erroredFrDropdown=o.erroredFrDropdown,e.successFrDropdown=o.successFrDropdown,m.setItem("ADUsers",JSON.stringify(s)),h(a,t,o.dataFrmApi)):(o=i,e.commonErrorHandler(o.error,o.error||o.response.data,"getDropdownData"))});else{var i=s;void 0!==i.dataFrmApi&&null!==i.dataFrmApi&&h(a,t,i.dataFrmApi)}},e.commonErrorHandler=function(a,t,s){null===s&&(e.loadingDataFrRoles=!1,e.erroredInRoles=!0,e.successInRoles=!1,e.errorMsgFrRoles="Please try again, if the issue persists contact Vault Administrator",console.log("Data from service is not in expected Format ",a),(void 0!=t||null!=t)&&t.message&&(e.errorMsg=t.message,console.log(t.message)))};var h=function(t,s,i){var o=p.massageDataFrPermissionsDropdown(t,s,i,e.dropDownValArray);o.length>6?e.dropDownValArray.userNameDropdownVal=o.sort().slice(0,6):e.dropDownValArray.userNameDropdownVal=o,a.loadingDropDownData=!1};e.safeEditSafe=function(){e.goBackToAdmin=!0;e.goBack()},e.getPath=function(){var a="";switch(e.dropDownOptions.selectedGroupOption.type){case"Application Safe":a="apps";break;case"User Safe":a="users";break;case"Shared Safe":a="shared"}var t=a+"/"+n.formatName(e.safe.name);return t},e.editPermission=function(a,t,s,i){if(t){var o=!0;e.deletePermission(a,t,o,s,i)}},e.replaceSpaces=function(){e.safe.name=n.formatName(e.safe.name)},e.deletePermission=function(a,t,s,i,o){if(t)try{e.isLoadingData=!0;var l=e.getPath(),d="",c={};switch(a){case"users":d=v.deleteUserPermissionFromSafe,c={path:l,username:i};break;case"groups":d=v.deleteGroupPermissionFromSafe,c={path:l,groupname:i};break;case"AWSPermission":d=v.deleteAWSPermissionFromSafe,c={path:l,role:i}}d(c).then(function(t){if(n.ifAPIRequestSuccessful(t))try{if(e.isLoadingData=!1,s)e.addPermission(a,i,o);else{e.requestDataFrChangeSafe();var l=n.getAParticularSuccessMessage("MESSAGE_SAFE_DELETE");r.toast(i+"'s permission"+l)}}catch(d){console.log(d),e.errorMessage=n.getAParticularErrorMessage("ERROR_PROCESSING_DATA"),e.error("md")}else e.errorMessage=v.getTheRightErrorMessage(t),error("md")},function(a){console.log(a),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")})}catch(u){console.log(u),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")}},e.editAWSConfigurationDetails=function(t,s){if(t)try{e.isLoadingData=!0;var i=(e.getPath(),s),o=g.addUrlParameteres("getAwsConfigurationDetails",i);v.getAWSConfigurationDetails(null,o).then(function(t){if(n.ifAPIRequestSuccessful(t))try{e.editingAwsPermission={status:!0},e.awsConfPopupObj={role:s,bound_account_id:t.data.bound_account_id,bound_region:t.data.bound_region,bound_vpc_id:t.data.bound_vpc_id,bound_subnet_id:t.data.bound_subnet_id,bound_ami_id:t.data.bound_ami_id,bound_iam_instance_profile_arn:t.data.bound_iam_instance_profile_arn,bound_iam_role_arn:t.data.bound_iam_role_arn,policies:t.data.policies},e.policies=t.data.policies,e.awsRadioBtn.value=a.AwsPermissionsData.data[s],e.open("md")}catch(i){console.log(i),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_PROCESSING_DATA"),e.error("md")}else e.errorMessage=v.getTheRightErrorMessage(t),error("md")},function(a){console.log(a),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")})}catch(r){console.log(r),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")}},e.createSafe=function(){if(e.safeCreated===!0)e.editSafe();else if("Select Type"===e.dropDownOptions.selectedGroupOption.type)a.noTypeSelected=!0;else try{e.isLoadingData=!0;var t=e.getPath();e.safe.name=n.formatName(e.safe.name);var s={path:t,data:e.safe};v.createSafe(s).then(function(t){if(n.ifAPIRequestSuccessful(t))try{e.isLoadingData=!1,a.showDetails=!1,a.activeDetailsTab="permissions",e.safeCreated=!0,e.typeDropdownDisable=!0;var s=n.getAParticularSuccessMessage("MESSAGE_CREATE_SUCCESS"),i=JSON.parse(m.getItem("allSafes"));i.push(e.safe.name),m.setItem("allSafes",JSON.stringify(i)),r.toast(e.safe.name+" safe"+s)}catch(o){console.log(o),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_PROCESSING_DATA"),e.error("md")}else e.errorMessage=v.getTheRightErrorMessage(t),error("md")},function(a){console.log(a),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")})}catch(i){console.log(i),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")}},e.editSafe=function(){try{e.isLoadingData=!0;var t=e.getPath(),s={path:t,data:e.safe};v.editSafe(s).then(function(t){if(n.ifAPIRequestSuccessful(t))try{e.isLoadingData=!1,a.showDetails=!1,a.activeDetailsTab="permissions";var s=n.getAParticularSuccessMessage("MESSAGE_UPDATE_SUCCESS");r.toast(e.safe.name+" safe"+s)}catch(i){console.log(i),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_PROCESSING_DATA"),e.error("md")}else e.errorMessage=v.getTheRightErrorMessage(t),error("md")},function(a){console.log(a),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")})}catch(i){console.log(i),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")}},a.goToPermissions=function(){s(function(){e.isEditSafe?(a.showDetails=!1,a.activeDetailsTab="permissions",e.editSafe()):(a.noTypeSelected=!1,e.createSafe())})},e.requestDataFrChangeSafe=function(){if(e.isLoadingData=!0,c.safeObject){e.changeSafeHeader="EDIT SAFE",e.isEditSafe=!0,e.typeDropdownDisable=!0;try{var t="path="+c.safeObject.safeType+"/"+c.safeObject.safe,s=g.addUrlParameteres("getSafeInfo",t);v.getSafeInfo(null,s).then(function(t){if(n.ifAPIRequestSuccessful(t)){a.showDetails!==!0&&(document.getElementById("addUser").value="",document.getElementById("addGroup").value="");try{e.isLoadingData=!1;var s=t.data.data;e.UsersPermissionsData=s.users,e.GroupsPermissionsData=s.groups,a.AwsPermissionsData={data:s["aws-roles"]},e.safe={name:decodeURIComponent(s.name)||c.safeObject.safe,owner:decodeURIComponent(s.owner)||c.safeObject.owner||"",description:decodeURIComponent(s.description)||c.safeObject.description||"",type:decodeURIComponent(s.type)||c.safeObject.type||e.dropDownOptions.selectedGroupOption.type||""},e.selectedGroupOption=e.safe,e.dropDownOptions={selectedGroupOption:e.selectedGroupOption,tableOptions:e.tableOptions}}catch(i){console.log(i),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_PROCESSING_DATA"),e.error("md")}}else e.errorMessage=v.getTheRightErrorMessage(t),error("md")},function(t){a.showDetails!==!0&&(document.getElementById("addUser").value="",document.getElementById("addGroup").value=""),console.log(t),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")})}catch(i){a.showDetails!==!0&&(document.getElementById("addUser").value="",document.getElementById("addGroup").value=""),console.log(i),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")}}else{e.changeSafeHeader="CREATE SAFE",e.isEditSafe=!1;try{if(a.AwsPermissionsData={},""!==e.safe.name&&""!==e.safe.owner){var t="path="+e.getPath(),s=g.addUrlParameteres("getSafeInfo",t);v.getSafeInfo(null,s).then(function(t){if(n.ifAPIRequestSuccessful(t))try{e.isLoadingData=!1;var s=t.data.data;e.UsersPermissionsData=s.users,e.GroupsPermissionsData=s.groups,a.AwsPermissionsData={data:s["aws-roles"]}}catch(i){console.log(i),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_PROCESSING_DATA"),e.error("md")}else e.errorMessage=v.getTheRightErrorMessage(t),error("md")},function(a){console.log(a),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")})}else e.isLoadingData=!1}catch(i){console.log(i),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")}}},e.init=function(){e.safe={name:"",owner:"",description:"",type:""},e.dropDownOptions={selectedGroupOption:{type:"Select Type"},tableOptions:e.tableOptions},e.allSafesList=JSON.parse(m.getItem("allSafes")),e.myVaultKey=m.getItem("myVaultKey"),e.getDropdownDataForPermissions("",""),e.requestDataFrChangeSafe(),e.fetchUsers(),e.fetchGroups()},e.userNameValEmpty=!1,e.grpNameValEmpty=!1,e.fetchUsers=function(){},e.fetchGroups=function(){},e.addPermission=function(a,s,i){if(""!=s&&void 0!=s||"AwsRoleConfigure"==a)try{t.close(""),e.isLoadingData=!0;var o=e.getPath(),l="",d={};switch(null!==s&&void 0!==s&&(s=n.formatName(s)),null!==e.awsConfPopupObj.role&&void 0!==e.awsConfPopupObj.role&&(e.awsConfPopupObj.role=n.formatName(e.awsConfPopupObj.role)),a){case"users":l=v.addUserPermissionForSafe,d={path:o,username:s,access:i.toLowerCase()};break;case"groups":l=v.addGroupPermissionForSafe,d={path:o,groupname:s,access:i.toLowerCase()};break;case"AWSPermission":l=v.addAWSPermissionForSafe,d={path:o,role:s,access:i.toLowerCase()};break;case"AwsRoleConfigure":e.awsConfPopupObj.policies="",l=1==e.editingAwsPermission.status?v.updateAWSRole:v.addAWSRole,d=e.awsConfPopupObj}l(d).then(function(t){if(n.ifAPIRequestSuccessful(t))try{if(e.isLoadingData=!1,"AwsRoleConfigure"===a)e.addPermission("AWSPermission",e.awsConfPopupObj.role,i);else{e.requestDataFrChangeSafe();var o=n.getAParticularSuccessMessage("MESSAGE_ADD_SUCCESS");null!==s&&void 0!==s&&r.toast(s+"'s permission"+o)}}catch(l){console.log(l),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_PROCESSING_DATA"),e.error("md")}else e.errorMessage=v.getTheRightErrorMessage(t),error("md")},function(a){console.log(a),e.isLoadingData=!1,e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")})}catch(c){e.isLoadingData=!1,console.log(c),e.errorMessage=n.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")}},e.newAwsConfiguration=function(a){e.editingAwsPermission={status:!1},e.awsConfPopupObj={role:"",bound_account_id:"",bound_region:"",bound_vpc_id:"",bound_subnet_id:"",bound_ami_id:"",bound_iam_instance_profile_arn:"",bound_iam_role_arn:"",policies:""},e.open(a)},e.open=function(a){t.createModal(a,"changeSafePopup.html","ChangeSafeCtrl",e)},e.ok=function(){t.close("ok"),e.isLoadingData=!1},e.next=function(){e.addAWSRoleSafe()},e.cancel=function(){t.close("close"),e.isLoadingData=!1},e.init()}])}(angular.module("vault.features.ChangeSafeCtrl",["vault.services.AdminSafesManagement","vault.services.ModifyUrl"])),/*
* =========================================================================
* Copyright 2018 T-Mobile, US
* 
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* See the readme.txt file for additional language around disclaimer of warranties.
* =========================================================================
*/
function(){function e(e){e.state("admin",{url:"/admin",templateUrl:"app/Features/admin/admin.html",controller:"AdminCtrl"})}e.$inject=["$stateProvider"],angular.module("vault").config(e)}(),function(e){e.controller("AdminCtrl",["$scope","$rootScope","Modal","fetchData","$http","$window","$state","SessionStore","AdminSafesManagement","ModifyUrl","UtilityService","Notifications",function(e,a,t,s,i,o,n,r,l,d,c,u){e.filterValue="",e.isLoadingData=!1,e.fetchDataError=!1,e.dataForTable=[],e.tilesData={},e.tilesData.SafesData=[],e.safeType={type:""},e.tableOptions=[{type:"All safes",value:""},{type:"User Safe",value:"User Safe"},{type:"Shared Safe",value:"Shared Safe"},{type:"Application Safe",value:"Application Safe"}],e.adminNavTags=[{displayName:"SAFES",navigationName:"safes",addComma:!1,show:!0},{displayName:"ADMIN",navigationName:"admin",addComma:!1,show:"true"==r.getItem("isAdmin")},{displayName:"HEALTH",navigationName:"health",addComma:!1,show:!1},{displayName:"ALERTS",navigationName:"alerts",addComma:!1,show:!1},{displayName:"DOCUMENTATION",navigationName:"documentation",addComma:!1,show:!0}],e.showNotification=function(){console.log("showing notify"),t.createModal("md","notify.html","AdminCtrl",e)},e.selectedGroupOption=e.tableOptions[0],e.dropDownOptions={selectedGroupOption:e.selectedGroupOption,tableOptions:e.tableOptions},e.actionDropDownOptions={selectedGroupOption:{type:"Action"},tableOptions:[{type:"Edit",srefValue:{url:"change-safe",obj:"safeObject",myobj:"listDetails"}},{type:"Delete",srefValue:"href"}]};var m=function(){e.myVaultKey=r.getItem("myVaultKey"),e.myVaultKey?(e.errorMessage=c.getAParticularErrorMessage("ERROR_GENERAL"),e.requestDataFrAdmin()):n.go("signup")};e.filterUpdate=function(a){e.filterValue=a.value,"All safes"===a.value&&(e.filterValue=""),e.selectedGroupOption=a},e.massageDataForTiles=function(t,s){try{var i="";switch(s){case"apps":i="Application Safe";break;case"users":i="User Safe";break;case"shared":i="Shared Safe"}var o=e.tilesData.SafesData,n={};n.type=i,n.safes=[];for(var r=0;r<t.keys.length;r++)n.safes[r]={},n.safes[r].safe=decodeURIComponent(t.keys[r]),n.safes[r].safeType=decodeURIComponent(s);o.push(n),e.tilesData.SafesData=o,3===e.tilesData.SafesData.length&&(e.isLoadingData=!1,e.data=e.tilesData.SafesData,e.massageData(e.data))}catch(l){console.log(l),a.isLoadingData=!1,e.errorMessage=c.getAParticularErrorMessage("ERROR_PROCESSING_DATA"),e.error("md")}},e.massageData=function(t){try{e.dataForTable=[];for(var s=0;s<t.length;s++)for(var i=t[s].safes,o=t[s].type,n=0;n<i.length;n++){var r=i[n];r.type=o,r.safeType=i[n].safeType,e.dataForTable.push(r)}}catch(l){console.log(l),a.isLoadingData=!1,e.errorMessage=c.getAParticularErrorMessage("ERROR_PROCESSING_DATA"),e.error("md")}},e.adminEditFolder=function(a){var t="safeObject",s=a,i={};i[t]=s,e.isLoadingData=!0;var o="path="+i.safeObject.safeType+"/"+i.safeObject.safe,r=d.addUrlParameteres("getSafeInfo",o);l.getSafeInfo(null,r).then(function(a){if(c.ifAPIRequestSuccessful(a))try{e.isLoadingData=!1;var t=a.data.data;t.name&&t.owner&&t.description?n.go("change-safe",i):(e.isLoadingData=!1,e.errorMessage=c.getAParticularErrorMessage("ERROR_CONTENT_NOT_FOUND"),e.error("md"))}catch(s){console.log(s),e.isLoadingData=!1,e.errorMessage=c.getAParticularErrorMessage("ERROR_CONTENT_NOT_FOUND"),e.error("md")}else e.isLoadingData=!1,e.errorMessage=c.getAParticularErrorMessage("ERROR_CONTENT_NOT_FOUND"),e.error("md")},function(a){console.log(a),e.isLoadingData=!1,e.errorMessage=c.getAParticularErrorMessage("ERROR_CONTENT_NOT_FOUND"),e.error("md")})},e.deleteSafePopup=function(s){e.fetchDataError=!1,a.safeToDelete=s,t.createModal("md","deleteSafePopup.html","AdminCtrl",e)},a.deleteSafe=function(s){null!==a.safeToDelete&&void 0!==a.safeToDelete&&(s=a.safeToDelete),a.safeToDelete=null;try{e.isLoadingData=!0,t.close();var i="path="+s.safeType+"/"+s.safe,o=d.addUrlParameteres("deleteSafe",i);l.deleteSafe(null,o).then(function(a){if(c.ifAPIRequestSuccessful(a)){e.isLoadingData=!1;var t=c.getAParticularSuccessMessage("MESSAGE_SAFE_DELETE");u.toast(s.safe+t);try{for(var i=0;i<e.tilesData.SafesData.length;i++)if(e.tilesData.SafesData[i].type==s.type)for(var o=0;o<e.tilesData.SafesData[i].safes.length;o++)e.tilesData.SafesData[i].safes[o].safe==s.safe&&(e.tilesData.SafesData[i].safes.splice(o,1),e.data=e.tilesData.SafesData,e.massageData(e.data))}catch(n){console.log(n),e.errorMessage=c.getAParticularErrorMessage("ERROR_PROCESSING_DATA"),e.error("md")}}else e.errorMessage=l.getTheRightErrorMessage(a),e.error("md")},function(a){console.log(a),e.isLoadingData=!1,e.errorMessage=c.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")})}catch(n){console.log(n),e.isLoadingData=!1,e.errorMessage=c.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")}},e.error=function(a){t.createModal(a,"error.html","AdminCtrl",e)},a.close=function(){t.close()},a.cancel=function(){t.close()},e.requestDataFrAdmin=function(){var a=["apps","shared","users"];a.forEach(function(a){try{var t="path="+a,s=d.addUrlParameteres("safesList",t);e.isLoadingData=!0,l.getCompleteSafesList(null,s).then(function(t){if(c.ifAPIRequestSuccessful(t)){e.isLoadingData=!1;try{e.massageDataForTiles(t.data,a)}catch(s){console.log(s),e.error("md")}}else e.errorMessage=l.getTheRightErrorMessage(t),e.error("md")},function(t){404!==t.status?(e.isLoadingData=!1,e.errorMessage=c.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")):e.massageDataForTiles([],a)})}catch(i){e.isLoadingData=!1,e.errorMessage=c.getAParticularErrorMessage("ERROR_GENERAL"),e.error("md")}})},m()}])}(angular.module("vault.features.AdminCtrl",["vault.services.fetchData","vault.services.ModifyUrl","vault.services.Notifications"])),function(e){e.controller("AppCtrl",["$scope","$rootScope","RefreshHandler","$state",function(e,a,t,s){a.goTo=function(e){try{s.go(e)}catch(a){console.log(a)}},a.$on("$stateChangeSuccess",function(e,t,s,i,o){a.lastVisited=i.name}),a.modalParent={},t.loadFromWebstorage(),a.$on("$stateChangeStart",function(e,t,s,i){a.modalParent.previousState=i.name,a.modalParent.currentState=t.name})}])}(angular.module("vault")),/*
* =========================================================================
* Copyright 2018 T-Mobile, US
* 
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* See the readme.txt file for additional language around disclaimer of warranties.
* =========================================================================
*/
function(){function e(e){e.debug("runBlock end")}e.$inject=["$log"],angular.module("vault").config(["$httpProvider",function(e){e.interceptors.push("httpInterceptor")}]).run(e)}(),/*
* =========================================================================
* Copyright 2018 T-Mobile, US
* 
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* See the readme.txt file for additional language around disclaimer of warranties.
* =========================================================================
*/
function(){function e(e,a){a.otherwise("/signup")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("vault").config(e)}(),/*
* =========================================================================
* Copyright 2018 T-Mobile, US
* 
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* See the readme.txt file for additional language around disclaimer of warranties.
* =========================================================================
*/
function(){angular.module("vault").constant("malarkey",malarkey).constant("moment",moment)}(),/*
* =========================================================================
* Copyright 2018 T-Mobile, US
* 
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* See the readme.txt file for additional language around disclaimer of warranties.
* =========================================================================
*/
function(){function e(e,a){e.debugEnabled(!0),a.allowHtml=!0,a.timeOut=2e3,a.positionClass="custom-toast",a.tapToDismiss=!0,a.preventDuplicates=!0,a.progressBar=!1}e.$inject=["$logProvider","toastrConfig"],angular.module("vault").config(e)}(),angular.module("vault").run(["$templateCache",function(e){e.put("app/Features/admin/admin.html",' <header></header> <sidebar></sidebar> <script type="text/ng-template" id="deleteSafePopup.html"> <loading-state ng-if="isLoadingModalData"></loading-state> <div ng-if="!isLoadingModalData" class="top-lg-sep"> <div class="top-lg-sep"> <div class="common-header-label text-center">Confirmation</div> </div> <div class="top-lg-sep notification-text">Are you sure you want to delete this safe?</div> <div class="text-center bottom-lg-sep top-lg-sep notification-button"> <div class="clearfix bottom-sm-sep"> <button ng-click="deleteSafe(safeToDelete)" class="common-btn btn btn-primary btn-lg">DELETE</button> </div> <div class="clearfix"> <button ng-click="close()" class="link-style common-btn btn btn-default btn-lg">CANCEL</button> </div> </div> </div> </script> <script type="text/ng-template" id="error.html"> <div class="row"> <div class="top-lg-sep"> <div class="common-header-label text-center">Error</div> </div> <div class="top-lg-sep notification-text">{{errorMessage}}</div> </div> <div class="text-center bottom-lg-sep top-lg-sep notification-button"> <div class="clearfix bottom-sm-sep"> <button ng-click="close()" class="link-style common-btn btn btn-primary btn-lg">Close</button> </div> </div> </script> <script type="text/ng-template" id="notify.html"> <div class="row"> <div class="top-lg-sep"> <div class="common-header-label text-center">Notification</div> </div> <div class="top-lg-sep notification-text">Admin is not allowed to view inside safe</div> </div> <div class="text-center bottom-lg-sep top-lg-sep notification-button"> <div class="clearfix bottom-sm-sep"> <button ng-click="close()" class="link-style common-btn btn btn-primary btn-lg">Close</button> </div> </div> </script> <div class="container-fluid"> <div class="container-fluid-wrapper curved"> <div class="page-header-container admin"> <div class="header-inner-container"> <nav-bar active-tab="admin" gotopage="goToPage" nav-tags="adminNavTags"></nav-bar> <div class="page-header-text">ADMIN</div> </div> </div> <div class="page-content-container admin"> <div class="right search-bar-container"> <div class="search-bar"> <div class="search-box"> <div class="search-icon"> <div class="icon-search"></div> </div> <div class="search-input-wrapper"> <input type="text" placeholder="SEARCH" ng-model="searchValue" class="search-input-box"> </div> </div> </div> </div> <md-content> <md-tabs md-dynamic-height="" md-border-bottom=""> <md-tab label="Safe Management"> <md-content ng-init="displayGrid" class="md-padding md-content-wrapper"> <div class="md-content-inner-wrapper"> <div class="admin slim-container"> <div class="dropdown-wrapper"> <drop-down drop-down-options="dropDownOptions"></drop-down> </div> <div class="right hide-in-mobile"> <div ng-click="displayGrid = !displayGrid" class="view-controller-img"><img src="assets/images/button_grid.png" ng-if="!displayGrid"><img src="assets/images/button_list.png" ng-if="displayGrid"></div> </div> <div ng-click="goTo(\'change-safe\')" class="function-text link-style option right"> <div class="action-icon-wrapper static"> <div class="rotate glyphicon glyphicon-remove-circle"></div> </div> <div class="create-link middle-block hide-in-mobile"> <div class="text">CREATE NEW SAFE</div> </div> </div> </div> <loading-state ng-if="isLoadingData"> </loading-state> <div ng-if="!displayGrid" class="admin new-container page-content-container"> <div ng-if="(dataForTable.length === 0) &amp;&amp; (isLoadingData)" class="unavailable-text">No Safe Available </div> <div ng-init="numOfTiles = item.safes.length" ng-repeat="item in data | orderBy : \'type\' | filter : {\'type\' : dropDownOptions.selectedGroupOption.value}" class="tiles-division-container"> <div class="tiles-division-title">{{item.type}}<span ng-if="numOfTiles &gt; 1">s</span> ({{numOfTiles}}) </div> <tiles data="item.safes" num-of-tiles="numOfTiles" tile-func-available="true" img="\'safe.png\'" search-value="searchValue" tile-details="showNotification" parent="admin" edit-folder="adminEditFolder(param)" delete-folder="deleteSafePopup(param)" loading="isLoadingData"></tiles> </div> </div> <div ng-if="displayGrid" class="admin new-container page-content-container"> <div class="compressed-table"> <listtable data="dataForTable" admin="true" search-object="{\'type\' : dropDownOptions.selectedGroupOption.value}" search-value="searchValue" loading="isLoadingData" edit-folder="adminEditFolder(param)" delete-folder="deleteSafe(param)"></listtable> </div> </div> </div> </md-content> </md-tab> </md-tabs> </md-content> </div> </div> </div>'),e.put("app/Features/change-safe/change-safe.html",' <header></header> <sidebar></sidebar> <script type="text/ng-template" id="error.html"> <div class="row"> <div class="top-lg-sep"> <div class="common-header-label text-center">Error</div> </div> <div class="top-lg-sep notification-text">{{errorMessage}}</div> </div> <div class="text-center bottom-lg-sep top-lg-sep notification-button"> <div class="clearfix bottom-sm-sep"> <button ng-click="cancel()" class="link-style common-btn btn btn-primary btn-lg">Close</button> </div> </div> </script> <script type="text/ng-template" id="changeSafePopup.html"> <div class="modal-sep"> <div class="common-header-label text-center">Configure your app </div> </div> <div class="left-lg-sep right-lg-sep"> <div class="common-form modal-inner-wrapper aws"> <div class="common-form-row"> <div class="details-input-group"> <div class="common-form-label">Role Name<span>*</span></div> <input value="{{awsConfPopupObj.role}}" restrict-special-char ng-model="awsConfPopupObj.role" placeholder="Role name" class="form-control input-box-style"> </div> </div> <div class="aws-conf clearfix"> <div class="font-type-normal">Please fill at least one of the following</div> <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 common-form-row"> <div class="details-input-group"> <div class="common-form-label">Account ID</div> <input value="{{awsConfPopupObj.bound_account_id}}" restrict-special-char placeholder="Account ID" ng-model="awsConfPopupObj.bound_account_id" class="form-control input-box-style"> </div> </div> <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 common-form-row"> <div class="details-input-group"> <div class="common-form-label">Region</div> <input value="{{awsConfPopupObj.region}}" restrict-special-char placeholder="Region ID" ng-model="awsConfPopupObj.region" class="form-control input-box-style"> </div> </div> <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 common-form-row"> <div class="details-input-group"> <div class="common-form-label">VPC ID</div> <input value="{{awsConfPopupObj.bound_vpc_id}}" restrict-special-char placeholder="VPC ID" ng-model="awsConfPopupObj.bound_vpc_id" class="form-control input-box-style"> </div> </div> <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 common-form-row"> <div class="details-input-group"> <div class="common-form-label">Subnet ID</div> <input value="{{awsConfPopupObj.bound_subnet_id}}" restrict-special-char placeholder="Subnet ID" ng-model="awsConfPopupObj.bound_subnet_id" class="form-control input-box-style"> </div> </div> <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 common-form-row"> <div class="details-input-group"> <div class="common-form-label">AMI ID</div> <input value="{{awsConfPopupObj.bound_ami_id}}" restrict-special-char placeholder="AMI ID" ng-model="awsConfPopupObj.bound_ami_id" class="form-control input-box-style"> </div> </div> <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 common-form-row"> <div class="details-input-group"> <div class="common-form-label">Instance Profile ARN</div> <input value="{{awsConfPopupObj.bound_iam_instance_profile_arn}}" restrict-special-char placeholder="Instance Profile ARN" ng-model="awsConfPopupObj.bound_iam_instance_profile_arn" class="form-control input-box-style"> </div> </div> <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 common-form-row"> <div class="details-input-group"> <div class="common-form-label">IAM Role ARN</div> <input value="{{awsConfPopupObj.bound_iam_role_arn}}" restrict-special-char placeholder="IAM Role ARN" ng-model="awsConfPopupObj.bound_iam_role_arn" class="form-control input-box-style"> </div> </div> </div> <div class="aws common-form"> <div class="common-form-row"> <div class="aws-conf clearfix"> <div class="details-input-group"> <div class="common-form-label">Permission</div> <div class="common-radio-group"> <radio-buttons data="radio" value="awsRadioBtn.value" state="true"></radio-buttons> </div> </div> </div> </div> </div> </div> </div> <div class="text-center bottom-lg-sep modal-sep aws"> <div class="clearfix bottom-sm-sep"> <button ng-click="addPermission(\'AwsRoleConfigure\', awsConfPopupObj.role, awsRadioBtn.value)" ng-disabled="!(awsConfPopupObj.role.length &gt; 0 &amp;&amp; (awsConfPopupObj.bound_account_id.length &gt; 0 || awsConfPopupObj.region.length &gt; 0 || awsConfPopupObj.bound_vpc_id.length &gt; 0 || awsConfPopupObj.bound_subnet_id.length &gt; 0 || awsConfPopupObj.bound_ami_id.length &gt; 0 || awsConfPopupObj.bound_iam_instance_profile_arn.length &gt; 0 || awsConfPopupObj.bound_iam_role_arn.length &gt; 0) )" class="common-btn btn btn-primary btn-lg">{{editingAwsPermission.status == true ? "Update" : "Create"}}</button> </div> <div class="clearfix"> <button ng-click="cancel()" class="link-style common-btn btn btn-default btn-lg">Cancel</button> </div> </div> </script> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> <div class="container-fluid common-main-content route-page change-safe-wrapper"> <div class="container-fluid-wrapper curved"> <div class="page-header-container"> <div ng-class="{\'no-tabs-header\' : showDetails}" ng-cloak="" class="header-inner-container header-without-tab"> <div class="clearfix"> <div ng-click="goBack()" class="left-arrow glyphicon glyphicon-menu-left left common-header-label"></div> <div class="left-sm-sep left page-header-text">{{changeSafeHeader}} <span class="safe-in-edit">{{safe.name}}</span></div> </div> <nav-bar active-tab="details" gotopage="goToPage" nav-tags="detailsNavTags" ng-if="activeDetailsTab == \'details\'"></nav-bar> <nav-bar active-tab="permissions" gotopage="goToPage" nav-tags="detailsNavTags" ng-if="activeDetailsTab == \'permissions\'"> </nav-bar> </div> </div> <div ng-class="{\'no-tabs-body\' : showDetails}" ng-cloak="" class="page-content-container"> <div ng-if="showDetails" ng-cloak="" ng-show="showDetails" class="page-content-container details"> <form name="createSafeDetails" ng-submit="goToPermissions()" class="row"> <div class="page-content-container"> <div class="clearfix details-wrapper"> <loading-state ng-if="isLoadingData"></loading-state> <div class="safe-left-content-container border-right col-lg-6 col-sm-5"> <div class="common-section-label">SAFE DETAILS</div> <div class="common-form"> <div class="row"> <div class="common-form-row col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="details-input-group"> <div class="common-form-label">Name</div> <input ng-model="safe.name" ng-disabled="changeSafeHeader == \'EDIT SAFE\' || safeCreated" ng-change="replaceSpaces()" restrict-special-char="" placeholder="Name of the safe" required="" class="form-control input-box-style"> <div ng-if="!isEditSafe &amp;&amp; similarSafes === 0 &amp;&amp; safe.name.length !== 0 &amp;&amp; !typeDropdownDisable" class="status-text available">Available</div> <div ng-if="!isEditSafe &amp;&amp; similarSafes !== 0 &amp;&amp; similarSafes !== allSafesList.length" class="status-text exists">Safe Exists</div> <div ng-repeat="item in similarSafes = ( allSafesList | filter : safe.name:true ).length" class="existance-check">{{similarSafes}} </div> </div> </div> </div> <div class="row middle"> <div class="common-form-row clearfix"> <div class="col-lg-5 col-md-12 col-sm-12 col-xs-12 full-row-fix"> <div class="row"> <div class="details-input-group col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="common-form-label">Type</div> <drop-down drop-down-options="dropDownOptions" dropdown-disable="typeDropdownDisable" error="noTypeSelected"></drop-down> </div> </div> </div> <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12 full-row-fix col-lg-offset-1 col-lg-offset-1"> <div class="row"> <div class="details-input-group left-sm-sep col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="common-form-label">Owner</div> <input ng-model="safe.owner" name="ownerEmail" type="email" placeholder="Email address of the safe owner" required="" class="form-control input-box-style"> </div> </div> </div> </div> </div> <div class="row"> <div class="common-form-row col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="details-input-group"> <div class="common-form-label">Description</div> <textarea ng-model="safe.description" placeholder="A description about the safe" required="" class="form-control input-box-style details-textarea"></textarea> </div> </div> </div> </div> </div> <div id="full-height" class="safe-right-content-container col-lg-6 col-sm-7"> <div class="safe-detail-container-block"> <div class="safe-img-container text-center"><img></div> <div class="font-type-normal">A Safe is a logical unit to store the secrets. All the safes are created within Vault. You can control access only at the safe level. As a vault administrator you can manage safes but cannot view the content of the safe. You can create a safe for individuals, or a group or for an application. Use the permissions tab to control the access to safe.</div> </div> </div> </div> <div class="clearfix btn-section"> <div class="right col-lg-6 col-md-6 col-sm-6 col-xs-12 bottom-lg-sep top-lg-sep"> <div class="right"> <button type="submit" class="common-btn btn btn-primary btn-lg">Next</button> </div> <div class="right right-sm-sep"> <button type="button" ng-click="goBack()" class="link-style common-btn btn btn-default btn-lg col-lg-6 col-md-6 col-sm-6 col-xs-12">Cancel</button> </div> </div> </div> </div> </form> </div> <div ng-if="!showDetails" ng-show="!showDetails" ng-cloak="" class="page-content-container permissions"> <md-content> <md-tabs md-dynamic-height="" md-border-bottom=""> <md-tab label="Users"> <md-content class="md-padding"> <div class="new-container page-content-container"> <div class="row change-safe"> <div class="add-block container name col-lg-4 col-md-4 col-sm-12 col-xs-12"> <input type="text" auto-complete="" restrict-special-char="" ui-items="dropDownValArray.userNameDropdownVal" placeholder="Username" ng-model="userNameVal" id="addUser" ng-class="{error: userNameValEmpty &amp;&amp; (userNameVal == \'\' || userNameVal == undefined)}" ng-change="searchValue.userName = userNameVal; userNameValEmpty = false;" class="form-control input-box-style form-control"> </div> <div class="add-block container radio-inputs col-lg-4 col-md-4 col-sm-12 col-xs-12"> <radio-buttons data="radio" value="usrRadioBtnVal" state="true"></radio-buttons> </div> <div class="add-block container actions col-lg-4 col-md-4 col-sm-12 col-xs-12"> <button ng-click="addPermission(\'users\',userNameVal,usrRadioBtnVal);userNameValEmpty = true" class="btn btn-primary btn-lg">ADD USER</button> </div> </div> <div ng-if="isEmpty(UsersPermissionsData)" class="unavailable-text">No users are given permission to access this safe,<br> add users to access the safe </div> <div ng-if="!isEmpty(UsersPermissionsData)" class="row change-safe-table-container"> <loading-state ng-if="isLoadingData"></loading-state> <div class="row change-safe header"> <div class="container name col-lg-4 col-md-4 col-sm-4 col-xs-4">NAME </div> <div class="container radio-inputs col-lg-4 col-md-4 col-sm-4 col-xs-4">ACTION</div> </div> <div class="change-safe-table-data row"> <div ng-show="!isLoadingData" ng-init="editPermissionItem = false; activeItem = false; radioValue = value" ng-class="{\'grayBackground\' : activeItem == true}" ng-repeat="(key, value) in UsersPermissionsData" class="row change-safe item hide-in-mobile"> <div ng-class="{\'inactive\' : editPermissionItem == false}" class="container name col-lg-4 col-md-4 col-sm-4 col-xs-4">{{key}}</div> <div class="container radio-inputs col-lg-4 col-md-4 col-sm-4 col-xs-4"> <radio-buttons data="radio" value="radioValue" state="editPermissionItem"></radio-buttons> </div> <div class="container actions col-lg-4 col-md-4 col-sm-4 col-xs-4"> <div class="down"> <div ng-click="deletePermission(\'users\', true, false, key, radioValue)" class="list-icon icon-delete"> </div> </div> <div class="down hide-in-mobile edit"> <div ng-click="editPermissionItem = !editPermissionItem; activeItem = !activeItem" ng-class="{\'inactive\' : editPermissionItem == true, \'hide-icon\' : editPermissionItem == true}" class="list-icon icon-mode_edit"></div> <div ng-click="editPermissionItem = !editPermissionItem; activeItem = !activeItem; radioValue = value" ng-class="{\'inactive\' : editPermissionItem == true, \'hide-icon\' : editPermissionItem == false}" class="list-icon icon-cross"></div> </div> <div class="down save"> <div ng-click="editPermission(\'users\', editPermissionItem, key, radioValue); editPermissionItem ? editPermissionItem = !editPermissionItem : editPermissionItem = editPermissionItem" ng-class="{\'inactive\' : editPermissionItem == false}" class="list-icon"> SAVE</div> </div> </div> </div> <div ng-show="!isLoadingData" ng-init="editPermissionItem = true; activeItem = false; radioValue = value" ng-class="{\'grayBackground\' : activeItem == true}" ng-repeat="(key, value) in UsersPermissionsData" class="row change-safe item hide-in-tablet-up"> <div ng-class="{\'inactive\' : editPermissionItem == false}" class="container name col-lg-4 col-md-4 col-sm-4 col-xs-4">{{key}}</div> <div class="container radio-inputs col-lg-4 col-md-4 col-sm-4 col-xs-4"> <drop-down drop-down-options="radio" value="radioValue" error="noTypeSelected"></drop-down> </div> <div class="container actions col-lg-4 col-md-4 col-sm-4 col-xs-4"> <div class="down"> <div ng-click="deletePermission(\'users\', editPermissionItem, false, key, radioValue)" ng-class="{\'inactive\' : editPermissionItem == false}" class="list-icon icon-delete"> </div> </div> <div class="down hide-in-mobile edit"> <div ng-click="editPermissionItem = !editPermissionItem; activeItem = !activeItem" ng-class="{\'inactive\' : editPermissionItem == true, \'hide-icon\' : editPermissionItem == true}" class="list-icon icon-mode_edit"> </div> <div ng-click="editPermissionItem = !editPermissionItem; activeItem = !activeItem; radioValue = value" ng-class="{\'inactive\' : editPermissionItem == true, \'hide-icon\' : editPermissionItem == false}" class="list-icon icon-cross"></div> </div> <div class="down save"> <div ng-click="editPermission(\'users\', editPermissionItem, key, radioValue); editPermissionItem ? editPermissionItem = !editPermissionItem : editPermissionItem = editPermissionItem" ng-class="{\'inactive\' : editPermissionItem == false}" class="list-icon"> SAVE </div> </div> </div> </div> </div> </div> </div> </md-content> </md-tab> <md-tab label="Groups"> <md-content class="md-padding"> <div class="new-container page-content-container"> <div class="row change-safe"> <div class="add-block container name col-lg-4 col-md-4 col-sm-12 col-xs-12"> <input id="addGroup" placeholder="Group Name" restrict-special-char="" ng-model="grpNameVal" ng-class="{error: grpNameValEmpty &amp;&amp; (grpNameVal == \'\' || grpNameVal == undefined)}" ng-change="grpNameValEmpty = false;" class="form-control input-box-style form-control"> </div> <div class="add-block container radio-inputs col-lg-4 col-md-4 col-sm-12 col-xs-12"> <radio-buttons data="radio" value="grpRadioBtnVal" state="true"></radio-buttons> </div> <div class="add-block container actions col-lg-4 col-md-4 col-sm-12 col-xs-12"> <button ng-click="addPermission(\'groups\', grpNameVal,grpRadioBtnVal);grpNameValEmpty = true" class="btn btn-primary btn-lg">ADD GROUP</button> </div> </div> <div ng-if="isEmpty(GroupsPermissionsData)" class="unavailable-text">No groups are given permission to access this safe,<br> add groups to access the safe</div> <div ng-if="!isEmpty(GroupsPermissionsData)" class="row change-safe-table-container"> <loading-state ng-if="isLoadingData"></loading-state> <div class="row change-safe header"> <div class="container name col-lg-4 col-md-4 col-sm-4 col-xs-4">NAME</div> <div class="container radio-inputs col-lg-4 col-md-4 col-sm-4 col-xs-4">ACTION</div> </div> <div class="change-safe-table-data row"> <div ng-show="!isLoadingData" ng-init="editPermissionItem = false; activeItem = false; radioValue = value" ng-class="{\'grayBackground\' : activeItem == true}" ng-repeat="(key, value) in GroupsPermissionsData" class="row change-safe item hide-in-mobile"> <div ng-class="{\'inactive\' : editPermissionItem == false}" class="container name col-lg-4 col-md-4 col-sm-4 col-xs-4">{{key}}</div> <div class="container radio-inputs col-lg-4 col-md-4 col-sm-4 col-xs-4"> <radio-buttons data="radio" value="radioValue" state="editPermissionItem"></radio-buttons> </div> <div class="container actions col-lg-4 col-md-4 col-sm-4 col-xs-4"> <div class="down"> <div ng-click="deletePermission(\'groups\', true, false, key, radioValue)" class="list-icon icon-delete"> </div> </div> <div class="down hide-in-mobile edit"> <div ng-click="editPermissionItem = !editPermissionItem; activeItem = !activeItem" ng-class="{\'inactive\' : editPermissionItem == true, \'hide-icon\' : editPermissionItem == true}" class="list-icon icon-mode_edit"></div> <div ng-click="editPermissionItem = !editPermissionItem; activeItem = !activeItem; radioValue = value" ng-class="{\'inactive\' : editPermissionItem == true, \'hide-icon\' : editPermissionItem == false}" class="list-icon icon-cross"></div> </div> <div class="down save"> <div ng-click="editPermission(\'groups\', editPermissionItem, key, radioValue); editPermissionItem ? editPermissionItem = !editPermissionItem : editPermissionItem = editPermissionItem" ng-class="{\'inactive\' : editPermissionItem == false}" class="list-icon"> SAVE</div> </div> </div> </div> <div ng-show="!isLoadingData" ng-init="editPermissionItem = true; activeItem = false; radioValue = value" ng-class="{\'grayBackground\' : activeItem == true}" ng-repeat="(key, value) in GroupsPermissionsData" class="row change-safe item hide-in-tablet-up"> <div ng-class="{\'inactive\' : editPermissionItem == false}" class="container name col-lg-4 col-md-4 col-sm-4 col-xs-4">{{key}}</div> <div class="container radio-inputs col-lg-4 col-md-4 col-sm-4 col-xs-4"> <drop-down drop-down-options="radio" value="radioValue" error="noTypeSelected"></drop-down> </div> <div class="container actions col-lg-4 col-md-4 col-sm-4 col-xs-4"> <div class="down"> <div ng-click="deletePermission(\'groups\', editPermissionItem, false, key, radioValue)" ng-class="{\'inactive\' : editPermissionItem == false}" class="list-icon icon-delete"></div> </div> <div class="down hide-in-mobile edit"> <div ng-click="editPermissionItem = !editPermissionItem; activeItem = !activeItem" ng-class="{\'inactive\' : editPermissionItem == true, \'hide-icon\' : editPermissionItem == true}" class="list-icon icon-mode_edit"></div> <div ng-click="editPermissionItem = !editPermissionItem; activeItem = !activeItem; radioValue = value" ng-class="{\'inactive\' : editPermissionItem == true, \'hide-icon\' : editPermissionItem == false}" class="list-icon icon-cross"></div> </div> <div class="down save"> <div ng-click="editPermission(\'groups\', editPermissionItem, key, radioValue); editPermissionItem ? editPermissionItem = !editPermissionItem : editPermissionItem = editPermissionItem" ng-class="{\'inactive\' : editPermissionItem == false}" class="list-icon"> SAVE </div> </div> </div> </div> </div> </div> </div> </md-content> </md-tab> <md-tab label="AWS Applications"> <md-content class="md-padding"> <div class="new-container page-content-container"> <div class="row change-safe"> <div class="container actions"> <div ng-click="newAwsConfiguration(\'md\')" class="function-text right link-style"> <div class="add-icon-container action-icon-wrapper static"> <div class="rotate glyphicon glyphicon-remove-circle"> </div> </div> <div class="text">ADD AWS CONFIGURATION</div> </div> </div> </div> <div ng-if="isEmpty(AwsPermissionsData.data)" class="unavailable-text">No applications are given permission to access this safe,<br> add applications to access the safe</div> <div ng-if="!isEmpty(AwsPermissionsData.data)" class="change-safe-table-container"> <loading-state ng-if="isLoadingData"></loading-state> <div class="row change-safe header"> <div class="container name col-lg-4 col-md-4 col-sm-4 col-xs-4">NAME </div> <div class="container radio-inputs col-lg-4 col-md-4 col-sm-4 col-xs-4">ACTION</div> </div> <div class="change-safe-table-data row"> <div ng-if="!isLoadingData" ng-init="editPermissionItem = false; activeItem = false; radioValue = value" ng-class="{\'grayBackground\' : activeItem == true}" ng-repeat="(key, value) in AwsPermissionsData.data" class="row change-safe item hide-in-mobile"> <div ng-click="editAWSConfigurationDetails(editPermissionItem, key)" ng-class="{\'inactive\' : editPermissionItem == false, \'pink-text\' : editPermissionItem == true}" class="container name col-lg-4 col-md-4 col-sm-4 col-xs-4">{{key}}</div> <div class="container radio-inputs col-lg-4 col-md-4 col-sm-4 col-xs-4"> <radio-buttons data="radio" value="radioValue" state="editPermissionItem"></radio-buttons> </div> <div class="container actions col-lg-4 col-md-4 col-sm-4 col-xs-4"> <div class="down"> <div ng-click="deletePermission(\'AWSPermission\', true, false, key, radioValue)" class="list-icon icon-delete"></div> </div> <div class="down edit"> <div ng-click="editPermissionItem = !editPermissionItem; activeItem = !activeItem" ng-class="{\'inactive\' : editPermissionItem == true, \'hide-icon\' : editPermissionItem == true}" class="list-icon icon-mode_edit"></div> <div ng-click="editPermissionItem = !editPermissionItem; activeItem = !activeItem; radioValue = value" ng-class="{\'inactive\' : editPermissionItem == true, \'hide-icon\' : editPermissionItem == false}" class="list-icon icon-cross"></div> </div> <div class="down save"> <div ng-click="editPermission(\'AWSPermission\', editPermissionItem, key, radioValue); editPermissionItem ? editPermissionItem = !editPermissionItem : editPermissionItem = editPermissionItem" ng-class="{\'inactive\' : editPermissionItem == false}" class="list-icon"> SAVE </div> </div> </div> </div> <div ng-if="!isLoadingData" ng-init="editPermissionItem = true; activeItem = false; radioValue = value" ng-class="{\'grayBackground\' : activeItem == true}" ng-repeat="(key, value) in AwsPermissionsData.data" class="row change-safe item hide-in-tablet-up"> <div ng-click="editAWSConfigurationDetails(editPermissionItem, key)" ng-class="{\'inactive\' : editPermissionItem == false, \'pink-text\' : editPermissionItem == true}" class="container name col-lg-4 col-md-4 col-sm-4 col-xs-4">{{key}}</div> <div class="container radio-inputs col-lg-4 col-md-4 col-sm-4 col-xs-4"> <drop-down drop-down-options="radio" value="radioValue" error="noTypeSelected"></drop-down> </div> <div class="container actions col-lg-4 col-md-4 col-sm-4 col-xs-4"> <div class="down"> <div ng-click="deletePermission(\'AWSPermission\', editPermissionItem, false, key, radioValue)" ng-class="{\'inactive\' : editPermissionItem == false}" class="list-icon icon-delete"> </div> </div> <div class="down hide-in-mobile edit"> <div ng-click="editPermissionItem = !editPermissionItem; activeItem = !activeItem" ng-class="{\'inactive\' : editPermissionItem == true, \'hide-icon\' : editPermissionItem == true}" class="list-icon icon-mode_edit"></div> <div ng-click="editPermissionItem = !editPermissionItem; activeItem = !activeItem; radioValue = value" ng-class="{\'inactive\' : editPermissionItem == true, \'hide-icon\' : editPermissionItem == false}" class="list-icon icon-cross"></div> </div> <div class="down save"> <div ng-click="editPermission(\'AWSPermission\', editPermissionItem, key, radioValue); editPermissionItem ? editPermissionItem = !editPermissionItem : editPermissionItem = editPermissionItem" ng-class="{\'inactive\' : editPermissionItem == false}" class="list-icon"> SAVE</div> </div> </div> </div> </div> </div> </div> </md-content> </md-tab> </md-tabs> </md-content> <div class="clearfix btn-section"> <div class="right col-lg-6 col-md-6 col-sm-6 col-xs-12 bottom-lg-sep top-lg-sep"> <div class="right"> <button type="button" ng-click="safeEditSafe()" class="common-btn btn btn-primary btn-lg">Done</button> </div> </div> </div> </div> </div> </div> </div>'),e.put("app/Features/documentation/documentation.html",' <header></header> <sidebar></sidebar> <div class="container-fluid documentation"> <div class="container-fluid-wrapper curved"> <div class="page-header-container"> <div class="header-inner-container"> <nav-bar active-tab="documentation" gotopage="goToPage" nav-tags="documentationNavTags"></nav-bar> <div class="page-header-text">DOCUMENTATION</div> <div class="page-sub-header">Base URL : <span>https://example.com/vault</span> </div> <div class="right search-bar-container"> <div class="search-bar"> <div class="search-box"> <div class="search-icon"> <div class="icon-search"></div> </div> <div class="search-input-wrapper"> <input type="text" placeholder="SEARCH" ng-model="searchValue" class="search-input-box input-box-style"> </div> </div> </div> </div> </div> </div> <div class="page-content-container new-container"> <div class="documentation-table-container"> <div class="header-block"> <div class="cell col-lg-4 col-md-4"> NAME</div> <div class="cell col-lg-6 col-md-6"> URL</div> <div class="cell col-lg-2 col-md-2"> METHOD </div> </div> <div class="data-block"> <div ng-if="filteredApiList.length === 0" class="unavailable-text">NO API FOUND </div> <div ng-repeat="item in filteredApiList = (apiData | filter : searchValue) track by $index" class="table-row"><span ng-class="{\'down\' : expandBlock == true &amp;&amp; $index == currentBlock}" class="caret"></span> <div ng-click="expand($index)" class="table-row-data"> <div class="cell name col-lg-4 col-md-4">{{item.title}} </div> <div class="cell url col-lg-6 col-md-6"> {{item.url}}</div> <div class="cell method col-lg-2 col-md-2">{{item.methodType}}</div> </div> <div ng-class="{\'expand\' : expandBlock == true &amp;&amp; $index == currentBlock}" class="expand-block"> <div class="description">{{item.description}}</div> <div class="sample row"> <div class="sample-left col-lg-6 col-md-6"> <div class="type col-lg-4">SAMPLE REQUEST :</div> <div class="details col-lg-8">{{item.sampleRequest}}</div> </div> <div class="sample-left col-lg-6 col-md-6"> <div class="type col-lg-4">SAMPLE RESPONSE : </div> <div class="details col-lg-8">{{item.sampleResponse}}</div> </div> </div> <div ng-if="item.note" class="note">Note : {{item.note}}</div> </div> </div> </div> </div> </div> </div> </div>'),e.put("app/Features/safes/safes.html",' <header></header> <sidebar></sidebar> <script type="text/ng-template" id="createNewFolderPopup.html"> <div class="modal-sep createFolder"> <div class="common-header-label text-center">Create new folder</div> </div> <loading-state ng-if="isLoadingModalData"></loading-state> <form ng-if="!isLoadingModalData" name="CreateFolder" ng-submit="saveNewFolder(newFolderName)" class="createFolder left-lg-sep right-lg-sep"> <div class="modal-inner-wrapper"> <div class="common-form"> <div class="common-form-row"> <div class="details-input-group"> <div class="common-form-label">Folder Name</div> <input placeholder="Enter folder name" restrict-special-char ng-model="newFolderName" required class="form-control input-box-style"> </div> </div> </div> </div> <div class="text-center bottom-lg-sep modal-sep aws"> <div class="clearfix bottom-sm-sep"> <button type="submit" class="common-btn btn btn-primary btn-lg">CREATE </button> </div> <div class="clearfix"> <button ng-click="close()" class="link-style common-btn btn btn-default btn-lg">CANCEL</button> </div> </div> </form> </script> <script type="text/ng-template" id="error.html"> <div class="row"> <div class="top-lg-sep"> <div class="common-header-label text-center">Error</div> </div> <div class="top-lg-sep notification-text">{{errorMessage}}</div> </div> <div class="text-center bottom-lg-sep top-lg-sep notification-button"> <div class="clearfix bottom-sm-sep"> <button ng-click="close()" class="link-style common-btn btn btn-primary btn-lg">Close</button> </div> </div> </script> <div class="container-fluid safes"> <div class="container-fluid-wrapper curved"> <div class="page-header-container"> <div class="header-inner-container"> <nav-bar active-tab="safes" gotopage="goToPage" nav-tags="safesNavTags"></nav-bar> <div class="page-header-text">SAFES</div> </div> </div> <div class="page-content-container"> <div class="right search-bar-container"> <div class="search-bar"> <div class="search-box"> <div class="search-icon"> <div class="icon-search"></div> </div> <div class="search-input-wrapper"> <input type="text" placeholder="SEARCH" ng-model="searchValue" class="search-input-box input-box-style"> </div> </div> </div> </div> <md-content> <md-tabs md-dynamic-height="" md-border-bottom=""> <md-tab ng-repeat="cat in categories" ng-attr-label="{{cat.name}}" ng-click="resetSlide(cat)"> <md-content class="md-padding md-content-wrapper"> <loading-state ng-if="isLoadingData"> </loading-state> <div ng-class="{\'slide-left\' : slide == true, \'hidden\' : !cat.tableData}" ng-if="!isLoadingData" class="slider-block"> <div class="md-content-inner-wrapper"> <div class="new-container page-content-container"> <div class="create-folder-container slide-header"> <div ng-click="sliderFunction(null)" class="function-text"> <div class="clearfix"> <div class="editColor left static"> <div class="glyphicon glyphicon-chevron-left"></div> </div> <div class="left"><span>{{slideHeader}}</span></div> </div> </div> <div ng-show="slideAuth == \'write\'" ng-click="createFolder(cat.name)" class="function-text link-style option right"> <div class="action-icon-wrapper static"> <div class="rotate glyphicon glyphicon-remove-circle"></div> </div> <div class="create-link middle-block"> <div class="text hide-in-mobile">CREATE NEW FOLDER</div> </div> </div> <div class="sub-header clearfix">{{slideHeaderDescription}}</div> </div> </div> <listtable data="slideItems" auth="slideAuth" admin="false" slider-func="sliderFunction" search-value="searchValue" type="\'accordion\'" loading="isLoadingData" folder="getFolder(folder)"></listtable> </div> </div> <div ng-if="slide !== true" class="md-content-inner-wrapper"> <div ng-if="!isLoadingData" ng-class="{\'slide-left-parent\' : slide == true}" class="new-container page-content-container"> <radio-buttons data="radio" state="\'active\'" class="invisible"></radio-buttons> <tiles data="cat.tableData" tile-func-available="true" img="\'safe_tile.png\'" search-value="searchValue" tile-details="sliderFunction" ng-if="cat.tableData"></tiles> <div ng-if="cat.tableData.length === 0" class="unavailable-text">No safes available</div> </div> </div> </md-content> </md-tab> </md-tabs> </md-content> </div> </div> </div>'),
e.put("app/Features/sign-up/sign-up.html",' <header class="signin"></header> <sidebar></sidebar> <script type="text/ng-template" id="error.html"> <div class="row"> <div class="top-lg-sep"> <div class="common-header-label text-center">Error</div> </div> <div class="top-lg-sep notification-text">{{errorMessage}}</div> </div> <div class="text-center bottom-lg-sep top-lg-sep notification-button"> <div class="clearfix bottom-sm-sep"> <button ng-click="close()" class="common-btn btn btn-primary btn-lg">Close</button> </div> </div> </script> <div class="container-fluid sign-in"> <div class="container-fluid-wrapper container-fluid-wrapper-signin"> <loading-state ng-show="isLoadingData" ng-cloak=""></loading-state> <div class="form-wrapper"> <div class="sign-in-icon-container clearfix"> <div class="sign-in-image"> <img src="assets/images/signin.png"></div> </div> <form ng-show="!isLoadingData" name="authenticate" ng-submit="login()"> <div class="form-group"> <label for="usr">Corp ID</label> <input id="usr" placeholder="Enter your Corp ID" ng-model="username" required="" class="form-control input-box-style"> </div> <div class="form-group extra-margin-actions"> <label for="pwd">Password</label> <input type="password" id="pwd" placeholder="Enter your password" ng-model="password" autocomplete="new-password" required="" class="form-control input-box-style"> </div> <div class="button-container"> <button type="submit" class="btn btn-primary btn-lg login-button">Login</button> </div> </form> <div class="center-text forgot-pwd"><a href="{{forgotPasswordLink}}" target="_blank" ng-if="!!forgotPasswordLink" class="link-style">Forgot Password?</a></div> </div> </div> </div>'),e.put("app/Features/unseal/unseal.html",' <header class="unseal"></header> <sidebar></sidebar> <script type="text/ng-template" id="error.html"> <div class="row"> <div class="top-lg-sep"> <div class="common-header-label text-center">Error</div> </div> <div class="top-lg-sep notification-text">{{errorMessage}}</div> </div> <div class="text-center bottom-lg-sep top-lg-sep notification-button"> <div class="clearfix bottom-sm-sep"> <button ng-click="close()" class="link-style common-btn btn btn-primary btn-lg">Close</button> </div> </div> </script> <div class="container-fluid unseal"> <div class="container-fluid-wrapper curved"> <div class="common-main-content text-center"> <div class="unseal-content-wrapper"> <div class="safe-detail-container-block"> <div class="safe-img-container"><img src="../assets/images/safe_icon.png"></div> <div class="font-type-normal">Minimum 3 users with keys are required to unseal the vault. If you are one of the users with a key, enter the IP address of the vault and your key to unseal the vault.</div> </div> <div class="details-input-group"> <div class="common-form-label">Server IP Address</div> <input ng-model="payload.serverip" name="serverip" type="text" placeholder="12.345.67.890" required="" class="form-control input-box-style"> </div> <div class="button-container"> <button type="button" ng-click="checkUnsealProgress()" class="link-style common-btn btn btn-primary btn-lg">View Status</button> </div> <loading-state ng-if="isLoadingData"></loading-state> <div ng-if="showProgress" class="unseal-status-wrapper"> <div class="unseal-progress-wrapper"> <div class="unseal-progress-bar"></div> <div class="unseal-progress-marker"> <div class="progress-dot-wrapper"> <div ng-class="{active: progress &lt; 1, checked: progress &gt;= 1}" class="progress-dot"> <div class="checkmark"></div> </div> </div> <div class="unseal-user">USER 1</div> <div ng-if="progress &lt; 1" class="unseal-status">key needed</div> <div ng-if="progress &gt;= 1" class="unseal-status">key accepted</div> </div> <div class="unseal-progress-marker"> <div class="progress-dot-wrapper"> <div ng-class="{active: progress == 1, checked: progress &gt;= 2, inactive: progress &lt; 1}" class="progress-dot"> <div class="checkmark"></div> </div> </div> <div class="unseal-user">USER 2</div> <div ng-if="progress &lt; 2" class="unseal-status">key needed</div> <div ng-if="progress &gt;= 2" class="unseal-status">key accepted</div> </div> <div class="unseal-progress-marker"> <div class="progress-dot-wrapper"> <div ng-class="{active: progress == 2, checked: progress &gt;= 3, inactive: progress &lt; 2}" class="progress-dot"> <div class="checkmark"></div> </div> </div> <div class="unseal-user">USER 3</div> <div ng-if="progress &lt; 3" class="unseal-status">key needed</div> <div ng-if="progress &gt;= 3" class="unseal-status">key accepted</div> </div> </div> <div ng-if="progress &lt; 3 &amp;&amp; !keySubmitted" class="details-input-group"> <div class="common-form-label">Key</div> <input ng-model="payload.key" name="key" type="text" required="" class="form-control input-box-style"> </div> <div ng-if="progress &lt; 3 &amp;&amp; !keySubmitted" class="button-container"> <button type="button" ng-click="submitKey()" class="link-style common-btn btn btn-primary btn-lg">Unseal Vault</button> </div> <div ng-if="progress &lt; 3 &amp;&amp; keySubmitted" class="unseal-success-message"> <h4>Your key has been entered successfully. {{ 3 - progress }} more keys are required to open the vault.</h4> </div> <div ng-if="progress === 3 &amp;&amp; keySubmitted" class="unseal-success-message"> <h4>Success! You have unsealed the vault.</h4> </div> <div ng-if="progress === 3 &amp;&amp; !keySubmitted" class="unseal-success-message"> <h4>This instance of vault is already unsealed!</h4> </div> </div> </div> </div> </div> </div>'),e.put("app/Common/Directives/dateTimeFilter/dateTimeFilter.html",' <div ng-class="{&quot;expand&quot; : parentObj.isTimeFilterActive}" ng-click="parentObj.isTimeFilterActive = !parentObj.isTimeFilterActive" class="inner-first-wrap table-cell"> <div class="inner-select-option inline-block clearfix"><span class="select-label left">{{modelData.selectedLabelText}}</span><span class="arrow-down right"></span></div> </div> <div ng-class="{&quot;expand&quot; : parentObj.isTimeFilterActive}" ng-click="parentObj.isTimeFilterActive = !parentObj.isTimeFilterActive" class="filter-option-con absolute pane-child-third-top-select"> <div class="inner-first-wrap table-cell"> <div class="inner-select-option inline-block clearfix"><span class="select-label left">{{modelData.selectedLabelText}}</span><span class="arrow-down right rotated-arrow"></span></div> </div> <div ng-click="$event.stopPropagation();" class="filter-overlay-body"> <div class="filter-option-wrap"> <div class="filter-radio-first-con cm-filter-radio-con"> <div class="filter-radio-first filter-common-radio"> <input type="radio" id="timePeriod" value="timePeriodVal" ng-model="parentObj.timeFilterRadioModel" ng-click="callModel(\'timePeriodVal\')"> <label for="timePeriod" ng-class="{&quot;icon-unselected&quot;:parentObj.timeFilterRadioModel !== &quot;timePeriodVal&quot;,&quot;icon-selected&quot;:parentObj.timeFilterRadioModel === &quot;timePeriodVal&quot;}" class="label-checkbox">TIME PERIOD</label> </div> <div ng-class="{\'this-is-disabled\':parentObj.timeFilterRadioModel !== \'timePeriodVal\'}" class="filter-radio-sibling-con relative"> <div ng-if="parentObj.timeFilterRadioModel !== \'timePeriodVal\'" class="disable-wrap absolute"></div> <div ng-init="parentObj.singleSelect = \'LAST 6 MONTHS\'" class="filter-select-con"> <ui-select ng-model="modelData.selectedItem" ng-change="dateSelectBoxChanged();"> <ui-select-match><span ng-bind="$select.selected.name"></span></ui-select-match> <ui-select-choices repeat="item in itemArray track by item.id"><span ng-bind="item.name"></span></ui-select-choices> </ui-select> </div> </div> </div> <div class="filter-radio-bottom-con cm-filter-radio-con"> <div class="filter-radio-second filter-common-radio"> <input type="radio" id="dateRange" value="dateRangeVal" ng-model="parentObj.timeFilterRadioModel" ng-click="callModel(\'dateRangeVal\')"> <label for="dateRange" ng-class="{&quot;icon-unselected&quot;:parentObj.timeFilterRadioModel !== &quot;dateRangeVal&quot;,&quot;icon-selected&quot;:parentObj.timeFilterRadioModel === &quot;dateRangeVal&quot;}" class="label-checkbox">DATE RANGE</label> </div> <div ng-class="{\'this-is-disabled\':parentObj.timeFilterRadioModel !== \'dateRangeVal\'}" class="filter-radio-sibling-con relative"> <div ng-if="parentObj.timeFilterRadioModel !== \'dateRangeVal\'" class="disable-wrap absolute"></div> <div class="filter-date-input-con first"> <div class="filter-date-input-label">FROM</div> <div class="filter-cm-date-input-wrap relative"> <input type="text" dategetter="" ng-model="modelData.createdDate" placeholder="From" ng-change="fromDateInputChanged(modelData.createdDate);" class="createdDate from-date-input"> <div class="date-icon-input absolute"><span class="icon-date_picker"></span></div> </div> </div> <div class="filter-date-input-con second"> <div class="filter-date-input-label">TO</div> <div class="filter-cm-date-input-wrap relative"> <input type="text" dategetter="" ng-model="modelData.endDate" placeholder="To" ng-change="toDateInputChanged(modelData.endDate);" class="createdDate to-date-input"> <div class="date-icon-input absolute"><span class="icon-date_picker"></span></div> </div> </div> </div> </div> </div> <div ng-class="{\'is-active\': (isSelectionMade &amp;&amp; selectedLabelValue)}" class="filter-bottom-btn-con absolute"> <div ng-click="triggerTimeFiltering();" class="filter-bottom-btn-wrp"> <div class="filter-bottom-btn-text table-cell">APPLY</div> </div> </div> </div> </div>'),e.put("app/Common/Directives/dropDown/dropDown.html",' <div ng-class="{errorIndicator : error === true &amp;&amp; dropdownDisable !== true}" class="select-dropdown-container"> <div class="select-box-text no-sep"> <div uib-dropdown="" uib-dropdown-toggle="" is-open="status.isopen" class="btn-group"> <button id="btn-append-to-single-button" ng-click="toggleDropdown($event)" type="button" ng-disabled="dropdownDisable" class="btn btn-default">{{dropDownOptions.selectedGroupOption.type}}<span class="caret"></span></button> <ul uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button" ng-if="!(dropdownDisable === true)" class="dropdown-menu"> <li role="menuitem" ng-repeat="option in dropDownOptions.tableOptions" ng-click="filterUpdate(option)"><a ng-if="(option.srefValue.obj != undefined || option.srefValue.obj != null) &amp;&amp; option.srefValue != \'href\'">{{option.type}}</a><a ng-if="option.srefValue == \'href\'" href="#">{{option.type}}</a><a ng-if="option.srefValue == null || option.srefValue == undefined">{{option.type}}</a></li> </ul> </div> </div> </div>'),e.put("app/Common/Directives/footer/footer.html",' <div class="footer-container"> <div class="footer-wrap"><img src="assets/images/logo_cts.png" class="logo-cts"><span class="footer-text">CLOUD STRATEGY & TRANSFORMATION</span></div> </div>'),e.put("app/Common/Directives/header/header.html",' <div class="header-container relative"> <div class="header-overlay absolute"></div> <div class="header-content relative clearfix"> <div class="burger-menu-con left hidden">/* Hiding the burger menu, as it is not required now */ <ul class="bm-icon-con"> <li class="bm-each-bar"></li> <li class="bm-each-bar"></li> <li class="bm-each-bar"></li> </ul> </div> <div class="header-muncher center-aligned"> <div class="muncher-icon-con inline-block"> <div class="muncher-icon-wrap"> <div class="muncher-icon table-cell"></div> </div> </div> </div> <div class="user-profile"> <img ng-click="showDropdown()" src="assets/images/male-user.png"> <ul ng-if="showingDropdown" class="profile-options-wrapper"> <li ng-click="logout()" class="profile-options"> <div class="icon-user"> </div> <div class="text">Logout</div> </li> </ul> </div> <div class="header-right right"> <div class="header-right-wrap"> <div class="notification-con relative right-icons"> <div class="notification-icon icon-Alert"></div> </div> <div class="profile-info right-icons"> <div class="profile-info-icon icon-Profile"></div> </div> <div class="profile-info right-icons"> <div class="profile-info-icon icon-download"></div> </div> <div class="profile-info right-icons"> <div class="profile-info-icon icon-Alert"></div> </div> </div> </div> </div> </div>'),e.put("app/Common/Directives/listTable/listTable.html",' <script type="text/ng-template" id="deleteFolderPopup.html"> <loading-state ng-if="isLoadingModalData"></loading-state> <div ng-if="!isLoadingModalData" class="top-lg-sep"> <div class="top-lg-sep"> <div class="common-header-label text-center">Confirmation</div> </div> <div class="top-lg-sep notification-text">Are you sure you want to delete this item?</div> <div class="text-center bottom-lg-sep top-lg-sep notification-button"> <div class="clearfix bottom-sm-sep"> <button ng-click="deleteFolder()" class="common-btn btn btn-primary btn-lg">DELETE</button> </div> <div class="clearfix"> <button ng-click="close()" class="link-style common-btn btn btn-default btn-lg">CANCEL</button> </div> </div> </div> </script> <script type="text/ng-template" id="deleteSecretPopup.html"> <loading-state ng-if="isLoadingModalData"></loading-state> <div ng-if="!isLoadingModalData" class="top-lg-sep"> <div class="top-lg-sep"> <div class="common-header-label text-center">Confirmation</div> </div> <div class="top-lg-sep notification-text">Are you sure you want to delete this secret?</div> <div class="text-center bottom-lg-sep top-lg-sep notification-button"> <div class="clearfix bottom-sm-sep"> <button ng-click="deleteSecret()" class="common-btn btn btn-primary btn-lg">DELETE</button> </div> <div class="clearfix"> <button ng-click="close()" class="link-style common-btn btn btn-default btn-lg">CANCEL</button> </div> </div> </div> </script> <div ng-if="(data.length === 0) &amp;&amp; (!admin)" class="unavailable-text">No folders available in your safe</div> <div ng-if="(data.length === 0) &amp;&amp; (admin)" class="unavailable-text">No Safes Available </div> <div ng-if="data.length !== 0" class="table-container"> <div class="table-header"> <div class="row"> <div class="cell col-lg-5 col-md-5 col-sm-5 col-xs-4 table-first-cell"><span ng-if="accordion == true">FOLDERS</span><span ng-if="accordion != true">SAFES</span></div> <div ng-class="{\'invisible\': accordion == true}" class="cell col-lg-5 col-md-5 col-sm-5 col-xs-5">TYPE</div> <div class="cell col-lg-2 col-md-2 col-sm-2 col-xs-3 block-3 action-header">ACTION</div> </div> </div> <div class="accordion-table-data-container"> <div ng-show="loading" ng-cloak="" class="loader-wrapper"> <div class="gif-wrp"><img src="assets/images/loading.gif" class="loading-state-img"></div> </div> <ul ng-show="!loading" ng-cloak="" class="accordion-table-data"> <li ng-repeat="item in data | filter: searchObject | filter : searchValue track by $index" class="accordian-list-item"> <div class="accordion-list-main"> <div ng-click="loadFolderData(item); expandRow($index)" class="row accordion-list-wrapper"> <div ng-if="accordion != true" class="cell pink-text col-lg-5 col-md-5 col-sm-5 col-xs-4 column-value-wrapper table-first-cell"> {{item.safe}}</div> <div ng-if="accordion == true" class="cell pink-text col-lg-5 col-md-5 col-sm-5 col-xs-4 column-value-wrapper table-first-cell"><span ng-if="accordion == true" ng-class="{\'icon-folder-open\' : expandBlock == true}" class="list-icon list-icon folder icon-folder"></span><span>{{item.name}}</span></div> <div ng-class="{\'invisible\': accordion == true}" class="cell col-lg-5 col-md-5 col-sm-5 col-xs-5 column-value-wrapper">{{item.type}}</div> <div class="cell col-lg-2 col-md-2 col-sm-2 col-xs-3 column-value-wrapper"> <div ng-if="admin" ng-click="editFolder({param: item})" class="list-icon icon-mode_edit"></div> <div ng-if="admin || auth === \'write\'" ng-click="openDeleteFolderModal(item, $event)" class="list-icon icon-delete"></div> </div> </div> </div> <div ng-class="{\'open-accordion\' : expandBlock === true &amp;&amp; $index === expandBlockIndex &amp;&amp; !admin}" class="accordion-expand-block"> <form ng-submit="saveSafe(item)" class="folder-wrapper"> <loading-state ng-if="isLoadingSecrets &amp;&amp; $index === expandBlockIndex &amp;&amp; expandBlock === true" ng-cloak="ng-cloak"></loading-state> <div class="secrets-accordion-wrapper"> <div ng-if="(!item.keys || (item.keys.length == 1 &amp;&amp; item.keys[0].key == &quot;default&quot;))" ng-cloak="ng-cloak" class="unavailable-text">No secrets available in your folder</div> <div ng-repeat="key in item.keys track by $index" ng-cloak="ng-cloak" ng-if="(!(!item.keys || (item.keys.length == 1 &amp;&amp; item.keys[0].key == &quot;default&quot;)))" class="folder-keys clearfix"> <div ng-if="!key.new &amp;&amp; key.key !== \'default\'" ng-cloak="ng-cloak" class="row"> <div class="cell block-2 col-lg-2 col-md-2 col-sm-2 col-xs-4 key">{{ key.key }}</div> <div class="cell block-3 col-lg-4 col-md-4 col-sm-4 col-xs-4 folder-key-input"> <input ng-attr-type="{{ showPassword ? \'text\' : \'password\' }}" ng-model="key.value" class="form-control"> <div ng-mousedown="showPassword = !showPassword" ng-mouseup="showPassword = !showPassword" class="list-icon icon-views"> </div> </div> <div class="down"> <div ng-click="copy(key.value)" class="list-icon icon-content_copy"></div> </div> <div ng-if="auth === \'write\'" class="down"> <div ng-click="openDeleteSecretModal(item, $index)" class="list-icon icon-delete"></div> </div> </div> <div ng-if="key.new" ng-cloak="" class="row"> <div class="cell block-2 col-lg-2 col-md-2 col-sm-2 col-xs-4 folder-key-input"> <input id="key" restrict-special-char="" maxlength="20" ng-model="key.key" placeholder="Key" required="" class="form-control input-box-style key-input-box"> </div> <div class="cell block-3 col-lg-4 col-md-4 col-sm-4 col-xs-4 folder-key-input"> <input id="secret" ng-attr-type="{{ showPassword ? \'text\' : \'password\' }}" type="password" ng-model="key.value" placeholder="Secret" autocomplete="new-password" required="" class="form-control input-box-style"> <div ng-mousedown="showPassword = !showPassword" ng-mouseup="showPassword = !showPassword" class="list-icon icon-views"></div> </div> </div> </div> </div> <div ng-if="auth === \'write\'" ng-cloak="ng-cloak" class="extra-actions"> <div class="create-folder-container"> <div ng-click="addNewSecret($index)" class="function-text link-style clearfix"> <div class="action-icon-wrapper static"> <div class="rotate glyphicon glyphicon-remove-circle"></div> </div> <div class="create-link middle-block"> <div class="text">ADD NEW SECRET</div> </div> </div> </div> <div ng-if="auth === \'write\'" ng-cloak="" class="row button-container"> <button type="submit" class="btn btn-primary btn-sm pull-right">SAVE</button>   </div> </div> </form> </div> </li> </ul> </div> </div>'),e.put("app/Common/Directives/loadingState/loadingState.html",' <div ng-style="loadingStyle" class="loading-state-con"> <div class="loading-state"> <div class="loading-state-wrp"> <div class="gif-wrp"><img src="assets/images/loader.png" class="loading-state-img"></div> </div> </div> </div>'),e.put("app/Common/Directives/navBar/navBar.html",' <div class="page-nav-block"> <div ng-if="navTagName.show" ng-click="goTo(navTagName.navigationName)" ng-repeat="navTagName in navTags" class="breadcrumb"><span ng-class="{\'active\': activeTab == navTagName.navigationName }">{{navTagName.displayName}}</span><span ng-if="navTagName.addComma" class="breadcrumb-arrow glyphicon glyphicon-menu-right"></span></div> </div>'),e.put("app/Common/Directives/radioButtons/radioButtons.html",' <div class="radio-container"> <md-radio-group layout="row" ng-model="value" ng-class="{\'inactive\': state == false}"> <md-radio-button value="{{item.text}}" ng-disabled="state != true" ng-repeat="item in data.options">{{item.text}}</md-radio-button> </md-radio-group> <div class="radio-extra-functions"></div> </div>'),e.put("app/Common/Directives/sidebar/sidebar.html",' <div class="sidebar-container"></div>'),e.put("app/Common/Directives/tiles/tiles.html",' <div class="tiles-wrapper"> <div ng-show="loading" ng-cloak="" class="loader-wrapper"> <div class="gif-wrp"><img src="assets/images/loading.gif" class="loading-state-img"></div> </div> <ul ng-show="!loading" ng-cloak="" class="row"> <li ng-repeat="item in data | filter : searchValue" ng-click="parent != \'admin\' &amp;&amp; tileClicked($event, item)" class="tiles-container col-lg-3 col-md-3 col-sm-4 col-xs-6"> <div md-whiteframe="{{height}}" ng-init="height = 3" ng-mouseenter="height = 12" ng-mouseleave="height = 3" ng-class="{\'admin-parent\' : parent === \'admin\', \'safe-parent\': parent != \'admin\'}" class="tiles-container-block padded"> <div class="tile-image-wrapper"></div> <div class="tile-label">{{item.safe}}</div>   <div ng-if="parent === \'admin\'" class="admin-tile-overlay"> <div ng-click="$event.stopPropagation(); editFolder({param: item})" class="modify-safe-admin-wrapper edit-wrapper"><span class="icon-mode_edit action-icons-style action-icon-with-text-gap"></span><span class="modify-safe-text">Edit</span></div> <div ng-click="$event.stopPropagation(); deleteFolder({param: item})" class="modify-safe-admin-wrapper delete-wrapper"><span class="icon-delete action-icons-style action-icon-with-text-gap"></span><span class="modify-safe-text">Delete</span></div> </div> </div> </li> <li ng-repeat="item in numOfTiles = ( data | filter : searchValue ).length"> </li> </ul> </div>'),e.put("app/Common/Directives/header/templates/burgerMenu.html","")}]);
//# sourceMappingURL=../maps/scripts/app-3aaaaf2b15.js.map
